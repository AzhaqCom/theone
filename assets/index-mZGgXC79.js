(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const f of d)if(f.type==="childList")for(const h of f.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&u(h)}).observe(document,{childList:!0,subtree:!0});function s(d){const f={};return d.integrity&&(f.integrity=d.integrity),d.referrerPolicy&&(f.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?f.credentials="include":d.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(d){if(d.ep)return;d.ep=!0;const f=s(d);fetch(d.href,f)}})();function eu(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Lr={exports:{}},Zn={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function Jh(){if(If)return Zn;If=1;var r=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function s(u,d,f){var h=null;if(f!==void 0&&(h=""+f),d.key!==void 0&&(h=""+d.key),"key"in d){f={};for(var m in d)m!=="key"&&(f[m]=d[m])}else f=d;return d=f.ref,{$$typeof:r,type:u,key:h,ref:d!==void 0?d:null,props:f}}return Zn.Fragment=c,Zn.jsx=s,Zn.jsxs=s,Zn}var Wf;function Ih(){return Wf||(Wf=1,Lr.exports=Jh()),Lr.exports}var i=Ih(),Gr={exports:{}},fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function Wh(){if(Ff)return fe;Ff=1;var r=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.iterator;function M(S){return S===null||typeof S!="object"?null:(S=x&&S[x]||S["@@iterator"],typeof S=="function"?S:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,N={};function R(S,$,Z){this.props=S,this.context=$,this.refs=N,this.updater=Z||T}R.prototype.isReactComponent={},R.prototype.setState=function(S,$){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,$,"setState")},R.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function A(){}A.prototype=R.prototype;function q(S,$,Z){this.props=S,this.context=$,this.refs=N,this.updater=Z||T}var k=q.prototype=new A;k.constructor=q,_(k,R.prototype),k.isPureReactComponent=!0;var ce=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},ne=Object.prototype.hasOwnProperty;function I(S,$,Z,Q,le,me){return Z=me.ref,{$$typeof:r,type:S,key:$,ref:Z!==void 0?Z:null,props:me}}function J(S,$){return I(S.type,$,void 0,void 0,void 0,S.props)}function W(S){return typeof S=="object"&&S!==null&&S.$$typeof===r}function ae(S){var $={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(Z){return $[Z]})}var Ne=/\/+/g;function Ae(S,$){return typeof S=="object"&&S!==null&&S.key!=null?ae(""+S.key):$.toString(36)}function U(){}function X(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(U,U):(S.status="pending",S.then(function($){S.status==="pending"&&(S.status="fulfilled",S.value=$)},function($){S.status==="pending"&&(S.status="rejected",S.reason=$)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function w(S,$,Z,Q,le){var me=typeof S;(me==="undefined"||me==="boolean")&&(S=null);var oe=!1;if(S===null)oe=!0;else switch(me){case"bigint":case"string":case"number":oe=!0;break;case"object":switch(S.$$typeof){case r:case c:oe=!0;break;case b:return oe=S._init,w(oe(S._payload),$,Z,Q,le)}}if(oe)return le=le(S),oe=Q===""?"."+Ae(S,0):Q,ce(le)?(Z="",oe!=null&&(Z=oe.replace(Ne,"$&/")+"/"),w(le,$,Z,"",function(Pt){return Pt})):le!=null&&(W(le)&&(le=J(le,Z+(le.key==null||S&&S.key===le.key?"":(""+le.key).replace(Ne,"$&/")+"/")+oe)),$.push(le)),1;oe=0;var et=Q===""?".":Q+":";if(ce(S))for(var De=0;De<S.length;De++)Q=S[De],me=et+Ae(Q,De),oe+=w(Q,$,Z,me,le);else if(De=M(S),typeof De=="function")for(S=De.call(S),De=0;!(Q=S.next()).done;)Q=Q.value,me=et+Ae(Q,De++),oe+=w(Q,$,Z,me,le);else if(me==="object"){if(typeof S.then=="function")return w(X(S),$,Z,Q,le);throw $=String(S),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return oe}function E(S,$,Z){if(S==null)return S;var Q=[],le=0;return w(S,Q,"","",function(me){return $.call(Z,me,le++)}),Q}function L(S){if(S._status===-1){var $=S._result;$=$(),$.then(function(Z){(S._status===0||S._status===-1)&&(S._status=1,S._result=Z)},function(Z){(S._status===0||S._status===-1)&&(S._status=2,S._result=Z)}),S._status===-1&&(S._status=0,S._result=$)}if(S._status===1)return S._result.default;throw S._result}var V=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)};function K(){}return fe.Children={map:E,forEach:function(S,$,Z){E(S,function(){$.apply(this,arguments)},Z)},count:function(S){var $=0;return E(S,function(){$++}),$},toArray:function(S){return E(S,function($){return $})||[]},only:function(S){if(!W(S))throw Error("React.Children.only expected to receive a single React element child.");return S}},fe.Component=R,fe.Fragment=s,fe.Profiler=d,fe.PureComponent=q,fe.StrictMode=u,fe.Suspense=g,fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,fe.__COMPILER_RUNTIME={__proto__:null,c:function(S){return F.H.useMemoCache(S)}},fe.cache=function(S){return function(){return S.apply(null,arguments)}},fe.cloneElement=function(S,$,Z){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var Q=_({},S.props),le=S.key,me=void 0;if($!=null)for(oe in $.ref!==void 0&&(me=void 0),$.key!==void 0&&(le=""+$.key),$)!ne.call($,oe)||oe==="key"||oe==="__self"||oe==="__source"||oe==="ref"&&$.ref===void 0||(Q[oe]=$[oe]);var oe=arguments.length-2;if(oe===1)Q.children=Z;else if(1<oe){for(var et=Array(oe),De=0;De<oe;De++)et[De]=arguments[De+2];Q.children=et}return I(S.type,le,void 0,void 0,me,Q)},fe.createContext=function(S){return S={$$typeof:h,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:f,_context:S},S},fe.createElement=function(S,$,Z){var Q,le={},me=null;if($!=null)for(Q in $.key!==void 0&&(me=""+$.key),$)ne.call($,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(le[Q]=$[Q]);var oe=arguments.length-2;if(oe===1)le.children=Z;else if(1<oe){for(var et=Array(oe),De=0;De<oe;De++)et[De]=arguments[De+2];le.children=et}if(S&&S.defaultProps)for(Q in oe=S.defaultProps,oe)le[Q]===void 0&&(le[Q]=oe[Q]);return I(S,me,void 0,void 0,null,le)},fe.createRef=function(){return{current:null}},fe.forwardRef=function(S){return{$$typeof:m,render:S}},fe.isValidElement=W,fe.lazy=function(S){return{$$typeof:b,_payload:{_status:-1,_result:S},_init:L}},fe.memo=function(S,$){return{$$typeof:v,type:S,compare:$===void 0?null:$}},fe.startTransition=function(S){var $=F.T,Z={};F.T=Z;try{var Q=S(),le=F.S;le!==null&&le(Z,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(K,V)}catch(me){V(me)}finally{F.T=$}},fe.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},fe.use=function(S){return F.H.use(S)},fe.useActionState=function(S,$,Z){return F.H.useActionState(S,$,Z)},fe.useCallback=function(S,$){return F.H.useCallback(S,$)},fe.useContext=function(S){return F.H.useContext(S)},fe.useDebugValue=function(){},fe.useDeferredValue=function(S,$){return F.H.useDeferredValue(S,$)},fe.useEffect=function(S,$,Z){var Q=F.H;if(typeof Z=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Q.useEffect(S,$)},fe.useId=function(){return F.H.useId()},fe.useImperativeHandle=function(S,$,Z){return F.H.useImperativeHandle(S,$,Z)},fe.useInsertionEffect=function(S,$){return F.H.useInsertionEffect(S,$)},fe.useLayoutEffect=function(S,$){return F.H.useLayoutEffect(S,$)},fe.useMemo=function(S,$){return F.H.useMemo(S,$)},fe.useOptimistic=function(S,$){return F.H.useOptimistic(S,$)},fe.useReducer=function(S,$,Z){return F.H.useReducer(S,$,Z)},fe.useRef=function(S){return F.H.useRef(S)},fe.useState=function(S){return F.H.useState(S)},fe.useSyncExternalStore=function(S,$,Z){return F.H.useSyncExternalStore(S,$,Z)},fe.useTransition=function(){return F.H.useTransition()},fe.version="19.1.1",fe}var em;function tu(){return em||(em=1,Gr.exports=Wh()),Gr.exports}var te=tu();const ze=eu(te);var $r={exports:{}},Kn={},Pr={exports:{}},Yr={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tm;function Fh(){return tm||(tm=1,function(r){function c(E,L){var V=E.length;E.push(L);e:for(;0<V;){var K=V-1>>>1,S=E[K];if(0<d(S,L))E[K]=L,E[V]=S,V=K;else break e}}function s(E){return E.length===0?null:E[0]}function u(E){if(E.length===0)return null;var L=E[0],V=E.pop();if(V!==L){E[0]=V;e:for(var K=0,S=E.length,$=S>>>1;K<$;){var Z=2*(K+1)-1,Q=E[Z],le=Z+1,me=E[le];if(0>d(Q,V))le<S&&0>d(me,Q)?(E[K]=me,E[le]=V,K=le):(E[K]=Q,E[Z]=V,K=Z);else if(le<S&&0>d(me,V))E[K]=me,E[le]=V,K=le;else break e}}return L}function d(E,L){var V=E.sortIndex-L.sortIndex;return V!==0?V:E.id-L.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;r.unstable_now=function(){return f.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var g=[],v=[],b=1,x=null,M=3,T=!1,_=!1,N=!1,R=!1,A=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function ce(E){for(var L=s(v);L!==null;){if(L.callback===null)u(v);else if(L.startTime<=E)u(v),L.sortIndex=L.expirationTime,c(g,L);else break;L=s(v)}}function F(E){if(N=!1,ce(E),!_)if(s(g)!==null)_=!0,ne||(ne=!0,Ae());else{var L=s(v);L!==null&&w(F,L.startTime-E)}}var ne=!1,I=-1,J=5,W=-1;function ae(){return R?!0:!(r.unstable_now()-W<J)}function Ne(){if(R=!1,ne){var E=r.unstable_now();W=E;var L=!0;try{e:{_=!1,N&&(N=!1,q(I),I=-1),T=!0;var V=M;try{t:{for(ce(E),x=s(g);x!==null&&!(x.expirationTime>E&&ae());){var K=x.callback;if(typeof K=="function"){x.callback=null,M=x.priorityLevel;var S=K(x.expirationTime<=E);if(E=r.unstable_now(),typeof S=="function"){x.callback=S,ce(E),L=!0;break t}x===s(g)&&u(g),ce(E)}else u(g);x=s(g)}if(x!==null)L=!0;else{var $=s(v);$!==null&&w(F,$.startTime-E),L=!1}}break e}finally{x=null,M=V,T=!1}L=void 0}}finally{L?Ae():ne=!1}}}var Ae;if(typeof k=="function")Ae=function(){k(Ne)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,X=U.port2;U.port1.onmessage=Ne,Ae=function(){X.postMessage(null)}}else Ae=function(){A(Ne,0)};function w(E,L){I=A(function(){E(r.unstable_now())},L)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(E){E.callback=null},r.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<E?Math.floor(1e3/E):5},r.unstable_getCurrentPriorityLevel=function(){return M},r.unstable_next=function(E){switch(M){case 1:case 2:case 3:var L=3;break;default:L=M}var V=M;M=L;try{return E()}finally{M=V}},r.unstable_requestPaint=function(){R=!0},r.unstable_runWithPriority=function(E,L){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var V=M;M=E;try{return L()}finally{M=V}},r.unstable_scheduleCallback=function(E,L,V){var K=r.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?K+V:K):V=K,E){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=V+S,E={id:b++,callback:L,priorityLevel:E,startTime:V,expirationTime:S,sortIndex:-1},V>K?(E.sortIndex=V,c(v,E),s(g)===null&&E===s(v)&&(N?(q(I),I=-1):N=!0,w(F,V-K))):(E.sortIndex=S,c(g,E),_||T||(_=!0,ne||(ne=!0,Ae()))),E},r.unstable_shouldYield=ae,r.unstable_wrapCallback=function(E){var L=M;return function(){var V=M;M=L;try{return E.apply(this,arguments)}finally{M=V}}}}(Yr)),Yr}var am;function ev(){return am||(am=1,Pr.exports=Fh()),Pr.exports}var Xr={exports:{}},it={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lm;function tv(){if(lm)return it;lm=1;var r=tu();function c(g){var v="https://react.dev/errors/"+g;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)v+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var u={d:{f:s,r:function(){throw Error(c(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},d=Symbol.for("react.portal");function f(g,v,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:d,key:x==null?null:""+x,children:g,containerInfo:v,implementation:b}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,v){if(g==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return it.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=u,it.createPortal=function(g,v){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(c(299));return f(g,v,null,b)},it.flushSync=function(g){var v=h.T,b=u.p;try{if(h.T=null,u.p=2,g)return g()}finally{h.T=v,u.p=b,u.d.f()}},it.preconnect=function(g,v){typeof g=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,u.d.C(g,v))},it.prefetchDNS=function(g){typeof g=="string"&&u.d.D(g)},it.preinit=function(g,v){if(typeof g=="string"&&v&&typeof v.as=="string"){var b=v.as,x=m(b,v.crossOrigin),M=typeof v.integrity=="string"?v.integrity:void 0,T=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;b==="style"?u.d.S(g,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:x,integrity:M,fetchPriority:T}):b==="script"&&u.d.X(g,{crossOrigin:x,integrity:M,fetchPriority:T,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},it.preinitModule=function(g,v){if(typeof g=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var b=m(v.as,v.crossOrigin);u.d.M(g,{crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&u.d.M(g)},it.preload=function(g,v){if(typeof g=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var b=v.as,x=m(b,v.crossOrigin);u.d.L(g,b,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},it.preloadModule=function(g,v){if(typeof g=="string")if(v){var b=m(v.as,v.crossOrigin);u.d.m(g,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:b,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else u.d.m(g)},it.requestFormReset=function(g){u.d.r(g)},it.unstable_batchedUpdates=function(g,v){return g(v)},it.useFormState=function(g,v,b){return h.H.useFormState(g,v,b)},it.useFormStatus=function(){return h.H.useHostTransitionStatus()},it.version="19.1.1",it}var nm;function bm(){if(nm)return Xr.exports;nm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(c){console.error(c)}}return r(),Xr.exports=tv(),Xr.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm;function av(){if(sm)return Kn;sm=1;var r=ev(),c=tu(),s=bm();function u(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function f(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(a=t.return),e=t.return;while(e)}return t.tag===3?a:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(f(e)!==e)throw Error(u(188))}function g(e){var t=e.alternate;if(!t){if(t=f(e),t===null)throw Error(u(188));return t!==e?null:e}for(var a=e,l=t;;){var n=a.return;if(n===null)break;var o=n.alternate;if(o===null){if(l=n.return,l!==null){a=l;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===a)return m(n),e;if(o===l)return m(n),t;o=o.sibling}throw Error(u(188))}if(a.return!==l.return)a=n,l=o;else{for(var p=!1,y=n.child;y;){if(y===a){p=!0,a=n,l=o;break}if(y===l){p=!0,l=n,a=o;break}y=y.sibling}if(!p){for(y=o.child;y;){if(y===a){p=!0,a=o,l=n;break}if(y===l){p=!0,l=o,a=n;break}y=y.sibling}if(!p)throw Error(u(189))}}if(a.alternate!==l)throw Error(u(190))}if(a.tag!==3)throw Error(u(188));return a.stateNode.current===a?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var b=Object.assign,x=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),q=Symbol.for("react.consumer"),k=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),ne=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),ae=Symbol.for("react.memo_cache_sentinel"),Ne=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=Ne&&e[Ne]||e["@@iterator"],typeof e=="function"?e:null)}var U=Symbol.for("react.client.reference");function X(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===U?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _:return"Fragment";case R:return"Profiler";case N:return"StrictMode";case F:return"Suspense";case ne:return"SuspenseList";case W:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case T:return"Portal";case k:return(e.displayName||"Context")+".Provider";case q:return(e._context.displayName||"Context")+".Consumer";case ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case J:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}var w=Array.isArray,E=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},K=[],S=-1;function $(e){return{current:e}}function Z(e){0>S||(e.current=K[S],K[S]=null,S--)}function Q(e,t){S++,K[S]=e.current,e.current=t}var le=$(null),me=$(null),oe=$(null),et=$(null);function De(e,t){switch(Q(oe,t),Q(me,e),Q(le,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Cf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Cf(t),e=Ef(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Z(le),Q(le,e)}function Pt(){Z(le),Z(me),Z(oe)}function Kl(e){e.memoizedState!==null&&Q(et,e);var t=le.current,a=Ef(t,e.type);t!==a&&(Q(me,e),Q(le,a))}function Ve(e){me.current===e&&(Z(le),Z(me)),et.current===e&&(Z(et),Yn._currentValue=V)}var ct=Object.prototype.hasOwnProperty,Be=r.unstable_scheduleCallback,rt=r.unstable_cancelCallback,va=r.unstable_shouldYield,Ti=r.unstable_requestPaint,Yt=r.unstable_now,Dm=r.unstable_getCurrentPriorityLevel,lu=r.unstable_ImmediatePriority,nu=r.unstable_UserBlockingPriority,ts=r.unstable_NormalPriority,Rm=r.unstable_LowPriority,su=r.unstable_IdlePriority,zm=r.log,Hm=r.unstable_setDisableYieldValue,Jl=null,bt=null;function ga(e){if(typeof zm=="function"&&Hm(e),bt&&typeof bt.setStrictMode=="function")try{bt.setStrictMode(Jl,e)}catch{}}var xt=Math.clz32?Math.clz32:Bm,Om=Math.log,qm=Math.LN2;function Bm(e){return e>>>=0,e===0?32:31-(Om(e)/qm|0)|0}var as=256,ls=4194304;function Pa(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ns(e,t,a){var l=e.pendingLanes;if(l===0)return 0;var n=0,o=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var y=l&134217727;return y!==0?(l=y&~o,l!==0?n=Pa(l):(p&=y,p!==0?n=Pa(p):a||(a=y&~e,a!==0&&(n=Pa(a))))):(y=l&~o,y!==0?n=Pa(y):p!==0?n=Pa(p):a||(a=l&~e,a!==0&&(n=Pa(a)))),n===0?0:t!==0&&t!==n&&(t&o)===0&&(o=n&-n,a=t&-t,o>=a||o===32&&(a&4194048)!==0)?t:n}function Il(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Um(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iu(){var e=as;return as<<=1,(as&4194048)===0&&(as=256),e}function cu(){var e=ls;return ls<<=1,(ls&62914560)===0&&(ls=4194304),e}function Ai(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function Wl(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function wm(e,t,a,l,n,o){var p=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var y=e.entanglements,j=e.expirationTimes,H=e.hiddenUpdates;for(a=p&~a;0<a;){var G=31-xt(a),Y=1<<G;y[G]=0,j[G]=-1;var O=H[G];if(O!==null)for(H[G]=null,G=0;G<O.length;G++){var B=O[G];B!==null&&(B.lane&=-536870913)}a&=~Y}l!==0&&ru(e,l,0),o!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=o&~(p&~t))}function ru(e,t,a){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-xt(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function uu(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var l=31-xt(a),n=1<<l;n&t|e[l]&t&&(e[l]|=t),a&=~n}}function Mi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Di(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ou(){var e=L.p;return e!==0?e:(e=window.event,e===void 0?32:Vf(e.type))}function Lm(e,t){var a=L.p;try{return L.p=e,t()}finally{L.p=a}}var ya=Math.random().toString(36).slice(2),nt="__reactFiber$"+ya,dt="__reactProps$"+ya,rl="__reactContainer$"+ya,Ri="__reactEvents$"+ya,Gm="__reactListeners$"+ya,$m="__reactHandles$"+ya,du="__reactResources$"+ya,Fl="__reactMarker$"+ya;function zi(e){delete e[nt],delete e[dt],delete e[Ri],delete e[Gm],delete e[$m]}function ul(e){var t=e[nt];if(t)return t;for(var a=e.parentNode;a;){if(t=a[rl]||a[nt]){if(a=t.alternate,t.child!==null||a!==null&&a.child!==null)for(e=Df(e);e!==null;){if(a=e[nt])return a;e=Df(e)}return t}e=a,a=e.parentNode}return null}function ol(e){if(e=e[nt]||e[rl]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function en(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(u(33))}function dl(e){var t=e[du];return t||(t=e[du]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Fl]=!0}var fu=new Set,mu={};function Ya(e,t){fl(e,t),fl(e+"Capture",t)}function fl(e,t){for(mu[e]=t,e=0;e<t.length;e++)fu.add(t[e])}var Pm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pu={},hu={};function Ym(e){return ct.call(hu,e)?!0:ct.call(pu,e)?!1:Pm.test(e)?hu[e]=!0:(pu[e]=!0,!1)}function ss(e,t,a){if(Ym(t))if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+a)}}function is(e,t,a){if(a===null)e.removeAttribute(t);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+a)}}function Ft(e,t,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(t,a,""+l)}}var Hi,vu;function ml(e){if(Hi===void 0)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);Hi=t&&t[1]||"",vu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+e+vu}var Oi=!1;function qi(e,t){if(!e||Oi)return"";Oi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(B){var O=B}Reflect.construct(e,[],Y)}else{try{Y.call()}catch(B){O=B}e.call(Y.prototype)}}else{try{throw Error()}catch(B){O=B}(Y=e())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(B){if(B&&O&&typeof B.stack=="string")return[B.stack,O.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=l.DetermineComponentFrameRoot(),p=o[0],y=o[1];if(p&&y){var j=p.split(`
`),H=y.split(`
`);for(n=l=0;l<j.length&&!j[l].includes("DetermineComponentFrameRoot");)l++;for(;n<H.length&&!H[n].includes("DetermineComponentFrameRoot");)n++;if(l===j.length||n===H.length)for(l=j.length-1,n=H.length-1;1<=l&&0<=n&&j[l]!==H[n];)n--;for(;1<=l&&0<=n;l--,n--)if(j[l]!==H[n]){if(l!==1||n!==1)do if(l--,n--,0>n||j[l]!==H[n]){var G=`
`+j[l].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=l&&0<=n);break}}}finally{Oi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?ml(a):""}function Xm(e){switch(e.tag){case 26:case 27:case 5:return ml(e.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 15:return qi(e.type,!1);case 11:return qi(e.type.render,!1);case 1:return qi(e.type,!0);case 31:return ml("Activity");default:return""}}function gu(e){try{var t="";do t+=Xm(e),e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function At(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function yu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vm(e){var t=yu(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var n=a.get,o=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(p){l=""+p,o.call(this,p)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(p){l=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cs(e){e._valueTracker||(e._valueTracker=Vm(e))}function bu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),l="";return e&&(l=yu(e)?e.checked?"true":"false":e.value),e=l,e!==a?(t.setValue(e),!0):!1}function rs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var km=/[\n"\\]/g;function Mt(e){return e.replace(km,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Bi(e,t,a,l,n,o,p,y){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+At(t)):e.value!==""+At(t)&&(e.value=""+At(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Ui(e,p,At(t)):a!=null?Ui(e,p,At(a)):l!=null&&e.removeAttribute("value"),n==null&&o!=null&&(e.defaultChecked=!!o),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.name=""+At(y):e.removeAttribute("name")}function xu(e,t,a,l,n,o,p,y){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(e.type=o),t!=null||a!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;a=a!=null?""+At(a):"",t=t!=null?""+At(t):a,y||t===e.value||(e.value=t),e.defaultValue=t}l=l??n,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=y?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p)}function Ui(e,t,a){t==="number"&&rs(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function pl(e,t,a,l){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&l&&(e[a].defaultSelected=!0)}else{for(a=""+At(a),t=null,n=0;n<e.length;n++){if(e[n].value===a){e[n].selected=!0,l&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Su(e,t,a){if(t!=null&&(t=""+At(t),t!==e.value&&(e.value=t),a==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=a!=null?""+At(a):""}function ju(e,t,a,l){if(t==null){if(l!=null){if(a!=null)throw Error(u(92));if(w(l)){if(1<l.length)throw Error(u(93));l=l[0]}a=l}a==null&&(a=""),t=a}a=At(t),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function hl(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=t;return}}e.textContent=t}var Qm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _u(e,t,a){var l=t.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,a):typeof a!="number"||a===0||Qm.has(t)?t==="float"?e.cssFloat=a:e[t]=(""+a).trim():e[t]=a+"px"}function Nu(e,t,a){if(t!=null&&typeof t!="object")throw Error(u(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var n in t)l=t[n],t.hasOwnProperty(n)&&a[n]!==l&&_u(e,n,l)}else for(var o in t)t.hasOwnProperty(o)&&_u(e,o,t[o])}function wi(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Km=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function us(e){return Km.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Li=null;function Gi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var vl=null,gl=null;function Cu(e){var t=ol(e);if(t&&(e=t.stateNode)){var a=e[dt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Bi(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),t=a.name,a.type==="radio"&&t!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Mt(""+t)+'"][type="radio"]'),t=0;t<a.length;t++){var l=a[t];if(l!==e&&l.form===e.form){var n=l[dt]||null;if(!n)throw Error(u(90));Bi(l,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<a.length;t++)l=a[t],l.form===e.form&&bu(l)}break e;case"textarea":Su(e,a.value,a.defaultValue);break e;case"select":t=a.value,t!=null&&pl(e,!!a.multiple,t,!1)}}}var $i=!1;function Eu(e,t,a){if($i)return e(t,a);$i=!0;try{var l=e(t);return l}finally{if($i=!1,(vl!==null||gl!==null)&&(Zs(),vl&&(t=vl,e=gl,gl=vl=null,Cu(t),e)))for(t=0;t<e.length;t++)Cu(e[t])}}function tn(e,t){var a=e.stateNode;if(a===null)return null;var l=a[dt]||null;if(l===null)return null;a=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(u(231,t,typeof a));return a}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(ea)try{var an={};Object.defineProperty(an,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",an,an),window.removeEventListener("test",an,an)}catch{Pi=!1}var ba=null,Yi=null,os=null;function Tu(){if(os)return os;var e,t=Yi,a=t.length,l,n="value"in ba?ba.value:ba.textContent,o=n.length;for(e=0;e<a&&t[e]===n[e];e++);var p=a-e;for(l=1;l<=p&&t[a-l]===n[o-l];l++);return os=n.slice(e,1<l?1-l:void 0)}function ds(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function Au(){return!1}function ft(e){function t(a,l,n,o,p){this._reactName=a,this._targetInst=n,this.type=l,this.nativeEvent=o,this.target=p,this.currentTarget=null;for(var y in e)e.hasOwnProperty(y)&&(a=e[y],this[y]=a?a(o):o[y]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?fs:Au,this.isPropagationStopped=Au,this}return b(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var Xa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ms=ft(Xa),ln=b({},Xa,{view:0,detail:0}),Jm=ft(ln),Xi,Vi,nn,ps=b({},ln,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nn&&(nn&&e.type==="mousemove"?(Xi=e.screenX-nn.screenX,Vi=e.screenY-nn.screenY):Vi=Xi=0,nn=e),Xi)},movementY:function(e){return"movementY"in e?e.movementY:Vi}}),Mu=ft(ps),Im=b({},ps,{dataTransfer:0}),Wm=ft(Im),Fm=b({},ln,{relatedTarget:0}),ki=ft(Fm),ep=b({},Xa,{animationName:0,elapsedTime:0,pseudoElement:0}),tp=ft(ep),ap=b({},Xa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lp=ft(ap),np=b({},Xa,{data:0}),Du=ft(np),sp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ip={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=cp[e])?!!t[e]:!1}function Qi(){return rp}var up=b({},ln,{key:function(e){if(e.key){var t=sp[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ip[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qi,charCode:function(e){return e.type==="keypress"?ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),op=ft(up),dp=b({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ru=ft(dp),fp=b({},ln,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qi}),mp=ft(fp),pp=b({},Xa,{propertyName:0,elapsedTime:0,pseudoElement:0}),hp=ft(pp),vp=b({},ps,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gp=ft(vp),yp=b({},Xa,{newState:0,oldState:0}),bp=ft(yp),xp=[9,13,27,32],Zi=ea&&"CompositionEvent"in window,sn=null;ea&&"documentMode"in document&&(sn=document.documentMode);var Sp=ea&&"TextEvent"in window&&!sn,zu=ea&&(!Zi||sn&&8<sn&&11>=sn),Hu=" ",Ou=!1;function qu(e,t){switch(e){case"keyup":return xp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yl=!1;function jp(e,t){switch(e){case"compositionend":return Bu(t);case"keypress":return t.which!==32?null:(Ou=!0,Hu);case"textInput":return e=t.data,e===Hu&&Ou?null:e;default:return null}}function _p(e,t){if(yl)return e==="compositionend"||!Zi&&qu(e,t)?(e=Tu(),os=Yi=ba=null,yl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zu&&t.locale!=="ko"?null:t.data;default:return null}}var Np={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Np[e.type]:t==="textarea"}function wu(e,t,a,l){vl?gl?gl.push(l):gl=[l]:vl=l,t=ei(t,"onChange"),0<t.length&&(a=new ms("onChange","change",null,a,l),e.push({event:a,listeners:t}))}var cn=null,rn=null;function Cp(e){xf(e,0)}function hs(e){var t=en(e);if(bu(t))return e}function Lu(e,t){if(e==="change")return t}var Gu=!1;if(ea){var Ki;if(ea){var Ji="oninput"in document;if(!Ji){var $u=document.createElement("div");$u.setAttribute("oninput","return;"),Ji=typeof $u.oninput=="function"}Ki=Ji}else Ki=!1;Gu=Ki&&(!document.documentMode||9<document.documentMode)}function Pu(){cn&&(cn.detachEvent("onpropertychange",Yu),rn=cn=null)}function Yu(e){if(e.propertyName==="value"&&hs(rn)){var t=[];wu(t,rn,e,Gi(e)),Eu(Cp,t)}}function Ep(e,t,a){e==="focusin"?(Pu(),cn=t,rn=a,cn.attachEvent("onpropertychange",Yu)):e==="focusout"&&Pu()}function Tp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hs(rn)}function Ap(e,t){if(e==="click")return hs(t)}function Mp(e,t){if(e==="input"||e==="change")return hs(t)}function Dp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var St=typeof Object.is=="function"?Object.is:Dp;function un(e,t){if(St(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var a=Object.keys(e),l=Object.keys(t);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var n=a[l];if(!ct.call(t,n)||!St(e[n],t[n]))return!1}return!0}function Xu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Vu(e,t){var a=Xu(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=t&&l>=t)return{node:a,offset:t-e};e=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Xu(a)}}function ku(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ku(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Qu(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=rs(e.document);t instanceof e.HTMLIFrameElement;){try{var a=typeof t.contentWindow.location.href=="string"}catch{a=!1}if(a)e=t.contentWindow;else break;t=rs(e.document)}return t}function Ii(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Rp=ea&&"documentMode"in document&&11>=document.documentMode,bl=null,Wi=null,on=null,Fi=!1;function Zu(e,t,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fi||bl==null||bl!==rs(l)||(l=bl,"selectionStart"in l&&Ii(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),on&&un(on,l)||(on=l,l=ei(Wi,"onSelect"),0<l.length&&(t=new ms("onSelect","select",null,t,a),e.push({event:t,listeners:l}),t.target=bl)))}function Va(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var xl={animationend:Va("Animation","AnimationEnd"),animationiteration:Va("Animation","AnimationIteration"),animationstart:Va("Animation","AnimationStart"),transitionrun:Va("Transition","TransitionRun"),transitionstart:Va("Transition","TransitionStart"),transitioncancel:Va("Transition","TransitionCancel"),transitionend:Va("Transition","TransitionEnd")},ec={},Ku={};ea&&(Ku=document.createElement("div").style,"AnimationEvent"in window||(delete xl.animationend.animation,delete xl.animationiteration.animation,delete xl.animationstart.animation),"TransitionEvent"in window||delete xl.transitionend.transition);function ka(e){if(ec[e])return ec[e];if(!xl[e])return e;var t=xl[e],a;for(a in t)if(t.hasOwnProperty(a)&&a in Ku)return ec[e]=t[a];return e}var Ju=ka("animationend"),Iu=ka("animationiteration"),Wu=ka("animationstart"),zp=ka("transitionrun"),Hp=ka("transitionstart"),Op=ka("transitioncancel"),Fu=ka("transitionend"),eo=new Map,tc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");tc.push("scrollEnd");function Lt(e,t){eo.set(e,t),Ya(t,[e])}var to=new WeakMap;function Dt(e,t){if(typeof e=="object"&&e!==null){var a=to.get(e);return a!==void 0?a:(t={value:e,source:t,stack:gu(t)},to.set(e,t),t)}return{value:e,source:t,stack:gu(t)}}var Rt=[],Sl=0,ac=0;function vs(){for(var e=Sl,t=ac=Sl=0;t<e;){var a=Rt[t];Rt[t++]=null;var l=Rt[t];Rt[t++]=null;var n=Rt[t];Rt[t++]=null;var o=Rt[t];if(Rt[t++]=null,l!==null&&n!==null){var p=l.pending;p===null?n.next=n:(n.next=p.next,p.next=n),l.pending=n}o!==0&&ao(a,n,o)}}function gs(e,t,a,l){Rt[Sl++]=e,Rt[Sl++]=t,Rt[Sl++]=a,Rt[Sl++]=l,ac|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function lc(e,t,a,l){return gs(e,t,a,l),ys(e)}function jl(e,t){return gs(e,null,null,t),ys(e)}function ao(e,t,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var n=!1,o=e.return;o!==null;)o.childLanes|=a,l=o.alternate,l!==null&&(l.childLanes|=a),o.tag===22&&(e=o.stateNode,e===null||e._visibility&1||(n=!0)),e=o,o=o.return;return e.tag===3?(o=e.stateNode,n&&t!==null&&(n=31-xt(a),e=o.hiddenUpdates,l=e[n],l===null?e[n]=[t]:l.push(t),t.lane=a|536870912),o):null}function ys(e){if(50<qn)throw qn=0,ur=null,Error(u(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var _l={};function qp(e,t,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,a,l){return new qp(e,t,a,l)}function nc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ta(e,t){var a=e.alternate;return a===null?(a=jt(e.tag,t,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function lo(e,t){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,t=a.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function bs(e,t,a,l,n,o){var p=0;if(l=e,typeof e=="function")nc(e)&&(p=1);else if(typeof e=="string")p=Uh(e,a,le.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case W:return e=jt(31,a,t,n),e.elementType=W,e.lanes=o,e;case _:return Qa(a.children,n,o,t);case N:p=8,n|=24;break;case R:return e=jt(12,a,t,n|2),e.elementType=R,e.lanes=o,e;case F:return e=jt(13,a,t,n),e.elementType=F,e.lanes=o,e;case ne:return e=jt(19,a,t,n),e.elementType=ne,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:case k:p=10;break e;case q:p=9;break e;case ce:p=11;break e;case I:p=14;break e;case J:p=16,l=null;break e}p=29,a=Error(u(130,e===null?"null":typeof e,"")),l=null}return t=jt(p,a,t,n),t.elementType=e,t.type=l,t.lanes=o,t}function Qa(e,t,a,l){return e=jt(7,e,l,t),e.lanes=a,e}function sc(e,t,a){return e=jt(6,e,null,t),e.lanes=a,e}function ic(e,t,a){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Nl=[],Cl=0,xs=null,Ss=0,zt=[],Ht=0,Za=null,aa=1,la="";function Ka(e,t){Nl[Cl++]=Ss,Nl[Cl++]=xs,xs=e,Ss=t}function no(e,t,a){zt[Ht++]=aa,zt[Ht++]=la,zt[Ht++]=Za,Za=e;var l=aa;e=la;var n=32-xt(l)-1;l&=~(1<<n),a+=1;var o=32-xt(t)+n;if(30<o){var p=n-n%5;o=(l&(1<<p)-1).toString(32),l>>=p,n-=p,aa=1<<32-xt(t)+n|a<<n|l,la=o+e}else aa=1<<o|a<<n|l,la=e}function cc(e){e.return!==null&&(Ka(e,1),no(e,1,0))}function rc(e){for(;e===xs;)xs=Nl[--Cl],Nl[Cl]=null,Ss=Nl[--Cl],Nl[Cl]=null;for(;e===Za;)Za=zt[--Ht],zt[Ht]=null,la=zt[--Ht],zt[Ht]=null,aa=zt[--Ht],zt[Ht]=null}var ut=null,Ue=null,Se=!1,Ja=null,Xt=!1,uc=Error(u(519));function Ia(e){var t=Error(u(418,""));throw mn(Dt(t,e)),uc}function so(e){var t=e.stateNode,a=e.type,l=e.memoizedProps;switch(t[nt]=e,t[dt]=l,a){case"dialog":ge("cancel",t),ge("close",t);break;case"iframe":case"object":case"embed":ge("load",t);break;case"video":case"audio":for(a=0;a<Un.length;a++)ge(Un[a],t);break;case"source":ge("error",t);break;case"img":case"image":case"link":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"input":ge("invalid",t),xu(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),cs(t);break;case"select":ge("invalid",t);break;case"textarea":ge("invalid",t),ju(t,l.value,l.defaultValue,l.children),cs(t)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||t.textContent===""+a||l.suppressHydrationWarning===!0||Nf(t.textContent,a)?(l.popover!=null&&(ge("beforetoggle",t),ge("toggle",t)),l.onScroll!=null&&ge("scroll",t),l.onScrollEnd!=null&&ge("scrollend",t),l.onClick!=null&&(t.onclick=ti),t=!0):t=!1,t||Ia(e)}function io(e){for(ut=e.return;ut;)switch(ut.tag){case 5:case 13:Xt=!1;return;case 27:case 3:Xt=!0;return;default:ut=ut.return}}function dn(e){if(e!==ut)return!1;if(!Se)return io(e),Se=!0,!1;var t=e.tag,a;if((a=t!==3&&t!==27)&&((a=t===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Cr(e.type,e.memoizedProps)),a=!a),a&&Ue&&Ia(e),io(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(u(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(t===0){Ue=$t(e.nextSibling);break e}t--}else a!=="$"&&a!=="$!"&&a!=="$?"||t++;e=e.nextSibling}Ue=null}}else t===27?(t=Ue,qa(e.type)?(e=Mr,Mr=null,Ue=e):Ue=t):Ue=ut?$t(e.stateNode.nextSibling):null;return!0}function fn(){Ue=ut=null,Se=!1}function co(){var e=Ja;return e!==null&&(ht===null?ht=e:ht.push.apply(ht,e),Ja=null),e}function mn(e){Ja===null?Ja=[e]:Ja.push(e)}var oc=$(null),Wa=null,na=null;function xa(e,t,a){Q(oc,t._currentValue),t._currentValue=a}function sa(e){e._currentValue=oc.current,Z(oc)}function dc(e,t,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===a)break;e=e.return}}function fc(e,t,a,l){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var o=n.dependencies;if(o!==null){var p=n.child;o=o.firstContext;e:for(;o!==null;){var y=o;o=n;for(var j=0;j<t.length;j++)if(y.context===t[j]){o.lanes|=a,y=o.alternate,y!==null&&(y.lanes|=a),dc(o.return,a,e),l||(p=null);break e}o=y.next}}else if(n.tag===18){if(p=n.return,p===null)throw Error(u(341));p.lanes|=a,o=p.alternate,o!==null&&(o.lanes|=a),dc(p,a,e),p=null}else p=n.child;if(p!==null)p.return=n;else for(p=n;p!==null;){if(p===e){p=null;break}if(n=p.sibling,n!==null){n.return=p.return,p=n;break}p=p.return}n=p}}function pn(e,t,a,l){e=null;for(var n=t,o=!1;n!==null;){if(!o){if((n.flags&524288)!==0)o=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var p=n.alternate;if(p===null)throw Error(u(387));if(p=p.memoizedProps,p!==null){var y=n.type;St(n.pendingProps.value,p.value)||(e!==null?e.push(y):e=[y])}}else if(n===et.current){if(p=n.alternate,p===null)throw Error(u(387));p.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(Yn):e=[Yn])}n=n.return}e!==null&&fc(t,e,a,l),t.flags|=262144}function js(e){for(e=e.firstContext;e!==null;){if(!St(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Fa(e){Wa=e,na=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function st(e){return ro(Wa,e)}function _s(e,t){return Wa===null&&Fa(e),ro(e,t)}function ro(e,t){var a=t._currentValue;if(t={context:t,memoizedValue:a,next:null},na===null){if(e===null)throw Error(u(308));na=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else na=na.next=t;return a}var Bp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(a){return a()})}},Up=r.unstable_scheduleCallback,wp=r.unstable_NormalPriority,ke={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mc(){return{controller:new Bp,data:new Map,refCount:0}}function hn(e){e.refCount--,e.refCount===0&&Up(wp,function(){e.controller.abort()})}var vn=null,pc=0,El=0,Tl=null;function Lp(e,t){if(vn===null){var a=vn=[];pc=0,El=vr(),Tl={status:"pending",value:void 0,then:function(l){a.push(l)}}}return pc++,t.then(uo,uo),t}function uo(){if(--pc===0&&vn!==null){Tl!==null&&(Tl.status="fulfilled");var e=vn;vn=null,El=0,Tl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Gp(e,t){var a=[],l={status:"pending",value:null,reason:null,then:function(n){a.push(n)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var n=0;n<a.length;n++)(0,a[n])(t)},function(n){for(l.status="rejected",l.reason=n,n=0;n<a.length;n++)(0,a[n])(void 0)}),l}var oo=E.S;E.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&Lp(e,t),oo!==null&&oo(e,t)};var el=$(null);function hc(){var e=el.current;return e!==null?e:Re.pooledCache}function Ns(e,t){t===null?Q(el,el.current):Q(el,t.pool)}function fo(){var e=hc();return e===null?null:{parent:ke._currentValue,pool:e}}var gn=Error(u(460)),mo=Error(u(474)),Cs=Error(u(542)),vc={then:function(){}};function po(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Es(){}function ho(e,t,a){switch(a=e[a],a===void 0?e.push(t):a!==t&&(t.then(Es,Es),t=a),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,go(e),e;default:if(typeof t.status=="string")t.then(Es,Es);else{if(e=Re,e!==null&&100<e.shellSuspendCounter)throw Error(u(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=l}},function(l){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,go(e),e}throw yn=t,gn}}var yn=null;function vo(){if(yn===null)throw Error(u(459));var e=yn;return yn=null,e}function go(e){if(e===gn||e===Cs)throw Error(u(483))}var Sa=!1;function gc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ja(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _a(e,t,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(je&2)!==0){var n=l.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),l.pending=t,t=ys(e),ao(e,null,a),t}return gs(e,l,t,a),ys(e)}function bn(e,t,a){if(t=t.updateQueue,t!==null&&(t=t.shared,(a&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,uu(e,a)}}function bc(e,t){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var n=null,o=null;if(a=a.firstBaseUpdate,a!==null){do{var p={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};o===null?n=o=p:o=o.next=p,a=a.next}while(a!==null);o===null?n=o=t:o=o.next=t}else n=o=t;a={baseState:l.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}var xc=!1;function xn(){if(xc){var e=Tl;if(e!==null)throw e}}function Sn(e,t,a,l){xc=!1;var n=e.updateQueue;Sa=!1;var o=n.firstBaseUpdate,p=n.lastBaseUpdate,y=n.shared.pending;if(y!==null){n.shared.pending=null;var j=y,H=j.next;j.next=null,p===null?o=H:p.next=H,p=j;var G=e.alternate;G!==null&&(G=G.updateQueue,y=G.lastBaseUpdate,y!==p&&(y===null?G.firstBaseUpdate=H:y.next=H,G.lastBaseUpdate=j))}if(o!==null){var Y=n.baseState;p=0,G=H=j=null,y=o;do{var O=y.lane&-536870913,B=O!==y.lane;if(B?(ye&O)===O:(l&O)===O){O!==0&&O===El&&(xc=!0),G!==null&&(G=G.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var de=e,re=y;O=t;var Te=a;switch(re.tag){case 1:if(de=re.payload,typeof de=="function"){Y=de.call(Te,Y,O);break e}Y=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=re.payload,O=typeof de=="function"?de.call(Te,Y,O):de,O==null)break e;Y=b({},Y,O);break e;case 2:Sa=!0}}O=y.callback,O!==null&&(e.flags|=64,B&&(e.flags|=8192),B=n.callbacks,B===null?n.callbacks=[O]:B.push(O))}else B={lane:O,tag:y.tag,payload:y.payload,callback:y.callback,next:null},G===null?(H=G=B,j=Y):G=G.next=B,p|=O;if(y=y.next,y===null){if(y=n.shared.pending,y===null)break;B=y,y=B.next,B.next=null,n.lastBaseUpdate=B,n.shared.pending=null}}while(!0);G===null&&(j=Y),n.baseState=j,n.firstBaseUpdate=H,n.lastBaseUpdate=G,o===null&&(n.shared.lanes=0),Ra|=p,e.lanes=p,e.memoizedState=Y}}function yo(e,t){if(typeof e!="function")throw Error(u(191,e));e.call(t)}function bo(e,t){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)yo(a[e],t)}var Al=$(null),Ts=$(0);function xo(e,t){e=fa,Q(Ts,e),Q(Al,t),fa=e|t.baseLanes}function Sc(){Q(Ts,fa),Q(Al,Al.current)}function jc(){fa=Ts.current,Z(Al),Z(Ts)}var Na=0,pe=null,Ce=null,Pe=null,As=!1,Ml=!1,tl=!1,Ms=0,jn=0,Dl=null,$p=0;function Le(){throw Error(u(321))}function _c(e,t){if(t===null)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!St(e[a],t[a]))return!1;return!0}function Nc(e,t,a,l,n,o){return Na=o,pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,E.H=e===null||e.memoizedState===null?ld:nd,tl=!1,o=a(l,n),tl=!1,Ml&&(o=jo(t,a,l,n)),So(e),o}function So(e){E.H=qs;var t=Ce!==null&&Ce.next!==null;if(Na=0,Pe=Ce=pe=null,As=!1,jn=0,Dl=null,t)throw Error(u(300));e===null||Je||(e=e.dependencies,e!==null&&js(e)&&(Je=!0))}function jo(e,t,a,l){pe=e;var n=0;do{if(Ml&&(Dl=null),jn=0,Ml=!1,25<=n)throw Error(u(301));if(n+=1,Pe=Ce=null,e.updateQueue!=null){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}E.H=Zp,o=t(a,l)}while(Ml);return o}function Pp(){var e=E.H,t=e.useState()[0];return t=typeof t.then=="function"?_n(t):t,e=e.useState()[0],(Ce!==null?Ce.memoizedState:null)!==e&&(pe.flags|=1024),t}function Cc(){var e=Ms!==0;return Ms=0,e}function Ec(e,t,a){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a}function Tc(e){if(As){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}As=!1}Na=0,Pe=Ce=pe=null,Ml=!1,jn=Ms=0,Dl=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?pe.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function Ye(){if(Ce===null){var e=pe.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Pe===null?pe.memoizedState:Pe.next;if(t!==null)Pe=t,Ce=e;else{if(e===null)throw pe.alternate===null?Error(u(467)):Error(u(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Pe===null?pe.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _n(e){var t=jn;return jn+=1,Dl===null&&(Dl=[]),e=ho(Dl,e,t),t=pe,(Pe===null?t.memoizedState:Pe.next)===null&&(t=t.alternate,E.H=t===null||t.memoizedState===null?ld:nd),e}function Ds(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _n(e);if(e.$$typeof===k)return st(e)}throw Error(u(438,String(e)))}function Mc(e){var t=null,a=pe.updateQueue;if(a!==null&&(t=a.memoCache),t==null){var l=pe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),a===null&&(a=Ac(),pe.updateQueue=a),a.memoCache=t,a=t.data[t.index],a===void 0)for(a=t.data[t.index]=Array(e),l=0;l<e;l++)a[l]=ae;return t.index++,a}function ia(e,t){return typeof t=="function"?t(e):t}function Rs(e){var t=Ye();return Dc(t,Ce,e)}function Dc(e,t,a){var l=e.queue;if(l===null)throw Error(u(311));l.lastRenderedReducer=a;var n=e.baseQueue,o=l.pending;if(o!==null){if(n!==null){var p=n.next;n.next=o.next,o.next=p}t.baseQueue=n=o,l.pending=null}if(o=e.baseState,n===null)e.memoizedState=o;else{t=n.next;var y=p=null,j=null,H=t,G=!1;do{var Y=H.lane&-536870913;if(Y!==H.lane?(ye&Y)===Y:(Na&Y)===Y){var O=H.revertLane;if(O===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Y===El&&(G=!0);else if((Na&O)===O){H=H.next,O===El&&(G=!0);continue}else Y={lane:0,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(y=j=Y,p=o):j=j.next=Y,pe.lanes|=O,Ra|=O;Y=H.action,tl&&a(o,Y),o=H.hasEagerState?H.eagerState:a(o,Y)}else O={lane:Y,revertLane:H.revertLane,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(y=j=O,p=o):j=j.next=O,pe.lanes|=Y,Ra|=Y;H=H.next}while(H!==null&&H!==t);if(j===null?p=o:j.next=y,!St(o,e.memoizedState)&&(Je=!0,G&&(a=Tl,a!==null)))throw a;e.memoizedState=o,e.baseState=p,e.baseQueue=j,l.lastRenderedState=o}return n===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function Rc(e){var t=Ye(),a=t.queue;if(a===null)throw Error(u(311));a.lastRenderedReducer=e;var l=a.dispatch,n=a.pending,o=t.memoizedState;if(n!==null){a.pending=null;var p=n=n.next;do o=e(o,p.action),p=p.next;while(p!==n);St(o,t.memoizedState)||(Je=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),a.lastRenderedState=o}return[o,l]}function _o(e,t,a){var l=pe,n=Ye(),o=Se;if(o){if(a===void 0)throw Error(u(407));a=a()}else a=t();var p=!St((Ce||n).memoizedState,a);p&&(n.memoizedState=a,Je=!0),n=n.queue;var y=Eo.bind(null,l,n,e);if(Nn(2048,8,y,[e]),n.getSnapshot!==t||p||Pe!==null&&Pe.memoizedState.tag&1){if(l.flags|=2048,Rl(9,zs(),Co.bind(null,l,n,a,t),null),Re===null)throw Error(u(349));o||(Na&124)!==0||No(l,t,a)}return a}function No(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},t=pe.updateQueue,t===null?(t=Ac(),pe.updateQueue=t,t.stores=[e]):(a=t.stores,a===null?t.stores=[e]:a.push(e))}function Co(e,t,a,l){t.value=a,t.getSnapshot=l,To(t)&&Ao(e)}function Eo(e,t,a){return a(function(){To(t)&&Ao(e)})}function To(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!St(e,a)}catch{return!0}}function Ao(e){var t=jl(e,2);t!==null&&Tt(t,e,2)}function zc(e){var t=mt();if(typeof e=="function"){var a=e;if(e=a(),tl){ga(!0);try{a()}finally{ga(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:e},t}function Mo(e,t,a,l){return e.baseState=a,Dc(e,Ce,typeof l=="function"?l:ia)}function Yp(e,t,a,l,n){if(Os(e))throw Error(u(485));if(e=t.action,e!==null){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){o.listeners.push(p)}};E.T!==null?a(!0):o.isTransition=!1,l(o),a=t.pending,a===null?(o.next=t.pending=o,Do(t,o)):(o.next=a.next,t.pending=a.next=o)}}function Do(e,t){var a=t.action,l=t.payload,n=e.state;if(t.isTransition){var o=E.T,p={};E.T=p;try{var y=a(n,l),j=E.S;j!==null&&j(p,y),Ro(e,t,y)}catch(H){Hc(e,t,H)}finally{E.T=o}}else try{o=a(n,l),Ro(e,t,o)}catch(H){Hc(e,t,H)}}function Ro(e,t,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){zo(e,t,l)},function(l){return Hc(e,t,l)}):zo(e,t,a)}function zo(e,t,a){t.status="fulfilled",t.value=a,Ho(t),e.state=a,t=e.pending,t!==null&&(a=t.next,a===t?e.pending=null:(a=a.next,t.next=a,Do(e,a)))}function Hc(e,t,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=a,Ho(t),t=t.next;while(t!==l)}e.action=null}function Ho(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Oo(e,t){return t}function qo(e,t){if(Se){var a=Re.formState;if(a!==null){e:{var l=pe;if(Se){if(Ue){t:{for(var n=Ue,o=Xt;n.nodeType!==8;){if(!o){n=null;break t}if(n=$t(n.nextSibling),n===null){n=null;break t}}o=n.data,n=o==="F!"||o==="F"?n:null}if(n){Ue=$t(n.nextSibling),l=n.data==="F!";break e}}Ia(l)}l=!1}l&&(t=a[0])}}return a=mt(),a.memoizedState=a.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Oo,lastRenderedState:t},a.queue=l,a=ed.bind(null,pe,l),l.dispatch=a,l=zc(!1),o=wc.bind(null,pe,!1,l.queue),l=mt(),n={state:t,dispatch:null,action:e,pending:null},l.queue=n,a=Yp.bind(null,pe,n,o,a),n.dispatch=a,l.memoizedState=e,[t,a,!1]}function Bo(e){var t=Ye();return Uo(t,Ce,e)}function Uo(e,t,a){if(t=Dc(e,t,Oo)[0],e=Rs(ia)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=_n(t)}catch(p){throw p===gn?Cs:p}else l=t;t=Ye();var n=t.queue,o=n.dispatch;return a!==t.memoizedState&&(pe.flags|=2048,Rl(9,zs(),Xp.bind(null,n,a),null)),[l,o,e]}function Xp(e,t){e.action=t}function wo(e){var t=Ye(),a=Ce;if(a!==null)return Uo(t,a,e);Ye(),t=t.memoizedState,a=Ye();var l=a.queue.dispatch;return a.memoizedState=e,[t,l,!1]}function Rl(e,t,a,l){return e={tag:e,create:a,deps:l,inst:t,next:null},t=pe.updateQueue,t===null&&(t=Ac(),pe.updateQueue=t),a=t.lastEffect,a===null?t.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,t.lastEffect=e),e}function zs(){return{destroy:void 0,resource:void 0}}function Lo(){return Ye().memoizedState}function Hs(e,t,a,l){var n=mt();l=l===void 0?null:l,pe.flags|=e,n.memoizedState=Rl(1|t,zs(),a,l)}function Nn(e,t,a,l){var n=Ye();l=l===void 0?null:l;var o=n.memoizedState.inst;Ce!==null&&l!==null&&_c(l,Ce.memoizedState.deps)?n.memoizedState=Rl(t,o,a,l):(pe.flags|=e,n.memoizedState=Rl(1|t,o,a,l))}function Go(e,t){Hs(8390656,8,e,t)}function $o(e,t){Nn(2048,8,e,t)}function Po(e,t){return Nn(4,2,e,t)}function Yo(e,t){return Nn(4,4,e,t)}function Xo(e,t){if(typeof t=="function"){e=e();var a=t(e);return function(){typeof a=="function"?a():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vo(e,t,a){a=a!=null?a.concat([e]):null,Nn(4,4,Xo.bind(null,t,e),a)}function Oc(){}function ko(e,t){var a=Ye();t=t===void 0?null:t;var l=a.memoizedState;return t!==null&&_c(t,l[1])?l[0]:(a.memoizedState=[e,t],e)}function Qo(e,t){var a=Ye();t=t===void 0?null:t;var l=a.memoizedState;if(t!==null&&_c(t,l[1]))return l[0];if(l=e(),tl){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[l,t],l}function qc(e,t,a){return a===void 0||(Na&1073741824)!==0?e.memoizedState=t:(e.memoizedState=a,e=Jd(),pe.lanes|=e,Ra|=e,a)}function Zo(e,t,a,l){return St(a,t)?a:Al.current!==null?(e=qc(e,a,l),St(e,t)||(Je=!0),e):(Na&42)===0?(Je=!0,e.memoizedState=a):(e=Jd(),pe.lanes|=e,Ra|=e,t)}function Ko(e,t,a,l,n){var o=L.p;L.p=o!==0&&8>o?o:8;var p=E.T,y={};E.T=y,wc(e,!1,t,a);try{var j=n(),H=E.S;if(H!==null&&H(y,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=Gp(j,l);Cn(e,t,G,Et(e))}else Cn(e,t,l,Et(e))}catch(Y){Cn(e,t,{then:function(){},status:"rejected",reason:Y},Et())}finally{L.p=o,E.T=p}}function Vp(){}function Bc(e,t,a,l){if(e.tag!==5)throw Error(u(476));var n=Jo(e).queue;Ko(e,n,t,V,a===null?Vp:function(){return Io(e),a(l)})}function Jo(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:V},next:null};var a={};return t.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ia,lastRenderedState:a},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Io(e){var t=Jo(e).next.queue;Cn(e,t,{},Et())}function Uc(){return st(Yn)}function Wo(){return Ye().memoizedState}function Fo(){return Ye().memoizedState}function kp(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var a=Et();e=ja(a);var l=_a(t,e,a);l!==null&&(Tt(l,t,a),bn(l,t,a)),t={cache:mc()},e.payload=t;return}t=t.return}}function Qp(e,t,a){var l=Et();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Os(e)?td(t,a):(a=lc(e,t,a,l),a!==null&&(Tt(a,e,l),ad(a,t,l)))}function ed(e,t,a){var l=Et();Cn(e,t,a,l)}function Cn(e,t,a,l){var n={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Os(e))td(t,n);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var p=t.lastRenderedState,y=o(p,a);if(n.hasEagerState=!0,n.eagerState=y,St(y,p))return gs(e,t,n,0),Re===null&&vs(),!1}catch{}finally{}if(a=lc(e,t,n,l),a!==null)return Tt(a,e,l),ad(a,t,l),!0}return!1}function wc(e,t,a,l){if(l={lane:2,revertLane:vr(),action:l,hasEagerState:!1,eagerState:null,next:null},Os(e)){if(t)throw Error(u(479))}else t=lc(e,a,l,2),t!==null&&Tt(t,e,2)}function Os(e){var t=e.alternate;return e===pe||t!==null&&t===pe}function td(e,t){Ml=As=!0;var a=e.pending;a===null?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function ad(e,t,a){if((a&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,a|=l,t.lanes=a,uu(e,a)}}var qs={readContext:st,use:Ds,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useLayoutEffect:Le,useInsertionEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useSyncExternalStore:Le,useId:Le,useHostTransitionStatus:Le,useFormState:Le,useActionState:Le,useOptimistic:Le,useMemoCache:Le,useCacheRefresh:Le},ld={readContext:st,use:Ds,useCallback:function(e,t){return mt().memoizedState=[e,t===void 0?null:t],e},useContext:st,useEffect:Go,useImperativeHandle:function(e,t,a){a=a!=null?a.concat([e]):null,Hs(4194308,4,Xo.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Hs(4194308,4,e,t)},useInsertionEffect:function(e,t){Hs(4,2,e,t)},useMemo:function(e,t){var a=mt();t=t===void 0?null:t;var l=e();if(tl){ga(!0);try{e()}finally{ga(!1)}}return a.memoizedState=[l,t],l},useReducer:function(e,t,a){var l=mt();if(a!==void 0){var n=a(t);if(tl){ga(!0);try{a(t)}finally{ga(!1)}}}else n=t;return l.memoizedState=l.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},l.queue=e,e=e.dispatch=Qp.bind(null,pe,e),[l.memoizedState,e]},useRef:function(e){var t=mt();return e={current:e},t.memoizedState=e},useState:function(e){e=zc(e);var t=e.queue,a=ed.bind(null,pe,t);return t.dispatch=a,[e.memoizedState,a]},useDebugValue:Oc,useDeferredValue:function(e,t){var a=mt();return qc(a,e,t)},useTransition:function(){var e=zc(!1);return e=Ko.bind(null,pe,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,a){var l=pe,n=mt();if(Se){if(a===void 0)throw Error(u(407));a=a()}else{if(a=t(),Re===null)throw Error(u(349));(ye&124)!==0||No(l,t,a)}n.memoizedState=a;var o={value:a,getSnapshot:t};return n.queue=o,Go(Eo.bind(null,l,o,e),[e]),l.flags|=2048,Rl(9,zs(),Co.bind(null,l,o,a,t),null),a},useId:function(){var e=mt(),t=Re.identifierPrefix;if(Se){var a=la,l=aa;a=(l&~(1<<32-xt(l)-1)).toString(32)+a,t=""+t+"R"+a,a=Ms++,0<a&&(t+="H"+a.toString(32)),t+=""}else a=$p++,t=""+t+"r"+a.toString(32)+"";return e.memoizedState=t},useHostTransitionStatus:Uc,useFormState:qo,useActionState:qo,useOptimistic:function(e){var t=mt();t.memoizedState=t.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=a,t=wc.bind(null,pe,!0,a),a.dispatch=t,[e,t]},useMemoCache:Mc,useCacheRefresh:function(){return mt().memoizedState=kp.bind(null,pe)}},nd={readContext:st,use:Ds,useCallback:ko,useContext:st,useEffect:$o,useImperativeHandle:Vo,useInsertionEffect:Po,useLayoutEffect:Yo,useMemo:Qo,useReducer:Rs,useRef:Lo,useState:function(){return Rs(ia)},useDebugValue:Oc,useDeferredValue:function(e,t){var a=Ye();return Zo(a,Ce.memoizedState,e,t)},useTransition:function(){var e=Rs(ia)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:_n(e),t]},useSyncExternalStore:_o,useId:Wo,useHostTransitionStatus:Uc,useFormState:Bo,useActionState:Bo,useOptimistic:function(e,t){var a=Ye();return Mo(a,Ce,e,t)},useMemoCache:Mc,useCacheRefresh:Fo},Zp={readContext:st,use:Ds,useCallback:ko,useContext:st,useEffect:$o,useImperativeHandle:Vo,useInsertionEffect:Po,useLayoutEffect:Yo,useMemo:Qo,useReducer:Rc,useRef:Lo,useState:function(){return Rc(ia)},useDebugValue:Oc,useDeferredValue:function(e,t){var a=Ye();return Ce===null?qc(a,e,t):Zo(a,Ce.memoizedState,e,t)},useTransition:function(){var e=Rc(ia)[0],t=Ye().memoizedState;return[typeof e=="boolean"?e:_n(e),t]},useSyncExternalStore:_o,useId:Wo,useHostTransitionStatus:Uc,useFormState:wo,useActionState:wo,useOptimistic:function(e,t){var a=Ye();return Ce!==null?Mo(a,Ce,e,t):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Mc,useCacheRefresh:Fo},zl=null,En=0;function Bs(e){var t=En;return En+=1,zl===null&&(zl=[]),ho(zl,e,t)}function Tn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Us(e,t){throw t.$$typeof===x?Error(u(525)):(e=Object.prototype.toString.call(t),Error(u(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function sd(e){var t=e._init;return t(e._payload)}function id(e){function t(D,C){if(e){var z=D.deletions;z===null?(D.deletions=[C],D.flags|=16):z.push(C)}}function a(D,C){if(!e)return null;for(;C!==null;)t(D,C),C=C.sibling;return null}function l(D){for(var C=new Map;D!==null;)D.key!==null?C.set(D.key,D):C.set(D.index,D),D=D.sibling;return C}function n(D,C){return D=ta(D,C),D.index=0,D.sibling=null,D}function o(D,C,z){return D.index=z,e?(z=D.alternate,z!==null?(z=z.index,z<C?(D.flags|=67108866,C):z):(D.flags|=67108866,C)):(D.flags|=1048576,C)}function p(D){return e&&D.alternate===null&&(D.flags|=67108866),D}function y(D,C,z,P){return C===null||C.tag!==6?(C=sc(z,D.mode,P),C.return=D,C):(C=n(C,z),C.return=D,C)}function j(D,C,z,P){var ee=z.type;return ee===_?G(D,C,z.props.children,P,z.key):C!==null&&(C.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===J&&sd(ee)===C.type)?(C=n(C,z.props),Tn(C,z),C.return=D,C):(C=bs(z.type,z.key,z.props,null,D.mode,P),Tn(C,z),C.return=D,C)}function H(D,C,z,P){return C===null||C.tag!==4||C.stateNode.containerInfo!==z.containerInfo||C.stateNode.implementation!==z.implementation?(C=ic(z,D.mode,P),C.return=D,C):(C=n(C,z.children||[]),C.return=D,C)}function G(D,C,z,P,ee){return C===null||C.tag!==7?(C=Qa(z,D.mode,P,ee),C.return=D,C):(C=n(C,z),C.return=D,C)}function Y(D,C,z){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=sc(""+C,D.mode,z),C.return=D,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case M:return z=bs(C.type,C.key,C.props,null,D.mode,z),Tn(z,C),z.return=D,z;case T:return C=ic(C,D.mode,z),C.return=D,C;case J:var P=C._init;return C=P(C._payload),Y(D,C,z)}if(w(C)||Ae(C))return C=Qa(C,D.mode,z,null),C.return=D,C;if(typeof C.then=="function")return Y(D,Bs(C),z);if(C.$$typeof===k)return Y(D,_s(D,C),z);Us(D,C)}return null}function O(D,C,z,P){var ee=C!==null?C.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ee!==null?null:y(D,C,""+z,P);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case M:return z.key===ee?j(D,C,z,P):null;case T:return z.key===ee?H(D,C,z,P):null;case J:return ee=z._init,z=ee(z._payload),O(D,C,z,P)}if(w(z)||Ae(z))return ee!==null?null:G(D,C,z,P,null);if(typeof z.then=="function")return O(D,C,Bs(z),P);if(z.$$typeof===k)return O(D,C,_s(D,z),P);Us(D,z)}return null}function B(D,C,z,P,ee){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return D=D.get(z)||null,y(C,D,""+P,ee);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case M:return D=D.get(P.key===null?z:P.key)||null,j(C,D,P,ee);case T:return D=D.get(P.key===null?z:P.key)||null,H(C,D,P,ee);case J:var he=P._init;return P=he(P._payload),B(D,C,z,P,ee)}if(w(P)||Ae(P))return D=D.get(z)||null,G(C,D,P,ee,null);if(typeof P.then=="function")return B(D,C,z,Bs(P),ee);if(P.$$typeof===k)return B(D,C,z,_s(C,P),ee);Us(C,P)}return null}function de(D,C,z,P){for(var ee=null,he=null,se=C,ue=C=0,We=null;se!==null&&ue<z.length;ue++){se.index>ue?(We=se,se=null):We=se.sibling;var be=O(D,se,z[ue],P);if(be===null){se===null&&(se=We);break}e&&se&&be.alternate===null&&t(D,se),C=o(be,C,ue),he===null?ee=be:he.sibling=be,he=be,se=We}if(ue===z.length)return a(D,se),Se&&Ka(D,ue),ee;if(se===null){for(;ue<z.length;ue++)se=Y(D,z[ue],P),se!==null&&(C=o(se,C,ue),he===null?ee=se:he.sibling=se,he=se);return Se&&Ka(D,ue),ee}for(se=l(se);ue<z.length;ue++)We=B(se,D,ue,z[ue],P),We!==null&&(e&&We.alternate!==null&&se.delete(We.key===null?ue:We.key),C=o(We,C,ue),he===null?ee=We:he.sibling=We,he=We);return e&&se.forEach(function(Ga){return t(D,Ga)}),Se&&Ka(D,ue),ee}function re(D,C,z,P){if(z==null)throw Error(u(151));for(var ee=null,he=null,se=C,ue=C=0,We=null,be=z.next();se!==null&&!be.done;ue++,be=z.next()){se.index>ue?(We=se,se=null):We=se.sibling;var Ga=O(D,se,be.value,P);if(Ga===null){se===null&&(se=We);break}e&&se&&Ga.alternate===null&&t(D,se),C=o(Ga,C,ue),he===null?ee=Ga:he.sibling=Ga,he=Ga,se=We}if(be.done)return a(D,se),Se&&Ka(D,ue),ee;if(se===null){for(;!be.done;ue++,be=z.next())be=Y(D,be.value,P),be!==null&&(C=o(be,C,ue),he===null?ee=be:he.sibling=be,he=be);return Se&&Ka(D,ue),ee}for(se=l(se);!be.done;ue++,be=z.next())be=B(se,D,ue,be.value,P),be!==null&&(e&&be.alternate!==null&&se.delete(be.key===null?ue:be.key),C=o(be,C,ue),he===null?ee=be:he.sibling=be,he=be);return e&&se.forEach(function(Kh){return t(D,Kh)}),Se&&Ka(D,ue),ee}function Te(D,C,z,P){if(typeof z=="object"&&z!==null&&z.type===_&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case M:e:{for(var ee=z.key;C!==null;){if(C.key===ee){if(ee=z.type,ee===_){if(C.tag===7){a(D,C.sibling),P=n(C,z.props.children),P.return=D,D=P;break e}}else if(C.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===J&&sd(ee)===C.type){a(D,C.sibling),P=n(C,z.props),Tn(P,z),P.return=D,D=P;break e}a(D,C);break}else t(D,C);C=C.sibling}z.type===_?(P=Qa(z.props.children,D.mode,P,z.key),P.return=D,D=P):(P=bs(z.type,z.key,z.props,null,D.mode,P),Tn(P,z),P.return=D,D=P)}return p(D);case T:e:{for(ee=z.key;C!==null;){if(C.key===ee)if(C.tag===4&&C.stateNode.containerInfo===z.containerInfo&&C.stateNode.implementation===z.implementation){a(D,C.sibling),P=n(C,z.children||[]),P.return=D,D=P;break e}else{a(D,C);break}else t(D,C);C=C.sibling}P=ic(z,D.mode,P),P.return=D,D=P}return p(D);case J:return ee=z._init,z=ee(z._payload),Te(D,C,z,P)}if(w(z))return de(D,C,z,P);if(Ae(z)){if(ee=Ae(z),typeof ee!="function")throw Error(u(150));return z=ee.call(z),re(D,C,z,P)}if(typeof z.then=="function")return Te(D,C,Bs(z),P);if(z.$$typeof===k)return Te(D,C,_s(D,z),P);Us(D,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,C!==null&&C.tag===6?(a(D,C.sibling),P=n(C,z),P.return=D,D=P):(a(D,C),P=sc(z,D.mode,P),P.return=D,D=P),p(D)):a(D,C)}return function(D,C,z,P){try{En=0;var ee=Te(D,C,z,P);return zl=null,ee}catch(se){if(se===gn||se===Cs)throw se;var he=jt(29,se,null,D.mode);return he.lanes=P,he.return=D,he}finally{}}}var Hl=id(!0),cd=id(!1),Ot=$(null),Vt=null;function Ca(e){var t=e.alternate;Q(Qe,Qe.current&1),Q(Ot,e),Vt===null&&(t===null||Al.current!==null||t.memoizedState!==null)&&(Vt=e)}function rd(e){if(e.tag===22){if(Q(Qe,Qe.current),Q(Ot,e),Vt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vt=e)}}else Ea()}function Ea(){Q(Qe,Qe.current),Q(Ot,Ot.current)}function ca(e){Z(Ot),Vt===e&&(Vt=null),Z(Qe)}var Qe=$(0);function ws(e){for(var t=e;t!==null;){if(t.tag===13){var a=t.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Ar(a)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Lc(e,t,a,l){t=e.memoizedState,a=a(l,t),a=a==null?t:b({},t,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Gc={enqueueSetState:function(e,t,a){e=e._reactInternals;var l=Et(),n=ja(l);n.payload=t,a!=null&&(n.callback=a),t=_a(e,n,l),t!==null&&(Tt(t,e,l),bn(t,e,l))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var l=Et(),n=ja(l);n.tag=1,n.payload=t,a!=null&&(n.callback=a),t=_a(e,n,l),t!==null&&(Tt(t,e,l),bn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=Et(),l=ja(a);l.tag=2,t!=null&&(l.callback=t),t=_a(e,l,a),t!==null&&(Tt(t,e,a),bn(t,e,a))}};function ud(e,t,a,l,n,o,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,o,p):t.prototype&&t.prototype.isPureReactComponent?!un(a,l)||!un(n,o):!0}function od(e,t,a,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(a,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(a,l),t.state!==e&&Gc.enqueueReplaceState(t,t.state,null)}function al(e,t){var a=t;if("ref"in t){a={};for(var l in t)l!=="ref"&&(a[l]=t[l])}if(e=e.defaultProps){a===t&&(a=b({},a));for(var n in e)a[n]===void 0&&(a[n]=e[n])}return a}var Ls=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function dd(e){Ls(e)}function fd(e){console.error(e)}function md(e){Ls(e)}function Gs(e,t){try{var a=e.onUncaughtError;a(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function pd(e,t,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function $c(e,t,a){return a=ja(a),a.tag=3,a.payload={element:null},a.callback=function(){Gs(e,t)},a}function hd(e){return e=ja(e),e.tag=3,e}function vd(e,t,a,l){var n=a.type.getDerivedStateFromError;if(typeof n=="function"){var o=l.value;e.payload=function(){return n(o)},e.callback=function(){pd(t,a,l)}}var p=a.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){pd(t,a,l),typeof n!="function"&&(za===null?za=new Set([this]):za.add(this));var y=l.stack;this.componentDidCatch(l.value,{componentStack:y!==null?y:""})})}function Kp(e,t,a,l,n){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=a.alternate,t!==null&&pn(t,a,n,!0),a=Ot.current,a!==null){switch(a.tag){case 13:return Vt===null?dr():a.alternate===null&&we===0&&(we=3),a.flags&=-257,a.flags|=65536,a.lanes=n,l===vc?a.flags|=16384:(t=a.updateQueue,t===null?a.updateQueue=new Set([l]):t.add(l),mr(e,l,n)),!1;case 22:return a.flags|=65536,l===vc?a.flags|=16384:(t=a.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=t):(a=t.retryQueue,a===null?t.retryQueue=new Set([l]):a.add(l)),mr(e,l,n)),!1}throw Error(u(435,a.tag))}return mr(e,l,n),dr(),!1}if(Se)return t=Ot.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,l!==uc&&(e=Error(u(422),{cause:l}),mn(Dt(e,a)))):(l!==uc&&(t=Error(u(423),{cause:l}),mn(Dt(t,a))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,l=Dt(l,a),n=$c(e.stateNode,l,n),bc(e,n),we!==4&&(we=2)),!1;var o=Error(u(520),{cause:l});if(o=Dt(o,a),On===null?On=[o]:On.push(o),we!==4&&(we=2),t===null)return!0;l=Dt(l,a),a=t;do{switch(a.tag){case 3:return a.flags|=65536,e=n&-n,a.lanes|=e,e=$c(a.stateNode,l,e),bc(a,e),!1;case 1:if(t=a.type,o=a.stateNode,(a.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(za===null||!za.has(o))))return a.flags|=65536,n&=-n,a.lanes|=n,n=hd(n),vd(n,e,a,l),bc(a,n),!1}a=a.return}while(a!==null);return!1}var gd=Error(u(461)),Je=!1;function tt(e,t,a,l){t.child=e===null?cd(t,null,a,l):Hl(t,e.child,a,l)}function yd(e,t,a,l,n){a=a.render;var o=t.ref;if("ref"in l){var p={};for(var y in l)y!=="ref"&&(p[y]=l[y])}else p=l;return Fa(t),l=Nc(e,t,a,p,o,n),y=Cc(),e!==null&&!Je?(Ec(e,t,n),ra(e,t,n)):(Se&&y&&cc(t),t.flags|=1,tt(e,t,l,n),t.child)}function bd(e,t,a,l,n){if(e===null){var o=a.type;return typeof o=="function"&&!nc(o)&&o.defaultProps===void 0&&a.compare===null?(t.tag=15,t.type=o,xd(e,t,o,l,n)):(e=bs(a.type,null,l,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!Kc(e,n)){var p=o.memoizedProps;if(a=a.compare,a=a!==null?a:un,a(p,l)&&e.ref===t.ref)return ra(e,t,n)}return t.flags|=1,e=ta(o,l),e.ref=t.ref,e.return=t,t.child=e}function xd(e,t,a,l,n){if(e!==null){var o=e.memoizedProps;if(un(o,l)&&e.ref===t.ref)if(Je=!1,t.pendingProps=l=o,Kc(e,n))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,ra(e,t,n)}return Pc(e,t,a,l,n)}function Sd(e,t,a){var l=t.pendingProps,n=l.children,o=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((t.flags&128)!==0){if(l=o!==null?o.baseLanes|a:a,e!==null){for(n=t.child=e.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~l}else t.childLanes=0,t.child=null;return jd(e,t,l,a)}if((a&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Ns(t,o!==null?o.cachePool:null),o!==null?xo(t,o):Sc(),rd(t);else return t.lanes=t.childLanes=536870912,jd(e,t,o!==null?o.baseLanes|a:a,a)}else o!==null?(Ns(t,o.cachePool),xo(t,o),Ea(),t.memoizedState=null):(e!==null&&Ns(t,null),Sc(),Ea());return tt(e,t,n,a),t.child}function jd(e,t,a,l){var n=hc();return n=n===null?null:{parent:ke._currentValue,pool:n},t.memoizedState={baseLanes:a,cachePool:n},e!==null&&Ns(t,null),Sc(),rd(t),e!==null&&pn(e,t,l,!0),null}function $s(e,t){var a=t.ref;if(a===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(u(284));(e===null||e.ref!==a)&&(t.flags|=4194816)}}function Pc(e,t,a,l,n){return Fa(t),a=Nc(e,t,a,l,void 0,n),l=Cc(),e!==null&&!Je?(Ec(e,t,n),ra(e,t,n)):(Se&&l&&cc(t),t.flags|=1,tt(e,t,a,n),t.child)}function _d(e,t,a,l,n,o){return Fa(t),t.updateQueue=null,a=jo(t,l,a,n),So(e),l=Cc(),e!==null&&!Je?(Ec(e,t,o),ra(e,t,o)):(Se&&l&&cc(t),t.flags|=1,tt(e,t,a,o),t.child)}function Nd(e,t,a,l,n){if(Fa(t),t.stateNode===null){var o=_l,p=a.contextType;typeof p=="object"&&p!==null&&(o=st(p)),o=new a(l,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Gc,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=l,o.state=t.memoizedState,o.refs={},gc(t),p=a.contextType,o.context=typeof p=="object"&&p!==null?st(p):_l,o.state=t.memoizedState,p=a.getDerivedStateFromProps,typeof p=="function"&&(Lc(t,a,p,l),o.state=t.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(p=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),p!==o.state&&Gc.enqueueReplaceState(o,o.state,null),Sn(t,l,o,n),xn(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){o=t.stateNode;var y=t.memoizedProps,j=al(a,y);o.props=j;var H=o.context,G=a.contextType;p=_l,typeof G=="object"&&G!==null&&(p=st(G));var Y=a.getDerivedStateFromProps;G=typeof Y=="function"||typeof o.getSnapshotBeforeUpdate=="function",y=t.pendingProps!==y,G||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(y||H!==p)&&od(t,o,l,p),Sa=!1;var O=t.memoizedState;o.state=O,Sn(t,l,o,n),xn(),H=t.memoizedState,y||O!==H||Sa?(typeof Y=="function"&&(Lc(t,a,Y,l),H=t.memoizedState),(j=Sa||ud(t,a,j,l,O,H,p))?(G||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=H),o.props=l,o.state=H,o.context=p,l=j):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{o=t.stateNode,yc(e,t),p=t.memoizedProps,G=al(a,p),o.props=G,Y=t.pendingProps,O=o.context,H=a.contextType,j=_l,typeof H=="object"&&H!==null&&(j=st(H)),y=a.getDerivedStateFromProps,(H=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(p!==Y||O!==j)&&od(t,o,l,j),Sa=!1,O=t.memoizedState,o.state=O,Sn(t,l,o,n),xn();var B=t.memoizedState;p!==Y||O!==B||Sa||e!==null&&e.dependencies!==null&&js(e.dependencies)?(typeof y=="function"&&(Lc(t,a,y,l),B=t.memoizedState),(G=Sa||ud(t,a,G,l,O,B,j)||e!==null&&e.dependencies!==null&&js(e.dependencies))?(H||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(l,B,j),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(l,B,j)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=B),o.props=l,o.state=B,o.context=j,l=G):(typeof o.componentDidUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&O===e.memoizedState||(t.flags|=1024),l=!1)}return o=l,$s(e,t),l=(t.flags&128)!==0,o||l?(o=t.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,e!==null&&l?(t.child=Hl(t,e.child,null,n),t.child=Hl(t,null,a,n)):tt(e,t,a,n),t.memoizedState=o.state,e=t.child):e=ra(e,t,n),e}function Cd(e,t,a,l){return fn(),t.flags|=256,tt(e,t,a,l),t.child}var Yc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xc(e){return{baseLanes:e,cachePool:fo()}}function Vc(e,t,a){return e=e!==null?e.childLanes&~a:0,t&&(e|=qt),e}function Ed(e,t,a){var l=t.pendingProps,n=!1,o=(t.flags&128)!==0,p;if((p=o)||(p=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),p&&(n=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Se){if(n?Ca(t):Ea(),Se){var y=Ue,j;if(j=y){e:{for(j=y,y=Xt;j.nodeType!==8;){if(!y){y=null;break e}if(j=$t(j.nextSibling),j===null){y=null;break e}}y=j}y!==null?(t.memoizedState={dehydrated:y,treeContext:Za!==null?{id:aa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},j=jt(18,null,null,0),j.stateNode=y,j.return=t,t.child=j,ut=t,Ue=null,j=!0):j=!1}j||Ia(t)}if(y=t.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return Ar(y)?t.lanes=32:t.lanes=536870912,null;ca(t)}return y=l.children,l=l.fallback,n?(Ea(),n=t.mode,y=Ps({mode:"hidden",children:y},n),l=Qa(l,n,a,null),y.return=t,l.return=t,y.sibling=l,t.child=y,n=t.child,n.memoizedState=Xc(a),n.childLanes=Vc(e,p,a),t.memoizedState=Yc,l):(Ca(t),kc(t,y))}if(j=e.memoizedState,j!==null&&(y=j.dehydrated,y!==null)){if(o)t.flags&256?(Ca(t),t.flags&=-257,t=Qc(e,t,a)):t.memoizedState!==null?(Ea(),t.child=e.child,t.flags|=128,t=null):(Ea(),n=l.fallback,y=t.mode,l=Ps({mode:"visible",children:l.children},y),n=Qa(n,y,a,null),n.flags|=2,l.return=t,n.return=t,l.sibling=n,t.child=l,Hl(t,e.child,null,a),l=t.child,l.memoizedState=Xc(a),l.childLanes=Vc(e,p,a),t.memoizedState=Yc,t=n);else if(Ca(t),Ar(y)){if(p=y.nextSibling&&y.nextSibling.dataset,p)var H=p.dgst;p=H,l=Error(u(419)),l.stack="",l.digest=p,mn({value:l,source:null,stack:null}),t=Qc(e,t,a)}else if(Je||pn(e,t,a,!1),p=(a&e.childLanes)!==0,Je||p){if(p=Re,p!==null&&(l=a&-a,l=(l&42)!==0?1:Mi(l),l=(l&(p.suspendedLanes|a))!==0?0:l,l!==0&&l!==j.retryLane))throw j.retryLane=l,jl(e,l),Tt(p,e,l),gd;y.data==="$?"||dr(),t=Qc(e,t,a)}else y.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=j.treeContext,Ue=$t(y.nextSibling),ut=t,Se=!0,Ja=null,Xt=!1,e!==null&&(zt[Ht++]=aa,zt[Ht++]=la,zt[Ht++]=Za,aa=e.id,la=e.overflow,Za=t),t=kc(t,l.children),t.flags|=4096);return t}return n?(Ea(),n=l.fallback,y=t.mode,j=e.child,H=j.sibling,l=ta(j,{mode:"hidden",children:l.children}),l.subtreeFlags=j.subtreeFlags&65011712,H!==null?n=ta(H,n):(n=Qa(n,y,a,null),n.flags|=2),n.return=t,l.return=t,l.sibling=n,t.child=l,l=n,n=t.child,y=e.child.memoizedState,y===null?y=Xc(a):(j=y.cachePool,j!==null?(H=ke._currentValue,j=j.parent!==H?{parent:H,pool:H}:j):j=fo(),y={baseLanes:y.baseLanes|a,cachePool:j}),n.memoizedState=y,n.childLanes=Vc(e,p,a),t.memoizedState=Yc,l):(Ca(t),a=e.child,e=a.sibling,a=ta(a,{mode:"visible",children:l.children}),a.return=t,a.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=a,t.memoizedState=null,a)}function kc(e,t){return t=Ps({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ps(e,t){return e=jt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Qc(e,t,a){return Hl(t,e.child,null,a),e=kc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Td(e,t,a){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),dc(e.return,t,a)}function Zc(e,t,a,l,n){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=l,o.tail=a,o.tailMode=n)}function Ad(e,t,a){var l=t.pendingProps,n=l.revealOrder,o=l.tail;if(tt(e,t,l.children,a),l=Qe.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Td(e,a,t);else if(e.tag===19)Td(e,a,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(Q(Qe,l),n){case"forwards":for(a=t.child,n=null;a!==null;)e=a.alternate,e!==null&&ws(e)===null&&(n=a),a=a.sibling;a=n,a===null?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),Zc(t,!1,n,a,o);break;case"backwards":for(a=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&ws(e)===null){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}Zc(t,!0,a,null,o);break;case"together":Zc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ra(e,t,a){if(e!==null&&(t.dependencies=e.dependencies),Ra|=t.lanes,(a&t.childLanes)===0)if(e!==null){if(pn(e,t,a,!1),(a&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(u(153));if(t.child!==null){for(e=t.child,a=ta(e,e.pendingProps),t.child=a,a.return=t;e.sibling!==null;)e=e.sibling,a=a.sibling=ta(e,e.pendingProps),a.return=t;a.sibling=null}return t.child}function Kc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&js(e)))}function Jp(e,t,a){switch(t.tag){case 3:De(t,t.stateNode.containerInfo),xa(t,ke,e.memoizedState.cache),fn();break;case 27:case 5:Kl(t);break;case 4:De(t,t.stateNode.containerInfo);break;case 10:xa(t,t.type,t.memoizedProps.value);break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ca(t),t.flags|=128,null):(a&t.child.childLanes)!==0?Ed(e,t,a):(Ca(t),e=ra(e,t,a),e!==null?e.sibling:null);Ca(t);break;case 19:var n=(e.flags&128)!==0;if(l=(a&t.childLanes)!==0,l||(pn(e,t,a,!1),l=(a&t.childLanes)!==0),n){if(l)return Ad(e,t,a);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Q(Qe,Qe.current),l)break;return null;case 22:case 23:return t.lanes=0,Sd(e,t,a);case 24:xa(t,ke,e.memoizedState.cache)}return ra(e,t,a)}function Md(e,t,a){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Kc(e,a)&&(t.flags&128)===0)return Je=!1,Jp(e,t,a);Je=(e.flags&131072)!==0}else Je=!1,Se&&(t.flags&1048576)!==0&&no(t,Ss,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var l=t.elementType,n=l._init;if(l=n(l._payload),t.type=l,typeof l=="function")nc(l)?(e=al(l,e),t.tag=1,t=Nd(null,t,l,e,a)):(t.tag=0,t=Pc(null,t,l,e,a));else{if(l!=null){if(n=l.$$typeof,n===ce){t.tag=11,t=yd(null,t,l,e,a);break e}else if(n===I){t.tag=14,t=bd(null,t,l,e,a);break e}}throw t=X(l)||l,Error(u(306,t,""))}}return t;case 0:return Pc(e,t,t.type,t.pendingProps,a);case 1:return l=t.type,n=al(l,t.pendingProps),Nd(e,t,l,n,a);case 3:e:{if(De(t,t.stateNode.containerInfo),e===null)throw Error(u(387));l=t.pendingProps;var o=t.memoizedState;n=o.element,yc(e,t),Sn(t,l,null,a);var p=t.memoizedState;if(l=p.cache,xa(t,ke,l),l!==o.cache&&fc(t,[ke],a,!0),xn(),l=p.element,o.isDehydrated)if(o={element:l,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=Cd(e,t,l,a);break e}else if(l!==n){n=Dt(Error(u(424)),t),mn(n),t=Cd(e,t,l,a);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ue=$t(e.firstChild),ut=t,Se=!0,Ja=null,Xt=!0,a=cd(t,null,l,a),t.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(fn(),l===n){t=ra(e,t,a);break e}tt(e,t,l,a)}t=t.child}return t;case 26:return $s(e,t),e===null?(a=Of(t.type,null,t.pendingProps,null))?t.memoizedState=a:Se||(a=t.type,e=t.pendingProps,l=ai(oe.current).createElement(a),l[nt]=t,l[dt]=e,lt(l,a,e),Ke(l),t.stateNode=l):t.memoizedState=Of(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Kl(t),e===null&&Se&&(l=t.stateNode=Rf(t.type,t.pendingProps,oe.current),ut=t,Xt=!0,n=Ue,qa(t.type)?(Mr=n,Ue=$t(l.firstChild)):Ue=n),tt(e,t,t.pendingProps.children,a),$s(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Se&&((n=l=Ue)&&(l=Nh(l,t.type,t.pendingProps,Xt),l!==null?(t.stateNode=l,ut=t,Ue=$t(l.firstChild),Xt=!1,n=!0):n=!1),n||Ia(t)),Kl(t),n=t.type,o=t.pendingProps,p=e!==null?e.memoizedProps:null,l=o.children,Cr(n,o)?l=null:p!==null&&Cr(n,p)&&(t.flags|=32),t.memoizedState!==null&&(n=Nc(e,t,Pp,null,null,a),Yn._currentValue=n),$s(e,t),tt(e,t,l,a),t.child;case 6:return e===null&&Se&&((e=a=Ue)&&(a=Ch(a,t.pendingProps,Xt),a!==null?(t.stateNode=a,ut=t,Ue=null,e=!0):e=!1),e||Ia(t)),null;case 13:return Ed(e,t,a);case 4:return De(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=Hl(t,null,l,a):tt(e,t,l,a),t.child;case 11:return yd(e,t,t.type,t.pendingProps,a);case 7:return tt(e,t,t.pendingProps,a),t.child;case 8:return tt(e,t,t.pendingProps.children,a),t.child;case 12:return tt(e,t,t.pendingProps.children,a),t.child;case 10:return l=t.pendingProps,xa(t,t.type,l.value),tt(e,t,l.children,a),t.child;case 9:return n=t.type._context,l=t.pendingProps.children,Fa(t),n=st(n),l=l(n),t.flags|=1,tt(e,t,l,a),t.child;case 14:return bd(e,t,t.type,t.pendingProps,a);case 15:return xd(e,t,t.type,t.pendingProps,a);case 19:return Ad(e,t,a);case 31:return l=t.pendingProps,a=t.mode,l={mode:l.mode,children:l.children},e===null?(a=Ps(l,a),a.ref=t.ref,t.child=a,a.return=t,t=a):(a=ta(e.child,l),a.ref=t.ref,t.child=a,a.return=t,t=a),t;case 22:return Sd(e,t,a);case 24:return Fa(t),l=st(ke),e===null?(n=hc(),n===null&&(n=Re,o=mc(),n.pooledCache=o,o.refCount++,o!==null&&(n.pooledCacheLanes|=a),n=o),t.memoizedState={parent:l,cache:n},gc(t),xa(t,ke,n)):((e.lanes&a)!==0&&(yc(e,t),Sn(t,null,null,a),xn()),n=e.memoizedState,o=t.memoizedState,n.parent!==l?(n={parent:l,cache:l},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),xa(t,ke,l)):(l=o.cache,xa(t,ke,l),l!==n.cache&&fc(t,[ke],a,!0))),tt(e,t,t.pendingProps.children,a),t.child;case 29:throw t.pendingProps}throw Error(u(156,t.tag))}function ua(e){e.flags|=4}function Dd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Lf(t)){if(t=Ot.current,t!==null&&((ye&4194048)===ye?Vt!==null:(ye&62914560)!==ye&&(ye&536870912)===0||t!==Vt))throw yn=vc,mo;e.flags|=8192}}function Ys(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?cu():536870912,e.lanes|=t,Ul|=t)}function An(e,t){if(!Se)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;t!==null;)t.alternate!==null&&(a=t),t=t.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function qe(e){var t=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(t)for(var n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags&65011712,l|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)a|=n.lanes|n.childLanes,l|=n.subtreeFlags,l|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=l,e.childLanes=a,t}function Ip(e,t,a){var l=t.pendingProps;switch(rc(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(t),null;case 1:return qe(t),null;case 3:return a=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),sa(ke),Pt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(dn(t)?ua(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,co())),qe(t),null;case 26:return a=t.memoizedState,e===null?(ua(t),a!==null?(qe(t),Dd(t,a)):(qe(t),t.flags&=-16777217)):a?a!==e.memoizedState?(ua(t),qe(t),Dd(t,a)):(qe(t),t.flags&=-16777217):(e.memoizedProps!==l&&ua(t),qe(t),t.flags&=-16777217),null;case 27:Ve(t),a=oe.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ua(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return qe(t),null}e=le.current,dn(t)?so(t):(e=Rf(n,l,a),t.stateNode=e,ua(t))}return qe(t),null;case 5:if(Ve(t),a=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&ua(t);else{if(!l){if(t.stateNode===null)throw Error(u(166));return qe(t),null}if(e=le.current,dn(t))so(t);else{switch(n=ai(oe.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?n.createElement("select",{is:l.is}):n.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?n.createElement(a,{is:l.is}):n.createElement(a)}}e[nt]=t,e[dt]=l;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(lt(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&ua(t)}}return qe(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&ua(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(u(166));if(e=oe.current,dn(t)){if(e=t.stateNode,a=t.memoizedProps,l=null,n=ut,n!==null)switch(n.tag){case 27:case 5:l=n.memoizedProps}e[nt]=t,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Nf(e.nodeValue,a)),e||Ia(t)}else e=ai(e).createTextNode(l),e[nt]=t,t.stateNode=e}return qe(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=dn(t),l!==null&&l.dehydrated!==null){if(e===null){if(!n)throw Error(u(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(u(317));n[nt]=t}else fn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;qe(t),n=!1}else n=co(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(ca(t),t):(ca(t),null)}if(ca(t),(t.flags&128)!==0)return t.lanes=a,t;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=t.child,n=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(n=l.alternate.memoizedState.cachePool.pool);var o=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(o=l.memoizedState.cachePool.pool),o!==n&&(l.flags|=2048)}return a!==e&&a&&(t.child.flags|=8192),Ys(t,t.updateQueue),qe(t),null;case 4:return Pt(),e===null&&xr(t.stateNode.containerInfo),qe(t),null;case 10:return sa(t.type),qe(t),null;case 19:if(Z(Qe),n=t.memoizedState,n===null)return qe(t),null;if(l=(t.flags&128)!==0,o=n.rendering,o===null)if(l)An(n,!1);else{if(we!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=ws(e),o!==null){for(t.flags|=128,An(n,!1),e=o.updateQueue,t.updateQueue=e,Ys(t,e),t.subtreeFlags=0,e=a,a=t.child;a!==null;)lo(a,e),a=a.sibling;return Q(Qe,Qe.current&1|2),t.child}e=e.sibling}n.tail!==null&&Yt()>ks&&(t.flags|=128,l=!0,An(n,!1),t.lanes=4194304)}else{if(!l)if(e=ws(o),e!==null){if(t.flags|=128,l=!0,e=e.updateQueue,t.updateQueue=e,Ys(t,e),An(n,!0),n.tail===null&&n.tailMode==="hidden"&&!o.alternate&&!Se)return qe(t),null}else 2*Yt()-n.renderingStartTime>ks&&a!==536870912&&(t.flags|=128,l=!0,An(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(e=n.last,e!==null?e.sibling=o:t.child=o,n.last=o)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Yt(),t.sibling=null,e=Qe.current,Q(Qe,l?e&1|2:e&1),t):(qe(t),null);case 22:case 23:return ca(t),jc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(a&536870912)!==0&&(t.flags&128)===0&&(qe(t),t.subtreeFlags&6&&(t.flags|=8192)):qe(t),a=t.updateQueue,a!==null&&Ys(t,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==a&&(t.flags|=2048),e!==null&&Z(el),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),sa(ke),qe(t),null;case 25:return null;case 30:return null}throw Error(u(156,t.tag))}function Wp(e,t){switch(rc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sa(ke),Pt(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ve(t),null;case 13:if(ca(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(u(340));fn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Z(Qe),null;case 4:return Pt(),null;case 10:return sa(t.type),null;case 22:case 23:return ca(t),jc(),e!==null&&Z(el),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return sa(ke),null;case 25:return null;default:return null}}function Rd(e,t){switch(rc(t),t.tag){case 3:sa(ke),Pt();break;case 26:case 27:case 5:Ve(t);break;case 4:Pt();break;case 13:ca(t);break;case 19:Z(Qe);break;case 10:sa(t.type);break;case 22:case 23:ca(t),jc(),e!==null&&Z(el);break;case 24:sa(ke)}}function Mn(e,t){try{var a=t.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var n=l.next;a=n;do{if((a.tag&e)===e){l=void 0;var o=a.create,p=a.inst;l=o(),p.destroy=l}a=a.next}while(a!==n)}}catch(y){Me(t,t.return,y)}}function Ta(e,t,a){try{var l=t.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var o=n.next;l=o;do{if((l.tag&e)===e){var p=l.inst,y=p.destroy;if(y!==void 0){p.destroy=void 0,n=t;var j=a,H=y;try{H()}catch(G){Me(n,j,G)}}}l=l.next}while(l!==o)}}catch(G){Me(t,t.return,G)}}function zd(e){var t=e.updateQueue;if(t!==null){var a=e.stateNode;try{bo(t,a)}catch(l){Me(e,e.return,l)}}}function Hd(e,t,a){a.props=al(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Me(e,t,l)}}function Dn(e,t){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(n){Me(e,t,n)}}function kt(e,t){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(n){Me(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(n){Me(e,t,n)}else a.current=null}function Od(e){var t=e.type,a=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(n){Me(e,e.return,n)}}function Jc(e,t,a){try{var l=e.stateNode;bh(l,e.type,a,t),l[dt]=t}catch(n){Me(e,e.return,n)}}function qd(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&qa(e.type)||e.tag===4}function Ic(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&qa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wc(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,t):(t=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,t.appendChild(e),a=a._reactRootContainer,a!=null||t.onclick!==null||(t.onclick=ti));else if(l!==4&&(l===27&&qa(e.type)&&(a=e.stateNode,t=null),e=e.child,e!==null))for(Wc(e,t,a),e=e.sibling;e!==null;)Wc(e,t,a),e=e.sibling}function Xs(e,t,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(l!==4&&(l===27&&qa(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Xs(e,t,a),e=e.sibling;e!==null;)Xs(e,t,a),e=e.sibling}function Bd(e){var t=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);lt(t,l,a),t[nt]=e,t[dt]=a}catch(o){Me(e,e.return,o)}}var oa=!1,Ge=!1,Fc=!1,Ud=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Fp(e,t){if(e=e.containerInfo,_r=ri,e=Qu(e),Ii(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var n=l.anchorOffset,o=l.focusNode;l=l.focusOffset;try{a.nodeType,o.nodeType}catch{a=null;break e}var p=0,y=-1,j=-1,H=0,G=0,Y=e,O=null;t:for(;;){for(var B;Y!==a||n!==0&&Y.nodeType!==3||(y=p+n),Y!==o||l!==0&&Y.nodeType!==3||(j=p+l),Y.nodeType===3&&(p+=Y.nodeValue.length),(B=Y.firstChild)!==null;)O=Y,Y=B;for(;;){if(Y===e)break t;if(O===a&&++H===n&&(y=p),O===o&&++G===l&&(j=p),(B=Y.nextSibling)!==null)break;Y=O,O=Y.parentNode}Y=B}a=y===-1||j===-1?null:{start:y,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(Nr={focusedElem:e,selectionRange:a},ri=!1,Ie=t;Ie!==null;)if(t=Ie,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Ie=e;else for(;Ie!==null;){switch(t=Ie,o=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&o!==null){e=void 0,a=t,n=o.memoizedProps,o=o.memoizedState,l=a.stateNode;try{var de=al(a.type,n,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(de,o),l.__reactInternalSnapshotBeforeUpdate=e}catch(re){Me(a,a.return,re)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,a=e.nodeType,a===9)Tr(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Tr(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(u(163))}if(e=t.sibling,e!==null){e.return=t.return,Ie=e;break}Ie=t.return}}function wd(e,t,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Aa(e,a),l&4&&Mn(5,a);break;case 1:if(Aa(e,a),l&4)if(e=a.stateNode,t===null)try{e.componentDidMount()}catch(p){Me(a,a.return,p)}else{var n=al(a.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Me(a,a.return,p)}}l&64&&zd(a),l&512&&Dn(a,a.return);break;case 3:if(Aa(e,a),l&64&&(e=a.updateQueue,e!==null)){if(t=null,a.child!==null)switch(a.child.tag){case 27:case 5:t=a.child.stateNode;break;case 1:t=a.child.stateNode}try{bo(e,t)}catch(p){Me(a,a.return,p)}}break;case 27:t===null&&l&4&&Bd(a);case 26:case 5:Aa(e,a),t===null&&l&4&&Od(a),l&512&&Dn(a,a.return);break;case 12:Aa(e,a);break;case 13:Aa(e,a),l&4&&$d(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=rh.bind(null,a),Eh(e,a))));break;case 22:if(l=a.memoizedState!==null||oa,!l){t=t!==null&&t.memoizedState!==null||Ge,n=oa;var o=Ge;oa=l,(Ge=t)&&!o?Ma(e,a,(a.subtreeFlags&8772)!==0):Aa(e,a),oa=n,Ge=o}break;case 30:break;default:Aa(e,a)}}function Ld(e){var t=e.alternate;t!==null&&(e.alternate=null,Ld(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zi(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var He=null,pt=!1;function da(e,t,a){for(a=a.child;a!==null;)Gd(e,t,a),a=a.sibling}function Gd(e,t,a){if(bt&&typeof bt.onCommitFiberUnmount=="function")try{bt.onCommitFiberUnmount(Jl,a)}catch{}switch(a.tag){case 26:Ge||kt(a,t),da(e,t,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ge||kt(a,t);var l=He,n=pt;qa(a.type)&&(He=a.stateNode,pt=!1),da(e,t,a),Ln(a.stateNode),He=l,pt=n;break;case 5:Ge||kt(a,t);case 6:if(l=He,n=pt,He=null,da(e,t,a),He=l,pt=n,He!==null)if(pt)try{(He.nodeType===9?He.body:He.nodeName==="HTML"?He.ownerDocument.body:He).removeChild(a.stateNode)}catch(o){Me(a,t,o)}else try{He.removeChild(a.stateNode)}catch(o){Me(a,t,o)}break;case 18:He!==null&&(pt?(e=He,Mf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Qn(e)):Mf(He,a.stateNode));break;case 4:l=He,n=pt,He=a.stateNode.containerInfo,pt=!0,da(e,t,a),He=l,pt=n;break;case 0:case 11:case 14:case 15:Ge||Ta(2,a,t),Ge||Ta(4,a,t),da(e,t,a);break;case 1:Ge||(kt(a,t),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Hd(a,t,l)),da(e,t,a);break;case 21:da(e,t,a);break;case 22:Ge=(l=Ge)||a.memoizedState!==null,da(e,t,a),Ge=l;break;default:da(e,t,a)}}function $d(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Qn(e)}catch(a){Me(t,t.return,a)}}function eh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ud),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ud),t;default:throw Error(u(435,e.tag))}}function er(e,t){var a=eh(e);t.forEach(function(l){var n=uh.bind(null,e,l);a.has(l)||(a.add(l),l.then(n,n))})}function _t(e,t){var a=t.deletions;if(a!==null)for(var l=0;l<a.length;l++){var n=a[l],o=e,p=t,y=p;e:for(;y!==null;){switch(y.tag){case 27:if(qa(y.type)){He=y.stateNode,pt=!1;break e}break;case 5:He=y.stateNode,pt=!1;break e;case 3:case 4:He=y.stateNode.containerInfo,pt=!0;break e}y=y.return}if(He===null)throw Error(u(160));Gd(o,p,n),He=null,pt=!1,o=n.alternate,o!==null&&(o.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Pd(t,e),t=t.sibling}var Gt=null;function Pd(e,t){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:_t(t,e),Nt(e),l&4&&(Ta(3,e,e.return),Mn(3,e),Ta(5,e,e.return));break;case 1:_t(t,e),Nt(e),l&512&&(Ge||a===null||kt(a,a.return)),l&64&&oa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var n=Gt;if(_t(t,e),Nt(e),l&512&&(Ge||a===null||kt(a,a.return)),l&4){var o=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){e:{l=e.type,a=e.memoizedProps,n=n.ownerDocument||n;t:switch(l){case"title":o=n.getElementsByTagName("title")[0],(!o||o[Fl]||o[nt]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=n.createElement(l),n.head.insertBefore(o,n.querySelector("head > title"))),lt(o,l,a),o[nt]=e,Ke(o),l=o;break e;case"link":var p=Uf("link","href",n).get(l+(a.href||""));if(p){for(var y=0;y<p.length;y++)if(o=p[y],o.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&o.getAttribute("rel")===(a.rel==null?null:a.rel)&&o.getAttribute("title")===(a.title==null?null:a.title)&&o.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){p.splice(y,1);break t}}o=n.createElement(l),lt(o,l,a),n.head.appendChild(o);break;case"meta":if(p=Uf("meta","content",n).get(l+(a.content||""))){for(y=0;y<p.length;y++)if(o=p[y],o.getAttribute("content")===(a.content==null?null:""+a.content)&&o.getAttribute("name")===(a.name==null?null:a.name)&&o.getAttribute("property")===(a.property==null?null:a.property)&&o.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&o.getAttribute("charset")===(a.charSet==null?null:a.charSet)){p.splice(y,1);break t}}o=n.createElement(l),lt(o,l,a),n.head.appendChild(o);break;default:throw Error(u(468,l))}o[nt]=e,Ke(o),l=o}e.stateNode=l}else wf(n,e.type,e.stateNode);else e.stateNode=Bf(n,l,e.memoizedProps);else o!==l?(o===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):o.count--,l===null?wf(n,e.type,e.stateNode):Bf(n,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Jc(e,e.memoizedProps,a.memoizedProps)}break;case 27:_t(t,e),Nt(e),l&512&&(Ge||a===null||kt(a,a.return)),a!==null&&l&4&&Jc(e,e.memoizedProps,a.memoizedProps);break;case 5:if(_t(t,e),Nt(e),l&512&&(Ge||a===null||kt(a,a.return)),e.flags&32){n=e.stateNode;try{hl(n,"")}catch(B){Me(e,e.return,B)}}l&4&&e.stateNode!=null&&(n=e.memoizedProps,Jc(e,n,a!==null?a.memoizedProps:n)),l&1024&&(Fc=!0);break;case 6:if(_t(t,e),Nt(e),l&4){if(e.stateNode===null)throw Error(u(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(B){Me(e,e.return,B)}}break;case 3:if(si=null,n=Gt,Gt=li(t.containerInfo),_t(t,e),Gt=n,Nt(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Qn(t.containerInfo)}catch(B){Me(e,e.return,B)}Fc&&(Fc=!1,Yd(e));break;case 4:l=Gt,Gt=li(e.stateNode.containerInfo),_t(t,e),Nt(e),Gt=l;break;case 12:_t(t,e),Nt(e);break;case 13:_t(t,e),Nt(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ir=Yt()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,er(e,l)));break;case 22:n=e.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,H=oa,G=Ge;if(oa=H||n,Ge=G||j,_t(t,e),Ge=G,oa=H,Nt(e),l&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(a===null||j||oa||Ge||ll(e)),a=null,t=e;;){if(t.tag===5||t.tag===26){if(a===null){j=a=t;try{if(o=j.stateNode,n)p=o.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{y=j.stateNode;var Y=j.memoizedProps.style,O=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;y.style.display=O==null||typeof O=="boolean"?"":(""+O).trim()}}catch(B){Me(j,j.return,B)}}}else if(t.tag===6){if(a===null){j=t;try{j.stateNode.nodeValue=n?"":j.memoizedProps}catch(B){Me(j,j.return,B)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;a===t&&(a=null),t=t.return}a===t&&(a=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,er(e,a))));break;case 19:_t(t,e),Nt(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,er(e,l)));break;case 30:break;case 21:break;default:_t(t,e),Nt(e)}}function Nt(e){var t=e.flags;if(t&2){try{for(var a,l=e.return;l!==null;){if(qd(l)){a=l;break}l=l.return}if(a==null)throw Error(u(160));switch(a.tag){case 27:var n=a.stateNode,o=Ic(e);Xs(e,o,n);break;case 5:var p=a.stateNode;a.flags&32&&(hl(p,""),a.flags&=-33);var y=Ic(e);Xs(e,y,p);break;case 3:case 4:var j=a.stateNode.containerInfo,H=Ic(e);Wc(e,H,j);break;default:throw Error(u(161))}}catch(G){Me(e,e.return,G)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Yd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Yd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Aa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)wd(e,t.alternate,t),t=t.sibling}function ll(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ta(4,t,t.return),ll(t);break;case 1:kt(t,t.return);var a=t.stateNode;typeof a.componentWillUnmount=="function"&&Hd(t,t.return,a),ll(t);break;case 27:Ln(t.stateNode);case 26:case 5:kt(t,t.return),ll(t);break;case 22:t.memoizedState===null&&ll(t);break;case 30:ll(t);break;default:ll(t)}e=e.sibling}}function Ma(e,t,a){for(a=a&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,n=e,o=t,p=o.flags;switch(o.tag){case 0:case 11:case 15:Ma(n,o,a),Mn(4,o);break;case 1:if(Ma(n,o,a),l=o,n=l.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(H){Me(l,l.return,H)}if(l=o,n=l.updateQueue,n!==null){var y=l.stateNode;try{var j=n.shared.hiddenCallbacks;if(j!==null)for(n.shared.hiddenCallbacks=null,n=0;n<j.length;n++)yo(j[n],y)}catch(H){Me(l,l.return,H)}}a&&p&64&&zd(o),Dn(o,o.return);break;case 27:Bd(o);case 26:case 5:Ma(n,o,a),a&&l===null&&p&4&&Od(o),Dn(o,o.return);break;case 12:Ma(n,o,a);break;case 13:Ma(n,o,a),a&&p&4&&$d(n,o);break;case 22:o.memoizedState===null&&Ma(n,o,a),Dn(o,o.return);break;case 30:break;default:Ma(n,o,a)}t=t.sibling}}function tr(e,t){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&hn(a))}function ar(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hn(e))}function Qt(e,t,a,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Xd(e,t,a,l),t=t.sibling}function Xd(e,t,a,l){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Qt(e,t,a,l),n&2048&&Mn(9,t);break;case 1:Qt(e,t,a,l);break;case 3:Qt(e,t,a,l),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&hn(e)));break;case 12:if(n&2048){Qt(e,t,a,l),e=t.stateNode;try{var o=t.memoizedProps,p=o.id,y=o.onPostCommit;typeof y=="function"&&y(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Me(t,t.return,j)}}else Qt(e,t,a,l);break;case 13:Qt(e,t,a,l);break;case 23:break;case 22:o=t.stateNode,p=t.alternate,t.memoizedState!==null?o._visibility&2?Qt(e,t,a,l):Rn(e,t):o._visibility&2?Qt(e,t,a,l):(o._visibility|=2,Ol(e,t,a,l,(t.subtreeFlags&10256)!==0)),n&2048&&tr(p,t);break;case 24:Qt(e,t,a,l),n&2048&&ar(t.alternate,t);break;default:Qt(e,t,a,l)}}function Ol(e,t,a,l,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=e,p=t,y=a,j=l,H=p.flags;switch(p.tag){case 0:case 11:case 15:Ol(o,p,y,j,n),Mn(8,p);break;case 23:break;case 22:var G=p.stateNode;p.memoizedState!==null?G._visibility&2?Ol(o,p,y,j,n):Rn(o,p):(G._visibility|=2,Ol(o,p,y,j,n)),n&&H&2048&&tr(p.alternate,p);break;case 24:Ol(o,p,y,j,n),n&&H&2048&&ar(p.alternate,p);break;default:Ol(o,p,y,j,n)}t=t.sibling}}function Rn(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var a=e,l=t,n=l.flags;switch(l.tag){case 22:Rn(a,l),n&2048&&tr(l.alternate,l);break;case 24:Rn(a,l),n&2048&&ar(l.alternate,l);break;default:Rn(a,l)}t=t.sibling}}var zn=8192;function ql(e){if(e.subtreeFlags&zn)for(e=e.child;e!==null;)Vd(e),e=e.sibling}function Vd(e){switch(e.tag){case 26:ql(e),e.flags&zn&&e.memoizedState!==null&&Lh(Gt,e.memoizedState,e.memoizedProps);break;case 5:ql(e);break;case 3:case 4:var t=Gt;Gt=li(e.stateNode.containerInfo),ql(e),Gt=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=zn,zn=16777216,ql(e),zn=t):ql(e));break;default:ql(e)}}function kd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Hn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Ie=l,Zd(l,e)}kd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Qd(e),e=e.sibling}function Qd(e){switch(e.tag){case 0:case 11:case 15:Hn(e),e.flags&2048&&Ta(9,e,e.return);break;case 3:Hn(e);break;case 12:Hn(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Vs(e)):Hn(e);break;default:Hn(e)}}function Vs(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var a=0;a<t.length;a++){var l=t[a];Ie=l,Zd(l,e)}kd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Ta(8,t,t.return),Vs(t);break;case 22:a=t.stateNode,a._visibility&2&&(a._visibility&=-3,Vs(t));break;default:Vs(t)}e=e.sibling}}function Zd(e,t){for(;Ie!==null;){var a=Ie;switch(a.tag){case 0:case 11:case 15:Ta(8,a,t);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:hn(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ie=l;else e:for(a=e;Ie!==null;){l=Ie;var n=l.sibling,o=l.return;if(Ld(l),l===a){Ie=null;break e}if(n!==null){n.return=o,Ie=n;break e}Ie=o}}}var th={getCacheForType:function(e){var t=st(ke),a=t.data.get(e);return a===void 0&&(a=e(),t.data.set(e,a)),a}},ah=typeof WeakMap=="function"?WeakMap:Map,je=0,Re=null,ve=null,ye=0,_e=0,Ct=null,Da=!1,Bl=!1,lr=!1,fa=0,we=0,Ra=0,nl=0,nr=0,qt=0,Ul=0,On=null,ht=null,sr=!1,ir=0,ks=1/0,Qs=null,za=null,at=0,Ha=null,wl=null,Ll=0,cr=0,rr=null,Kd=null,qn=0,ur=null;function Et(){if((je&2)!==0&&ye!==0)return ye&-ye;if(E.T!==null){var e=El;return e!==0?e:vr()}return ou()}function Jd(){qt===0&&(qt=(ye&536870912)===0||Se?iu():536870912);var e=Ot.current;return e!==null&&(e.flags|=32),qt}function Tt(e,t,a){(e===Re&&(_e===2||_e===9)||e.cancelPendingCommit!==null)&&(Gl(e,0),Oa(e,ye,qt,!1)),Wl(e,a),((je&2)===0||e!==Re)&&(e===Re&&((je&2)===0&&(nl|=a),we===4&&Oa(e,ye,qt,!1)),Zt(e))}function Id(e,t,a){if((je&6)!==0)throw Error(u(327));var l=!a&&(t&124)===0&&(t&e.expiredLanes)===0||Il(e,t),n=l?sh(e,t):fr(e,t,!0),o=l;do{if(n===0){Bl&&!l&&Oa(e,t,0,!1);break}else{if(a=e.current.alternate,o&&!lh(a)){n=fr(e,t,!1),o=!1;continue}if(n===2){if(o=t,e.errorRecoveryDisabledLanes&o)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var y=e;n=On;var j=y.current.memoizedState.isDehydrated;if(j&&(Gl(y,p).flags|=256),p=fr(y,p,!1),p!==2){if(lr&&!j){y.errorRecoveryDisabledLanes|=o,nl|=o,n=4;break e}o=ht,ht=n,o!==null&&(ht===null?ht=o:ht.push.apply(ht,o))}n=p}if(o=!1,n!==2)continue}}if(n===1){Gl(e,0),Oa(e,t,0,!0);break}e:{switch(l=e,o=n,o){case 0:case 1:throw Error(u(345));case 4:if((t&4194048)!==t)break;case 6:Oa(l,t,qt,!Da);break e;case 2:ht=null;break;case 3:case 5:break;default:throw Error(u(329))}if((t&62914560)===t&&(n=ir+300-Yt(),10<n)){if(Oa(l,t,qt,!Da),ns(l,0,!0)!==0)break e;l.timeoutHandle=Tf(Wd.bind(null,l,a,ht,Qs,sr,t,qt,nl,Ul,Da,o,2,-0,0),n);break e}Wd(l,a,ht,Qs,sr,t,qt,nl,Ul,Da,o,0,-0,0)}}break}while(!0);Zt(e)}function Wd(e,t,a,l,n,o,p,y,j,H,G,Y,O,B){if(e.timeoutHandle=-1,Y=t.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&(Pn={stylesheets:null,count:0,unsuspend:wh},Vd(t),Y=Gh(),Y!==null)){e.cancelPendingCommit=Y(sf.bind(null,e,t,o,a,l,n,p,y,j,G,1,O,B)),Oa(e,o,p,!H);return}sf(e,t,o,a,l,n,p,y,j)}function lh(e){for(var t=e;;){var a=t.tag;if((a===0||a===11||a===15)&&t.flags&16384&&(a=t.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var n=a[l],o=n.getSnapshot;n=n.value;try{if(!St(o(),n))return!1}catch{return!1}}if(a=t.child,t.subtreeFlags&16384&&a!==null)a.return=t,t=a;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Oa(e,t,a,l){t&=~nr,t&=~nl,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var n=t;0<n;){var o=31-xt(n),p=1<<o;l[o]=-1,n&=~p}a!==0&&ru(e,a,t)}function Zs(){return(je&6)===0?(Bn(0),!1):!0}function or(){if(ve!==null){if(_e===0)var e=ve.return;else e=ve,na=Wa=null,Tc(e),zl=null,En=0,e=ve;for(;e!==null;)Rd(e.alternate,e),e=e.return;ve=null}}function Gl(e,t){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,Sh(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),or(),Re=e,ve=a=ta(e.current,null),ye=t,_e=0,Ct=null,Da=!1,Bl=Il(e,t),lr=!1,Ul=qt=nr=nl=Ra=we=0,ht=On=null,sr=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var n=31-xt(l),o=1<<n;t|=e[n],l&=~o}return fa=t,vs(),a}function Fd(e,t){pe=null,E.H=qs,t===gn||t===Cs?(t=vo(),_e=3):t===mo?(t=vo(),_e=4):_e=t===gd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Ct=t,ve===null&&(we=1,Gs(e,Dt(t,e.current)))}function ef(){var e=E.H;return E.H=qs,e===null?qs:e}function tf(){var e=E.A;return E.A=th,e}function dr(){we=4,Da||(ye&4194048)!==ye&&Ot.current!==null||(Bl=!0),(Ra&134217727)===0&&(nl&134217727)===0||Re===null||Oa(Re,ye,qt,!1)}function fr(e,t,a){var l=je;je|=2;var n=ef(),o=tf();(Re!==e||ye!==t)&&(Qs=null,Gl(e,t)),t=!1;var p=we;e:do try{if(_e!==0&&ve!==null){var y=ve,j=Ct;switch(_e){case 8:or(),p=6;break e;case 3:case 2:case 9:case 6:Ot.current===null&&(t=!0);var H=_e;if(_e=0,Ct=null,$l(e,y,j,H),a&&Bl){p=0;break e}break;default:H=_e,_e=0,Ct=null,$l(e,y,j,H)}}nh(),p=we;break}catch(G){Fd(e,G)}while(!0);return t&&e.shellSuspendCounter++,na=Wa=null,je=l,E.H=n,E.A=o,ve===null&&(Re=null,ye=0,vs()),p}function nh(){for(;ve!==null;)af(ve)}function sh(e,t){var a=je;je|=2;var l=ef(),n=tf();Re!==e||ye!==t?(Qs=null,ks=Yt()+500,Gl(e,t)):Bl=Il(e,t);e:do try{if(_e!==0&&ve!==null){t=ve;var o=Ct;t:switch(_e){case 1:_e=0,Ct=null,$l(e,t,o,1);break;case 2:case 9:if(po(o)){_e=0,Ct=null,lf(t);break}t=function(){_e!==2&&_e!==9||Re!==e||(_e=7),Zt(e)},o.then(t,t);break e;case 3:_e=7;break e;case 4:_e=5;break e;case 7:po(o)?(_e=0,Ct=null,lf(t)):(_e=0,Ct=null,$l(e,t,o,7));break;case 5:var p=null;switch(ve.tag){case 26:p=ve.memoizedState;case 5:case 27:var y=ve;if(!p||Lf(p)){_e=0,Ct=null;var j=y.sibling;if(j!==null)ve=j;else{var H=y.return;H!==null?(ve=H,Ks(H)):ve=null}break t}}_e=0,Ct=null,$l(e,t,o,5);break;case 6:_e=0,Ct=null,$l(e,t,o,6);break;case 8:or(),we=6;break e;default:throw Error(u(462))}}ih();break}catch(G){Fd(e,G)}while(!0);return na=Wa=null,E.H=l,E.A=n,je=a,ve!==null?0:(Re=null,ye=0,vs(),we)}function ih(){for(;ve!==null&&!va();)af(ve)}function af(e){var t=Md(e.alternate,e,fa);e.memoizedProps=e.pendingProps,t===null?Ks(e):ve=t}function lf(e){var t=e,a=t.alternate;switch(t.tag){case 15:case 0:t=_d(a,t,t.pendingProps,t.type,void 0,ye);break;case 11:t=_d(a,t,t.pendingProps,t.type.render,t.ref,ye);break;case 5:Tc(t);default:Rd(a,t),t=ve=lo(t,fa),t=Md(a,t,fa)}e.memoizedProps=e.pendingProps,t===null?Ks(e):ve=t}function $l(e,t,a,l){na=Wa=null,Tc(t),zl=null,En=0;var n=t.return;try{if(Kp(e,n,t,a,ye)){we=1,Gs(e,Dt(a,e.current)),ve=null;return}}catch(o){if(n!==null)throw ve=n,o;we=1,Gs(e,Dt(a,e.current)),ve=null;return}t.flags&32768?(Se||l===1?e=!0:Bl||(ye&536870912)!==0?e=!1:(Da=e=!0,(l===2||l===9||l===3||l===6)&&(l=Ot.current,l!==null&&l.tag===13&&(l.flags|=16384))),nf(t,e)):Ks(t)}function Ks(e){var t=e;do{if((t.flags&32768)!==0){nf(t,Da);return}e=t.return;var a=Ip(t.alternate,t,fa);if(a!==null){ve=a;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);we===0&&(we=5)}function nf(e,t){do{var a=Wp(e.alternate,e);if(a!==null){a.flags&=32767,ve=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!t&&(e=e.sibling,e!==null)){ve=e;return}ve=e=a}while(e!==null);we=6,ve=null}function sf(e,t,a,l,n,o,p,y,j){e.cancelPendingCommit=null;do Js();while(at!==0);if((je&6)!==0)throw Error(u(327));if(t!==null){if(t===e.current)throw Error(u(177));if(o=t.lanes|t.childLanes,o|=ac,wm(e,a,o,p,y,j),e===Re&&(ve=Re=null,ye=0),wl=t,Ha=e,Ll=a,cr=o,rr=n,Kd=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,oh(ts,function(){return df(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=E.T,E.T=null,n=L.p,L.p=2,p=je,je|=4;try{Fp(e,t,a)}finally{je=p,L.p=n,E.T=l}}at=1,cf(),rf(),uf()}}function cf(){if(at===1){at=0;var e=Ha,t=wl,a=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var l=L.p;L.p=2;var n=je;je|=4;try{Pd(t,e);var o=Nr,p=Qu(e.containerInfo),y=o.focusedElem,j=o.selectionRange;if(p!==y&&y&&y.ownerDocument&&ku(y.ownerDocument.documentElement,y)){if(j!==null&&Ii(y)){var H=j.start,G=j.end;if(G===void 0&&(G=H),"selectionStart"in y)y.selectionStart=H,y.selectionEnd=Math.min(G,y.value.length);else{var Y=y.ownerDocument||document,O=Y&&Y.defaultView||window;if(O.getSelection){var B=O.getSelection(),de=y.textContent.length,re=Math.min(j.start,de),Te=j.end===void 0?re:Math.min(j.end,de);!B.extend&&re>Te&&(p=Te,Te=re,re=p);var D=Vu(y,re),C=Vu(y,Te);if(D&&C&&(B.rangeCount!==1||B.anchorNode!==D.node||B.anchorOffset!==D.offset||B.focusNode!==C.node||B.focusOffset!==C.offset)){var z=Y.createRange();z.setStart(D.node,D.offset),B.removeAllRanges(),re>Te?(B.addRange(z),B.extend(C.node,C.offset)):(z.setEnd(C.node,C.offset),B.addRange(z))}}}}for(Y=[],B=y;B=B.parentNode;)B.nodeType===1&&Y.push({element:B,left:B.scrollLeft,top:B.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<Y.length;y++){var P=Y[y];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}ri=!!_r,Nr=_r=null}finally{je=n,L.p=l,E.T=a}}e.current=t,at=2}}function rf(){if(at===2){at=0;var e=Ha,t=wl,a=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var l=L.p;L.p=2;var n=je;je|=4;try{wd(e,t.alternate,t)}finally{je=n,L.p=l,E.T=a}}at=3}}function uf(){if(at===4||at===3){at=0,Ti();var e=Ha,t=wl,a=Ll,l=Kd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?at=5:(at=0,wl=Ha=null,of(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(za=null),Di(a),t=t.stateNode,bt&&typeof bt.onCommitFiberRoot=="function")try{bt.onCommitFiberRoot(Jl,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=E.T,n=L.p,L.p=2,E.T=null;try{for(var o=e.onRecoverableError,p=0;p<l.length;p++){var y=l[p];o(y.value,{componentStack:y.stack})}}finally{E.T=t,L.p=n}}(Ll&3)!==0&&Js(),Zt(e),n=e.pendingLanes,(a&4194090)!==0&&(n&42)!==0?e===ur?qn++:(qn=0,ur=e):qn=0,Bn(0)}}function of(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,hn(t)))}function Js(e){return cf(),rf(),uf(),df()}function df(){if(at!==5)return!1;var e=Ha,t=cr;cr=0;var a=Di(Ll),l=E.T,n=L.p;try{L.p=32>a?32:a,E.T=null,a=rr,rr=null;var o=Ha,p=Ll;if(at=0,wl=Ha=null,Ll=0,(je&6)!==0)throw Error(u(331));var y=je;if(je|=4,Qd(o.current),Xd(o,o.current,p,a),je=y,Bn(0,!1),bt&&typeof bt.onPostCommitFiberRoot=="function")try{bt.onPostCommitFiberRoot(Jl,o)}catch{}return!0}finally{L.p=n,E.T=l,of(e,t)}}function ff(e,t,a){t=Dt(a,t),t=$c(e.stateNode,t,2),e=_a(e,t,2),e!==null&&(Wl(e,2),Zt(e))}function Me(e,t,a){if(e.tag===3)ff(e,e,a);else for(;t!==null;){if(t.tag===3){ff(t,e,a);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(za===null||!za.has(l))){e=Dt(a,e),a=hd(2),l=_a(t,a,2),l!==null&&(vd(a,l,t,e),Wl(l,2),Zt(l));break}}t=t.return}}function mr(e,t,a){var l=e.pingCache;if(l===null){l=e.pingCache=new ah;var n=new Set;l.set(t,n)}else n=l.get(t),n===void 0&&(n=new Set,l.set(t,n));n.has(a)||(lr=!0,n.add(a),e=ch.bind(null,e,t,a),t.then(e,e))}function ch(e,t,a){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Re===e&&(ye&a)===a&&(we===4||we===3&&(ye&62914560)===ye&&300>Yt()-ir?(je&2)===0&&Gl(e,0):nr|=a,Ul===ye&&(Ul=0)),Zt(e)}function mf(e,t){t===0&&(t=cu()),e=jl(e,t),e!==null&&(Wl(e,t),Zt(e))}function rh(e){var t=e.memoizedState,a=0;t!==null&&(a=t.retryLane),mf(e,a)}function uh(e,t){var a=0;switch(e.tag){case 13:var l=e.stateNode,n=e.memoizedState;n!==null&&(a=n.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(u(314))}l!==null&&l.delete(t),mf(e,a)}function oh(e,t){return Be(e,t)}var Is=null,Pl=null,pr=!1,Ws=!1,hr=!1,sl=0;function Zt(e){e!==Pl&&e.next===null&&(Pl===null?Is=Pl=e:Pl=Pl.next=e),Ws=!0,pr||(pr=!0,fh())}function Bn(e,t){if(!hr&&Ws){hr=!0;do for(var a=!1,l=Is;l!==null;){if(e!==0){var n=l.pendingLanes;if(n===0)var o=0;else{var p=l.suspendedLanes,y=l.pingedLanes;o=(1<<31-xt(42|e)+1)-1,o&=n&~(p&~y),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(a=!0,gf(l,o))}else o=ye,o=ns(l,l===Re?o:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(o&3)===0||Il(l,o)||(a=!0,gf(l,o));l=l.next}while(a);hr=!1}}function dh(){pf()}function pf(){Ws=pr=!1;var e=0;sl!==0&&(xh()&&(e=sl),sl=0);for(var t=Yt(),a=null,l=Is;l!==null;){var n=l.next,o=hf(l,t);o===0?(l.next=null,a===null?Is=n:a.next=n,n===null&&(Pl=a)):(a=l,(e!==0||(o&3)!==0)&&(Ws=!0)),l=n}Bn(e)}function hf(e,t){for(var a=e.suspendedLanes,l=e.pingedLanes,n=e.expirationTimes,o=e.pendingLanes&-62914561;0<o;){var p=31-xt(o),y=1<<p,j=n[p];j===-1?((y&a)===0||(y&l)!==0)&&(n[p]=Um(y,t)):j<=t&&(e.expiredLanes|=y),o&=~y}if(t=Re,a=ye,a=ns(e,e===t?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===t&&(_e===2||_e===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&rt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Il(e,a)){if(t=a&-a,t===e.callbackPriority)return t;switch(l!==null&&rt(l),Di(a)){case 2:case 8:a=nu;break;case 32:a=ts;break;case 268435456:a=su;break;default:a=ts}return l=vf.bind(null,e),a=Be(a,l),e.callbackPriority=t,e.callbackNode=a,t}return l!==null&&l!==null&&rt(l),e.callbackPriority=2,e.callbackNode=null,2}function vf(e,t){if(at!==0&&at!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Js()&&e.callbackNode!==a)return null;var l=ye;return l=ns(e,e===Re?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Id(e,l,t),hf(e,Yt()),e.callbackNode!=null&&e.callbackNode===a?vf.bind(null,e):null)}function gf(e,t){if(Js())return null;Id(e,t,!0)}function fh(){jh(function(){(je&6)!==0?Be(lu,dh):pf()})}function vr(){return sl===0&&(sl=iu()),sl}function yf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:us(""+e)}function bf(e,t){var a=t.ownerDocument.createElement("input");return a.name=t.name,a.value=t.value,e.id&&a.setAttribute("form",e.id),t.parentNode.insertBefore(a,t),e=new FormData(e),a.parentNode.removeChild(a),e}function mh(e,t,a,l,n){if(t==="submit"&&a&&a.stateNode===n){var o=yf((n[dt]||null).action),p=l.submitter;p&&(t=(t=p[dt]||null)?yf(t.formAction):p.getAttribute("formAction"),t!==null&&(o=t,p=null));var y=new ms("action","action",null,l,n);e.push({event:y,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sl!==0){var j=p?bf(n,p):new FormData(n);Bc(a,{pending:!0,data:j,method:n.method,action:o},null,j)}}else typeof o=="function"&&(y.preventDefault(),j=p?bf(n,p):new FormData(n),Bc(a,{pending:!0,data:j,method:n.method,action:o},o,j))},currentTarget:n}]})}}for(var gr=0;gr<tc.length;gr++){var yr=tc[gr],ph=yr.toLowerCase(),hh=yr[0].toUpperCase()+yr.slice(1);Lt(ph,"on"+hh)}Lt(Ju,"onAnimationEnd"),Lt(Iu,"onAnimationIteration"),Lt(Wu,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(zp,"onTransitionRun"),Lt(Hp,"onTransitionStart"),Lt(Op,"onTransitionCancel"),Lt(Fu,"onTransitionEnd"),fl("onMouseEnter",["mouseout","mouseover"]),fl("onMouseLeave",["mouseout","mouseover"]),fl("onPointerEnter",["pointerout","pointerover"]),fl("onPointerLeave",["pointerout","pointerover"]),Ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Un="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Un));function xf(e,t){t=(t&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],n=l.event;l=l.listeners;e:{var o=void 0;if(t)for(var p=l.length-1;0<=p;p--){var y=l[p],j=y.instance,H=y.currentTarget;if(y=y.listener,j!==o&&n.isPropagationStopped())break e;o=y,n.currentTarget=H;try{o(n)}catch(G){Ls(G)}n.currentTarget=null,o=j}else for(p=0;p<l.length;p++){if(y=l[p],j=y.instance,H=y.currentTarget,y=y.listener,j!==o&&n.isPropagationStopped())break e;o=y,n.currentTarget=H;try{o(n)}catch(G){Ls(G)}n.currentTarget=null,o=j}}}}function ge(e,t){var a=t[Ri];a===void 0&&(a=t[Ri]=new Set);var l=e+"__bubble";a.has(l)||(Sf(t,e,2,!1),a.add(l))}function br(e,t,a){var l=0;t&&(l|=4),Sf(a,e,l,t)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function xr(e){if(!e[Fs]){e[Fs]=!0,fu.forEach(function(a){a!=="selectionchange"&&(vh.has(a)||br(a,!1,e),br(a,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fs]||(t[Fs]=!0,br("selectionchange",!1,t))}}function Sf(e,t,a,l){switch(Vf(t)){case 2:var n=Yh;break;case 8:n=Xh;break;default:n=Or}a=n.bind(null,t,a,e),n=void 0,!Pi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),l?n!==void 0?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):n!==void 0?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Sr(e,t,a,l,n){var o=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var y=l.stateNode.containerInfo;if(y===n)break;if(p===4)for(p=l.return;p!==null;){var j=p.tag;if((j===3||j===4)&&p.stateNode.containerInfo===n)return;p=p.return}for(;y!==null;){if(p=ul(y),p===null)return;if(j=p.tag,j===5||j===6||j===26||j===27){l=o=p;continue e}y=y.parentNode}}l=l.return}Eu(function(){var H=o,G=Gi(a),Y=[];e:{var O=eo.get(e);if(O!==void 0){var B=ms,de=e;switch(e){case"keypress":if(ds(a)===0)break e;case"keydown":case"keyup":B=op;break;case"focusin":de="focus",B=ki;break;case"focusout":de="blur",B=ki;break;case"beforeblur":case"afterblur":B=ki;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":B=Mu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":B=Wm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":B=mp;break;case Ju:case Iu:case Wu:B=tp;break;case Fu:B=hp;break;case"scroll":case"scrollend":B=Jm;break;case"wheel":B=gp;break;case"copy":case"cut":case"paste":B=lp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":B=Ru;break;case"toggle":case"beforetoggle":B=bp}var re=(t&4)!==0,Te=!re&&(e==="scroll"||e==="scrollend"),D=re?O!==null?O+"Capture":null:O;re=[];for(var C=H,z;C!==null;){var P=C;if(z=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||z===null||D===null||(P=tn(C,D),P!=null&&re.push(wn(C,P,z))),Te)break;C=C.return}0<re.length&&(O=new B(O,de,null,a,G),Y.push({event:O,listeners:re}))}}if((t&7)===0){e:{if(O=e==="mouseover"||e==="pointerover",B=e==="mouseout"||e==="pointerout",O&&a!==Li&&(de=a.relatedTarget||a.fromElement)&&(ul(de)||de[rl]))break e;if((B||O)&&(O=G.window===G?G:(O=G.ownerDocument)?O.defaultView||O.parentWindow:window,B?(de=a.relatedTarget||a.toElement,B=H,de=de?ul(de):null,de!==null&&(Te=f(de),re=de.tag,de!==Te||re!==5&&re!==27&&re!==6)&&(de=null)):(B=null,de=H),B!==de)){if(re=Mu,P="onMouseLeave",D="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(re=Ru,P="onPointerLeave",D="onPointerEnter",C="pointer"),Te=B==null?O:en(B),z=de==null?O:en(de),O=new re(P,C+"leave",B,a,G),O.target=Te,O.relatedTarget=z,P=null,ul(G)===H&&(re=new re(D,C+"enter",de,a,G),re.target=z,re.relatedTarget=Te,P=re),Te=P,B&&de)t:{for(re=B,D=de,C=0,z=re;z;z=Yl(z))C++;for(z=0,P=D;P;P=Yl(P))z++;for(;0<C-z;)re=Yl(re),C--;for(;0<z-C;)D=Yl(D),z--;for(;C--;){if(re===D||D!==null&&re===D.alternate)break t;re=Yl(re),D=Yl(D)}re=null}else re=null;B!==null&&jf(Y,O,B,re,!1),de!==null&&Te!==null&&jf(Y,Te,de,re,!0)}}e:{if(O=H?en(H):window,B=O.nodeName&&O.nodeName.toLowerCase(),B==="select"||B==="input"&&O.type==="file")var ee=Lu;else if(Uu(O))if(Gu)ee=Mp;else{ee=Tp;var he=Ep}else B=O.nodeName,!B||B.toLowerCase()!=="input"||O.type!=="checkbox"&&O.type!=="radio"?H&&wi(H.elementType)&&(ee=Lu):ee=Ap;if(ee&&(ee=ee(e,H))){wu(Y,ee,a,G);break e}he&&he(e,O,H),e==="focusout"&&H&&O.type==="number"&&H.memoizedProps.value!=null&&Ui(O,"number",O.value)}switch(he=H?en(H):window,e){case"focusin":(Uu(he)||he.contentEditable==="true")&&(bl=he,Wi=H,on=null);break;case"focusout":on=Wi=bl=null;break;case"mousedown":Fi=!0;break;case"contextmenu":case"mouseup":case"dragend":Fi=!1,Zu(Y,a,G);break;case"selectionchange":if(Rp)break;case"keydown":case"keyup":Zu(Y,a,G)}var se;if(Zi)e:{switch(e){case"compositionstart":var ue="onCompositionStart";break e;case"compositionend":ue="onCompositionEnd";break e;case"compositionupdate":ue="onCompositionUpdate";break e}ue=void 0}else yl?qu(e,a)&&(ue="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(ue="onCompositionStart");ue&&(zu&&a.locale!=="ko"&&(yl||ue!=="onCompositionStart"?ue==="onCompositionEnd"&&yl&&(se=Tu()):(ba=G,Yi="value"in ba?ba.value:ba.textContent,yl=!0)),he=ei(H,ue),0<he.length&&(ue=new Du(ue,e,null,a,G),Y.push({event:ue,listeners:he}),se?ue.data=se:(se=Bu(a),se!==null&&(ue.data=se)))),(se=Sp?jp(e,a):_p(e,a))&&(ue=ei(H,"onBeforeInput"),0<ue.length&&(he=new Du("onBeforeInput","beforeinput",null,a,G),Y.push({event:he,listeners:ue}),he.data=se)),mh(Y,e,H,a,G)}xf(Y,t)})}function wn(e,t,a){return{instance:e,listener:t,currentTarget:a}}function ei(e,t){for(var a=t+"Capture",l=[];e!==null;){var n=e,o=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||o===null||(n=tn(e,a),n!=null&&l.unshift(wn(e,n,o)),n=tn(e,t),n!=null&&l.push(wn(e,n,o))),e.tag===3)return l;e=e.return}return[]}function Yl(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function jf(e,t,a,l,n){for(var o=t._reactName,p=[];a!==null&&a!==l;){var y=a,j=y.alternate,H=y.stateNode;if(y=y.tag,j!==null&&j===l)break;y!==5&&y!==26&&y!==27||H===null||(j=H,n?(H=tn(a,o),H!=null&&p.unshift(wn(a,H,j))):n||(H=tn(a,o),H!=null&&p.push(wn(a,H,j)))),a=a.return}p.length!==0&&e.push({event:t,listeners:p})}var gh=/\r\n?/g,yh=/\u0000|\uFFFD/g;function _f(e){return(typeof e=="string"?e:""+e).replace(gh,`
`).replace(yh,"")}function Nf(e,t){return t=_f(t),_f(e)===t}function ti(){}function Ee(e,t,a,l,n,o){switch(a){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||hl(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&hl(e,""+l);break;case"className":is(e,"class",l);break;case"tabIndex":is(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":is(e,a,l);break;case"style":Nu(e,l,o);break;case"data":if(t!=="object"){is(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=us(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(a==="formAction"?(t!=="input"&&Ee(e,t,"name",n.name,n,null),Ee(e,t,"formEncType",n.formEncType,n,null),Ee(e,t,"formMethod",n.formMethod,n,null),Ee(e,t,"formTarget",n.formTarget,n,null)):(Ee(e,t,"encType",n.encType,n,null),Ee(e,t,"method",n.method,n,null),Ee(e,t,"target",n.target,n,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=us(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=ti);break;case"onScroll":l!=null&&ge("scroll",e);break;case"onScrollEnd":l!=null&&ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=us(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ge("beforetoggle",e),ge("toggle",e),ss(e,"popover",l);break;case"xlinkActuate":Ft(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ft(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ft(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ft(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ft(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ft(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ft(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ss(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Zm.get(a)||a,ss(e,a,l))}}function jr(e,t,a,l,n,o){switch(a){case"style":Nu(e,l,o);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(u(61));if(a=l.__html,a!=null){if(n.children!=null)throw Error(u(60));e.innerHTML=a}}break;case"children":typeof l=="string"?hl(e,l):(typeof l=="number"||typeof l=="bigint")&&hl(e,""+l);break;case"onScroll":l!=null&&ge("scroll",e);break;case"onScrollEnd":l!=null&&ge("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mu.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(n=a.endsWith("Capture"),t=a.slice(2,n?a.length-7:void 0),o=e[dt]||null,o=o!=null?o[a]:null,typeof o=="function"&&e.removeEventListener(t,o,n),typeof l=="function")){typeof o!="function"&&o!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(t,l,n);break e}a in e?e[a]=l:l===!0?e.setAttribute(a,""):ss(e,a,l)}}}function lt(e,t,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",e),ge("load",e);var l=!1,n=!1,o;for(o in a)if(a.hasOwnProperty(o)){var p=a[o];if(p!=null)switch(o){case"src":l=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Ee(e,t,o,p,a,null)}}n&&Ee(e,t,"srcSet",a.srcSet,a,null),l&&Ee(e,t,"src",a.src,a,null);return;case"input":ge("invalid",e);var y=o=p=n=null,j=null,H=null;for(l in a)if(a.hasOwnProperty(l)){var G=a[l];if(G!=null)switch(l){case"name":n=G;break;case"type":p=G;break;case"checked":j=G;break;case"defaultChecked":H=G;break;case"value":o=G;break;case"defaultValue":y=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(u(137,t));break;default:Ee(e,t,l,G,a,null)}}xu(e,o,y,j,H,p,n,!1),cs(e);return;case"select":ge("invalid",e),l=p=o=null;for(n in a)if(a.hasOwnProperty(n)&&(y=a[n],y!=null))switch(n){case"value":o=y;break;case"defaultValue":p=y;break;case"multiple":l=y;default:Ee(e,t,n,y,a,null)}t=o,a=p,e.multiple=!!l,t!=null?pl(e,!!l,t,!1):a!=null&&pl(e,!!l,a,!0);return;case"textarea":ge("invalid",e),o=n=l=null;for(p in a)if(a.hasOwnProperty(p)&&(y=a[p],y!=null))switch(p){case"value":l=y;break;case"defaultValue":n=y;break;case"children":o=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(u(91));break;default:Ee(e,t,p,y,a,null)}ju(e,l,n,o),cs(e);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ee(e,t,j,l,a,null)}return;case"dialog":ge("beforetoggle",e),ge("toggle",e),ge("cancel",e),ge("close",e);break;case"iframe":case"object":ge("load",e);break;case"video":case"audio":for(l=0;l<Un.length;l++)ge(Un[l],e);break;case"image":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"embed":case"source":case"link":ge("error",e),ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(l=a[H],l!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(u(137,t));default:Ee(e,t,H,l,a,null)}return;default:if(wi(t)){for(G in a)a.hasOwnProperty(G)&&(l=a[G],l!==void 0&&jr(e,t,G,l,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(l=a[y],l!=null&&Ee(e,t,y,l,a,null))}function bh(e,t,a,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,p=null,y=null,j=null,H=null,G=null;for(B in a){var Y=a[B];if(a.hasOwnProperty(B)&&Y!=null)switch(B){case"checked":break;case"value":break;case"defaultValue":j=Y;default:l.hasOwnProperty(B)||Ee(e,t,B,null,l,Y)}}for(var O in l){var B=l[O];if(Y=a[O],l.hasOwnProperty(O)&&(B!=null||Y!=null))switch(O){case"type":o=B;break;case"name":n=B;break;case"checked":H=B;break;case"defaultChecked":G=B;break;case"value":p=B;break;case"defaultValue":y=B;break;case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(u(137,t));break;default:B!==Y&&Ee(e,t,O,B,l,Y)}}Bi(e,p,y,j,H,G,o,n);return;case"select":B=p=y=O=null;for(o in a)if(j=a[o],a.hasOwnProperty(o)&&j!=null)switch(o){case"value":break;case"multiple":B=j;default:l.hasOwnProperty(o)||Ee(e,t,o,null,l,j)}for(n in l)if(o=l[n],j=a[n],l.hasOwnProperty(n)&&(o!=null||j!=null))switch(n){case"value":O=o;break;case"defaultValue":y=o;break;case"multiple":p=o;default:o!==j&&Ee(e,t,n,o,l,j)}t=y,a=p,l=B,O!=null?pl(e,!!a,O,!1):!!l!=!!a&&(t!=null?pl(e,!!a,t,!0):pl(e,!!a,a?[]:"",!1));return;case"textarea":B=O=null;for(y in a)if(n=a[y],a.hasOwnProperty(y)&&n!=null&&!l.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ee(e,t,y,null,l,n)}for(p in l)if(n=l[p],o=a[p],l.hasOwnProperty(p)&&(n!=null||o!=null))switch(p){case"value":O=n;break;case"defaultValue":B=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(u(91));break;default:n!==o&&Ee(e,t,p,n,l,o)}Su(e,O,B);return;case"option":for(var de in a)if(O=a[de],a.hasOwnProperty(de)&&O!=null&&!l.hasOwnProperty(de))switch(de){case"selected":e.selected=!1;break;default:Ee(e,t,de,null,l,O)}for(j in l)if(O=l[j],B=a[j],l.hasOwnProperty(j)&&O!==B&&(O!=null||B!=null))switch(j){case"selected":e.selected=O&&typeof O!="function"&&typeof O!="symbol";break;default:Ee(e,t,j,O,l,B)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var re in a)O=a[re],a.hasOwnProperty(re)&&O!=null&&!l.hasOwnProperty(re)&&Ee(e,t,re,null,l,O);for(H in l)if(O=l[H],B=a[H],l.hasOwnProperty(H)&&O!==B&&(O!=null||B!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(O!=null)throw Error(u(137,t));break;default:Ee(e,t,H,O,l,B)}return;default:if(wi(t)){for(var Te in a)O=a[Te],a.hasOwnProperty(Te)&&O!==void 0&&!l.hasOwnProperty(Te)&&jr(e,t,Te,void 0,l,O);for(G in l)O=l[G],B=a[G],!l.hasOwnProperty(G)||O===B||O===void 0&&B===void 0||jr(e,t,G,O,l,B);return}}for(var D in a)O=a[D],a.hasOwnProperty(D)&&O!=null&&!l.hasOwnProperty(D)&&Ee(e,t,D,null,l,O);for(Y in l)O=l[Y],B=a[Y],!l.hasOwnProperty(Y)||O===B||O==null&&B==null||Ee(e,t,Y,O,l,B)}var _r=null,Nr=null;function ai(e){return e.nodeType===9?e:e.ownerDocument}function Cf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ef(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cr(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Er=null;function xh(){var e=window.event;return e&&e.type==="popstate"?e===Er?!1:(Er=e,!0):(Er=null,!1)}var Tf=typeof setTimeout=="function"?setTimeout:void 0,Sh=typeof clearTimeout=="function"?clearTimeout:void 0,Af=typeof Promise=="function"?Promise:void 0,jh=typeof queueMicrotask=="function"?queueMicrotask:typeof Af<"u"?function(e){return Af.resolve(null).then(e).catch(_h)}:Tf;function _h(e){setTimeout(function(){throw e})}function qa(e){return e==="head"}function Mf(e,t){var a=t,l=0,n=0;do{var o=a.nextSibling;if(e.removeChild(a),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(0<l&&8>l){a=l;var p=e.ownerDocument;if(a&1&&Ln(p.documentElement),a&2&&Ln(p.body),a&4)for(a=p.head,Ln(a),p=a.firstChild;p;){var y=p.nextSibling,j=p.nodeName;p[Fl]||j==="SCRIPT"||j==="STYLE"||j==="LINK"&&p.rel.toLowerCase()==="stylesheet"||a.removeChild(p),p=y}}if(n===0){e.removeChild(o),Qn(t);return}n--}else a==="$"||a==="$?"||a==="$!"?n++:l=a.charCodeAt(0)-48;else l=0;a=o}while(a);Qn(t)}function Tr(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var a=t;switch(t=t.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Tr(a),zi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Nh(e,t,a,l){for(;e.nodeType===1;){var n=a;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Fl])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(o=e.getAttribute("rel"),o==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(o!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(o=e.getAttribute("src"),(o!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var o=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===o)return e}else return e;if(e=$t(e.nextSibling),e===null)break}return null}function Ch(e,t,a){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=$t(e.nextSibling),e===null))return null;return e}function Ar(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function Eh(e,t){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")t();else{var l=function(){t(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function $t(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var Mr=null;function Df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(t===0)return e;t--}else a==="/$"&&t++}e=e.previousSibling}return null}function Rf(e,t,a){switch(t=ai(a),e){case"html":if(e=t.documentElement,!e)throw Error(u(452));return e;case"head":if(e=t.head,!e)throw Error(u(453));return e;case"body":if(e=t.body,!e)throw Error(u(454));return e;default:throw Error(u(451))}}function Ln(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);zi(e)}var Bt=new Map,zf=new Set;function li(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ma=L.d;L.d={f:Th,r:Ah,D:Mh,C:Dh,L:Rh,m:zh,X:Oh,S:Hh,M:qh};function Th(){var e=ma.f(),t=Zs();return e||t}function Ah(e){var t=ol(e);t!==null&&t.tag===5&&t.type==="form"?Io(t):ma.r(e)}var Xl=typeof document>"u"?null:document;function Hf(e,t,a){var l=Xl;if(l&&typeof t=="string"&&t){var n=Mt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof a=="string"&&(n+='[crossorigin="'+a+'"]'),zf.has(n)||(zf.add(n),e={rel:e,crossOrigin:a,href:t},l.querySelector(n)===null&&(t=l.createElement("link"),lt(t,"link",e),Ke(t),l.head.appendChild(t)))}}function Mh(e){ma.D(e),Hf("dns-prefetch",e,null)}function Dh(e,t){ma.C(e,t),Hf("preconnect",e,t)}function Rh(e,t,a){ma.L(e,t,a);var l=Xl;if(l&&e&&t){var n='link[rel="preload"][as="'+Mt(t)+'"]';t==="image"&&a&&a.imageSrcSet?(n+='[imagesrcset="'+Mt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(n+='[imagesizes="'+Mt(a.imageSizes)+'"]')):n+='[href="'+Mt(e)+'"]';var o=n;switch(t){case"style":o=Vl(e);break;case"script":o=kl(e)}Bt.has(o)||(e=b({rel:"preload",href:t==="image"&&a&&a.imageSrcSet?void 0:e,as:t},a),Bt.set(o,e),l.querySelector(n)!==null||t==="style"&&l.querySelector(Gn(o))||t==="script"&&l.querySelector($n(o))||(t=l.createElement("link"),lt(t,"link",e),Ke(t),l.head.appendChild(t)))}}function zh(e,t){ma.m(e,t);var a=Xl;if(a&&e){var l=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+Mt(l)+'"][href="'+Mt(e)+'"]',o=n;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=kl(e)}if(!Bt.has(o)&&(e=b({rel:"modulepreload",href:e},t),Bt.set(o,e),a.querySelector(n)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($n(o)))return}l=a.createElement("link"),lt(l,"link",e),Ke(l),a.head.appendChild(l)}}}function Hh(e,t,a){ma.S(e,t,a);var l=Xl;if(l&&e){var n=dl(l).hoistableStyles,o=Vl(e);t=t||"default";var p=n.get(o);if(!p){var y={loading:0,preload:null};if(p=l.querySelector(Gn(o)))y.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":t},a),(a=Bt.get(o))&&Dr(e,a);var j=p=l.createElement("link");Ke(j),lt(j,"link",e),j._p=new Promise(function(H,G){j.onload=H,j.onerror=G}),j.addEventListener("load",function(){y.loading|=1}),j.addEventListener("error",function(){y.loading|=2}),y.loading|=4,ni(p,t,l)}p={type:"stylesheet",instance:p,count:1,state:y},n.set(o,p)}}}function Oh(e,t){ma.X(e,t);var a=Xl;if(a&&e){var l=dl(a).hoistableScripts,n=kl(e),o=l.get(n);o||(o=a.querySelector($n(n)),o||(e=b({src:e,async:!0},t),(t=Bt.get(n))&&Rr(e,t),o=a.createElement("script"),Ke(o),lt(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(n,o))}}function qh(e,t){ma.M(e,t);var a=Xl;if(a&&e){var l=dl(a).hoistableScripts,n=kl(e),o=l.get(n);o||(o=a.querySelector($n(n)),o||(e=b({src:e,async:!0,type:"module"},t),(t=Bt.get(n))&&Rr(e,t),o=a.createElement("script"),Ke(o),lt(o,"link",e),a.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},l.set(n,o))}}function Of(e,t,a,l){var n=(n=oe.current)?li(n):null;if(!n)throw Error(u(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(t=Vl(a.href),a=dl(n).hoistableStyles,l=a.get(t),l||(l={type:"style",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Vl(a.href);var o=dl(n).hoistableStyles,p=o.get(e);if(p||(n=n.ownerDocument||n,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(e,p),(o=n.querySelector(Gn(e)))&&!o._p&&(p.instance=o,p.state.loading=5),Bt.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Bt.set(e,a),o||Bh(n,e,a,p.state))),t&&l===null)throw Error(u(528,""));return p}if(t&&l!==null)throw Error(u(529,""));return null;case"script":return t=a.async,a=a.src,typeof a=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=kl(a),a=dl(n).hoistableScripts,l=a.get(t),l||(l={type:"script",instance:null,count:0,state:null},a.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(u(444,e))}}function Vl(e){return'href="'+Mt(e)+'"'}function Gn(e){return'link[rel="stylesheet"]['+e+"]"}function qf(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Bh(e,t,a,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),lt(t,"link",a),Ke(t),e.head.appendChild(t))}function kl(e){return'[src="'+Mt(e)+'"]'}function $n(e){return"script[async]"+e}function Bf(e,t,a){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Mt(a.href)+'"]');if(l)return t.instance=l,Ke(l),l;var n=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ke(l),lt(l,"style",n),ni(l,a.precedence,e),t.instance=l;case"stylesheet":n=Vl(a.href);var o=e.querySelector(Gn(n));if(o)return t.state.loading|=4,t.instance=o,Ke(o),o;l=qf(a),(n=Bt.get(n))&&Dr(l,n),o=(e.ownerDocument||e).createElement("link"),Ke(o);var p=o;return p._p=new Promise(function(y,j){p.onload=y,p.onerror=j}),lt(o,"link",l),t.state.loading|=4,ni(o,a.precedence,e),t.instance=o;case"script":return o=kl(a.src),(n=e.querySelector($n(o)))?(t.instance=n,Ke(n),n):(l=a,(n=Bt.get(o))&&(l=b({},a),Rr(l,n)),e=e.ownerDocument||e,n=e.createElement("script"),Ke(n),lt(n,"link",l),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(u(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,ni(l,a.precedence,e));return t.instance}function ni(e,t,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=l.length?l[l.length-1]:null,o=n,p=0;p<l.length;p++){var y=l[p];if(y.dataset.precedence===t)o=y;else if(o!==n)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=a.nodeType===9?a.head:a,t.insertBefore(e,t.firstChild))}function Dr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Rr(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var si=null;function Uf(e,t,a){if(si===null){var l=new Map,n=si=new Map;n.set(a,l)}else n=si,l=n.get(a),l||(l=new Map,n.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),n=0;n<a.length;n++){var o=a[n];if(!(o[Fl]||o[nt]||e==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var p=o.getAttribute(t)||"";p=e+p;var y=l.get(p);y?y.push(o):l.set(p,[o])}}return l}function wf(e,t,a){e=e.ownerDocument||e,e.head.insertBefore(a,t==="title"?e.querySelector("head > title"):null)}function Uh(e,t,a){if(a===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Lf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Pn=null;function wh(){}function Lh(e,t,a){if(Pn===null)throw Error(u(475));var l=Pn;if(t.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=Vl(a.href),o=e.querySelector(Gn(n));if(o){e=o._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=ii.bind(l),e.then(l,l)),t.state.loading|=4,t.instance=o,Ke(o);return}o=e.ownerDocument||e,a=qf(a),(n=Bt.get(n))&&Dr(a,n),o=o.createElement("link"),Ke(o);var p=o;p._p=new Promise(function(y,j){p.onload=y,p.onerror=j}),lt(o,"link",a),t.instance=o}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(l.count++,t=ii.bind(l),e.addEventListener("load",t),e.addEventListener("error",t))}}function Gh(){if(Pn===null)throw Error(u(475));var e=Pn;return e.stylesheets&&e.count===0&&zr(e,e.stylesheets),0<e.count?function(t){var a=setTimeout(function(){if(e.stylesheets&&zr(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(a)}}:null}function ii(){if(this.count--,this.count===0){if(this.stylesheets)zr(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ci=null;function zr(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ci=new Map,t.forEach($h,e),ci=null,ii.call(e))}function $h(e,t){if(!(t.state.loading&4)){var a=ci.get(e);if(a)var l=a.get(null);else{a=new Map,ci.set(e,a);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<n.length;o++){var p=n[o];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(a.set(p.dataset.precedence,p),l=p)}l&&a.set(null,l)}n=t.instance,p=n.getAttribute("data-precedence"),o=a.get(p)||l,o===l&&a.set(null,n),a.set(p,n),this.count++,l=ii.bind(this),n.addEventListener("load",l),n.addEventListener("error",l),o?o.parentNode.insertBefore(n,o.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var Yn={$$typeof:k,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Ph(e,t,a,l,n,o,p,y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ai(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ai(0),this.hiddenUpdates=Ai(null),this.identifierPrefix=l,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Gf(e,t,a,l,n,o,p,y,j,H,G,Y){return e=new Ph(e,t,a,p,y,j,H,Y),t=1,o===!0&&(t|=24),o=jt(3,null,null,t),e.current=o,o.stateNode=e,t=mc(),t.refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:l,isDehydrated:a,cache:t},gc(o),e}function $f(e){return e?(e=_l,e):_l}function Pf(e,t,a,l,n,o){n=$f(n),l.context===null?l.context=n:l.pendingContext=n,l=ja(t),l.payload={element:a},o=o===void 0?null:o,o!==null&&(l.callback=o),a=_a(e,l,t),a!==null&&(Tt(a,e,t),bn(a,e,t))}function Yf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<t?a:t}}function Hr(e,t){Yf(e,t),(e=e.alternate)&&Yf(e,t)}function Xf(e){if(e.tag===13){var t=jl(e,67108864);t!==null&&Tt(t,e,67108864),Hr(e,67108864)}}var ri=!0;function Yh(e,t,a,l){var n=E.T;E.T=null;var o=L.p;try{L.p=2,Or(e,t,a,l)}finally{L.p=o,E.T=n}}function Xh(e,t,a,l){var n=E.T;E.T=null;var o=L.p;try{L.p=8,Or(e,t,a,l)}finally{L.p=o,E.T=n}}function Or(e,t,a,l){if(ri){var n=qr(l);if(n===null)Sr(e,t,l,ui,a),kf(e,l);else if(kh(n,e,t,a,l))l.stopPropagation();else if(kf(e,l),t&4&&-1<Vh.indexOf(e)){for(;n!==null;){var o=ol(n);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var p=Pa(o.pendingLanes);if(p!==0){var y=o;for(y.pendingLanes|=2,y.entangledLanes|=2;p;){var j=1<<31-xt(p);y.entanglements[1]|=j,p&=~j}Zt(o),(je&6)===0&&(ks=Yt()+500,Bn(0))}}break;case 13:y=jl(o,2),y!==null&&Tt(y,o,2),Zs(),Hr(o,2)}if(o=qr(l),o===null&&Sr(e,t,l,ui,a),o===n)break;n=o}n!==null&&l.stopPropagation()}else Sr(e,t,l,null,a)}}function qr(e){return e=Gi(e),Br(e)}var ui=null;function Br(e){if(ui=null,e=ul(e),e!==null){var t=f(e);if(t===null)e=null;else{var a=t.tag;if(a===13){if(e=h(t),e!==null)return e;e=null}else if(a===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ui=e,null}function Vf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Dm()){case lu:return 2;case nu:return 8;case ts:case Rm:return 32;case su:return 268435456;default:return 32}default:return 32}}var Ur=!1,Ba=null,Ua=null,wa=null,Xn=new Map,Vn=new Map,La=[],Vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kf(e,t){switch(e){case"focusin":case"focusout":Ba=null;break;case"dragenter":case"dragleave":Ua=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":Xn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vn.delete(t.pointerId)}}function kn(e,t,a,l,n,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:a,eventSystemFlags:l,nativeEvent:o,targetContainers:[n]},t!==null&&(t=ol(t),t!==null&&Xf(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function kh(e,t,a,l,n){switch(t){case"focusin":return Ba=kn(Ba,e,t,a,l,n),!0;case"dragenter":return Ua=kn(Ua,e,t,a,l,n),!0;case"mouseover":return wa=kn(wa,e,t,a,l,n),!0;case"pointerover":var o=n.pointerId;return Xn.set(o,kn(Xn.get(o)||null,e,t,a,l,n)),!0;case"gotpointercapture":return o=n.pointerId,Vn.set(o,kn(Vn.get(o)||null,e,t,a,l,n)),!0}return!1}function Qf(e){var t=ul(e.target);if(t!==null){var a=f(t);if(a!==null){if(t=a.tag,t===13){if(t=h(a),t!==null){e.blockedOn=t,Lm(e.priority,function(){if(a.tag===13){var l=Et();l=Mi(l);var n=jl(a,l);n!==null&&Tt(n,a,l),Hr(a,l)}});return}}else if(t===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var a=qr(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);Li=l,a.target.dispatchEvent(l),Li=null}else return t=ol(a),t!==null&&Xf(t),e.blockedOn=a,!1;t.shift()}return!0}function Zf(e,t,a){oi(e)&&a.delete(t)}function Qh(){Ur=!1,Ba!==null&&oi(Ba)&&(Ba=null),Ua!==null&&oi(Ua)&&(Ua=null),wa!==null&&oi(wa)&&(wa=null),Xn.forEach(Zf),Vn.forEach(Zf)}function di(e,t){e.blockedOn===t&&(e.blockedOn=null,Ur||(Ur=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Qh)))}var fi=null;function Kf(e){fi!==e&&(fi=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fi===e&&(fi=null);for(var t=0;t<e.length;t+=3){var a=e[t],l=e[t+1],n=e[t+2];if(typeof l!="function"){if(Br(l||a)===null)continue;break}var o=ol(a);o!==null&&(e.splice(t,3),t-=3,Bc(o,{pending:!0,data:n,method:a.method,action:l},l,n))}}))}function Qn(e){function t(j){return di(j,e)}Ba!==null&&di(Ba,e),Ua!==null&&di(Ua,e),wa!==null&&di(wa,e),Xn.forEach(t),Vn.forEach(t);for(var a=0;a<La.length;a++){var l=La[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<La.length&&(a=La[0],a.blockedOn===null);)Qf(a),a.blockedOn===null&&La.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var n=a[l],o=a[l+1],p=n[dt]||null;if(typeof o=="function")p||Kf(a);else if(p){var y=null;if(o&&o.hasAttribute("formAction")){if(n=o,p=o[dt]||null)y=p.formAction;else if(Br(n)!==null)continue}else y=p.action;typeof y=="function"?a[l+1]=y:(a.splice(l,3),l-=3),Kf(a)}}}function wr(e){this._internalRoot=e}mi.prototype.render=wr.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(u(409));var a=t.current,l=Et();Pf(a,l,e,t,null,null)},mi.prototype.unmount=wr.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Pf(e.current,2,null,e,null,null),Zs(),t[rl]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=ou();e={blockedOn:null,target:e,priority:t};for(var a=0;a<La.length&&t!==0&&t<La[a].priority;a++);La.splice(a,0,e),a===0&&Qf(e)}};var Jf=c.version;if(Jf!=="19.1.1")throw Error(u(527,Jf,"19.1.1"));L.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(u(188)):(e=Object.keys(e).join(","),Error(u(268,e)));return e=g(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var Zh={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pi.isDisabled&&pi.supportsFiber)try{Jl=pi.inject(Zh),bt=pi}catch{}}return Kn.createRoot=function(e,t){if(!d(e))throw Error(u(299));var a=!1,l="",n=dd,o=fd,p=md,y=null;return t!=null&&(t.unstable_strictMode===!0&&(a=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(y=t.unstable_transitionCallbacks)),t=Gf(e,1,!1,null,null,a,l,n,o,p,y,null),e[rl]=t.current,xr(e),new wr(t)},Kn.hydrateRoot=function(e,t,a){if(!d(e))throw Error(u(299));var l=!1,n="",o=dd,p=fd,y=md,j=null,H=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(p=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(j=a.unstable_transitionCallbacks),a.formState!==void 0&&(H=a.formState)),t=Gf(e,1,!0,t,a??null,l,n,o,p,y,j,H),t.context=$f(null),a=t.current,l=Et(),l=Mi(l),n=ja(l),n.callback=null,_a(a,n,l),a=l,t.current.lanes=a,Wl(t,a),Zt(t),e[rl]=t.current,xr(e),new mi(t)},Kn.version="19.1.1",Kn}var im;function lv(){if(im)return $r.exports;im=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(c){console.error(c)}}return r(),$r.exports=av(),$r.exports}var nv=lv();const sv=eu(nv),iv=te.createContext(null),Vr={didCatch:!1,error:null};class cm extends te.Component{constructor(c){super(c),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Vr}static getDerivedStateFromError(c){return{didCatch:!0,error:c}}resetErrorBoundary(){const{error:c}=this.state;if(c!==null){for(var s,u,d=arguments.length,f=new Array(d),h=0;h<d;h++)f[h]=arguments[h];(s=(u=this.props).onReset)===null||s===void 0||s.call(u,{args:f,reason:"imperative-api"}),this.setState(Vr)}}componentDidCatch(c,s){var u,d;(u=(d=this.props).onError)===null||u===void 0||u.call(d,c,s)}componentDidUpdate(c,s){const{didCatch:u}=this.state,{resetKeys:d}=this.props;if(u&&s.error!==null&&cv(c.resetKeys,d)){var f,h;(f=(h=this.props).onReset)===null||f===void 0||f.call(h,{next:d,prev:c.resetKeys,reason:"keys"}),this.setState(Vr)}}render(){const{children:c,fallbackRender:s,FallbackComponent:u,fallback:d}=this.props,{didCatch:f,error:h}=this.state;let m=c;if(f){const g={error:h,resetErrorBoundary:this.resetErrorBoundary};if(typeof s=="function")m=s(g);else if(u)m=te.createElement(u,g);else if(d!==void 0)m=d;else throw h}return te.createElement(iv.Provider,{value:{didCatch:f,error:h,resetErrorBoundary:this.resetErrorBoundary}},m)}}function cv(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return r.length!==c.length||r.some((s,u)=>!Object.is(s,c[u]))}const rv={scene1:{text:`Tu es Elarion, un jeune magicien haut-elfe de la cit d'Ilveras. Tes cheveux argents tombent en mches fines autour de ton visage ple et lgant, et tes yeux d'un bleu profond refltent la curiosit insatiable qui t'anime. Tu portes une robe de mage bleu nuit, brode de runes argentes, et un sac rempli de tes parchemins.

Ilveras est une cit ancienne, btie sur des falaises dominant la mer. Les tours de cristal de l'Acadmie des Arcanes s'lvent au centre, tandis que les ruelles paves et les jardins suspendus tmoignent de la grandeur passe de ce royaume elfique.

Rcemment, tu as entendu des murmures concernant une ancienne prophtie lie  un "symbole perdu" qui pourrait dtenir la cl d'un pouvoir immense. Ces murmures t'ont men  la grande bibliothque de l'Acadmie, le cur de ton apprentissage. En explorant les ranges d'tagres, une trange lueur mane d'un vieux manuscrit sur un pupitre isol. L'air vibre d'une magie ancienne, et tu sens une forte connexion avec cet objet.`,choices:[{text:"Approcher et lire le manuscrit",next:"scene2a"},{text:"Explorer les tagres  la recherche d'un savoir oubli",next:"scene2b"},{text:"Ignorer le manuscrit et sortir dans les jardins de l'acadmie",next:"scene2c"}]},scene2a:{text:"Tu t'approches du manuscrit. Au moment o tu le touches, une page s'efface sous tes yeux et un symbole brlant se grave sur ta paume. La douleur est si intense que tu perds connaissance quelques instants.  ton rveil, le manuscrit est ferm, mais ton esprit est trangement veill. Tu comprends instinctivement que ce symbole est la cl de la prophtie. La piste la plus prometteuse pour dcouvrir sa signification se trouve  Meresnya, la grande cit marchande, connue pour ses rudits et ses archives millnaires.",choices:[{text:"Prparer ton voyage vers Meresnya",next:"scene3"}]},scene2b:{text:"En fouillant les tagres, tu trouves un ancien parchemin qui semble te murmurer des secrets. Il est d'une grande valeur pour un rudit comme toi. Soudain, le manuscrit que tu as vu plus tt attire ton attention  nouveau, il se met  lviter doucement au-dessus du pupitre. Le symbole de la prophtie apparat sur la couverture. Le parchemin que tu as en main te rvle alors que la seule personne qui peut t'aider est un mystrieux matre de la ville de Meresnya.",choices:[{text:"Prendre le parchemin et commencer le voyage",next:{type:"item",item:["potionOfSuperiorHealing","arccheat"],nextScene:"scene3"}}]},scene2c:{text:`Tu ignores le manuscrit et sors dans les jardins suspendus de l'acadmie. L'air est frais et les fleurs exhalent un parfum mystrieux. Cependant, une trange sensation de chaleur sur ta main gauche te fait dcouvrir un symbole magique grav dans ta paume. Tu ralises que c'est un signe, li  la prophtie que tu tudiais. Un vent soudain murmure le nom de "Meresnya", et tu comprends que c'est l que tu dois te rendre pour percer son secret.`,choices:[{text:"Prparer ton voyage vers Meresnya",next:"scene3"}]},scene3:{text:"Alors que tu quittes l'enceinte sacre de l'acadmie pour la route menant  la grande cit de Meresnya, le sentier se rtrcit brusquement. Deux gobelins  la peau vert-de-gris et aux sourires dments surgissent d'un buisson, leurs armes de fortune brandies. Ils grognent et s'avancent vers toi, prts  en dcoudre.",choices:[{text:"Dgainer ton arme et te dfendre !",action:{type:"combat",enemies:[{type:"gobelin",count:2}],enemyPositions:[{x:6,y:0},{x:7,y:0}],next:"scene4"}}]},scene4:{text:"Aprs avoir repouss les gobelins, tu continues ta route, ton cur battant encore la chamade. Tu arrives bientt dans une clairire baigne de soleil. Au centre, une fontaine cristalline chante doucement, ses eaux pures glissant sur la pierre use. C'est un endroit paisible, parfait pour faire une courte pause et reprendre ton souffle.",choices:[{text:"Faire un court repos pour soigner tes blessures",action:{type:"shortRest",nextScene:"scene5"}},{text:"Continuer l'exploration sans t'arrter",next:"scene5"}]},scene5:{text:"Tu pntres dans la Fort de Murmures, un bois ancien et mystrieux o les arbres centenaires tordent leurs branches comme des doigts crochus. Des murmures magiques semblent flotter dans l'air, et tu as l'impression que des cratures invisibles t'observent. Le sentier se divise en deux. L'un, sombre et escarp, s'enfonce entre les arbres, tandis que l'autre est bord de fleurs luminescentes, crant une lueur apaisante.",choices:[{text:"Prendre le chemin sombre",next:"scene6"},{text:"Prendre le chemin lumineux",next:"scene6"}]},scene6:{text:"Peu importe le chemin choisi, tu arrives devant un ancien pont de pierre, enjambant un torrent tumultueux. Un symbole trangement familier est grav dans la pierre. Il reprsente un blason oubli, celui d'un des fondateurs de l'Acadmie des Arcanes, dont l'histoire a t perdue au fil du temps. Le symbole sur ta paume semble ragir, mettant une faible chaleur.",choices:[{text:"Essayer de se souvenir de l'histoire du blason",action:{type:"skillCheck",skill:"histoire",dc:15,onSuccess:"scene6a",onPartialSuccess:"scene6b",onFailure:"scene6c"}},{text:"Ignorer le blason et traverser le pont",next:"scene7"}]},scene6a:{text:"Grce  tes vastes connaissances acadmiques, tu te souviens parfaitement que ce blason appartient  l'un des fondateurs originels de l'Acadmie, un mage excentrique qui a scell un passage secret derrire le pont. En observant attentivement la pierre, tu dcouvres un mcanisme cach. Le symbole sur ta main s'illumine au moment o tu l'actives, et un passage s'ouvre, rvlant un coffre.",choices:[{text:"Ouvrir le coffre",next:{type:"item",item:"potionOfSuperiorHealing",nextScene:"scene7"}}]},scene6b:{text:"Tu te souviens que ce blason est li aux fondateurs de l'Acadmie, mais tu ne parviens pas  te souvenir des dtails prcis. En touchant la pierre, tu sens une lgre vibration qui rsonne avec le symbole sur ta main, mais tu ne parviens pas  activer le mcanisme. Tu n'as d'autre choix que de continuer ton chemin.",choices:[{text:"Continuer l'exploration",next:"scene7"}]},scene6c:{text:"Le blason ne te dit absolument rien. En touchant la pierre, une dcharge lectrique te parcourt, te laissant un peu tourdi. Le symbole sur ta main reste silencieux. Il vaut mieux ne pas insister et continuer ton chemin.",choices:[{text:"Continuer l'exploration",next:"scene7"}]},scene7:{text:"Aprs avoir travers le pont, tu longes le torrent. Tu remarques un petit trsor dissimul dans une crevasse : une fiole de potion de soins et un ancien parchemin. Le parchemin brille d'une faible lueur magique, tu sens qu'il pourrait amliorer tes capacits.",choices:[{text:"Les ranger dans mon sac !",next:{type:"item",item:["potionOfHealing","scrollOfIntelligence"],nextScene:"scene8"}}]},scene8:{text:"Un jeune guerrier au regard dtermin apparat sur ton chemin. Il se nomme Tyrion. Il porte une armure de cuir souple use par les voyages et te propose de l'accompagner vers les ruines de Valdoria, une ancienne cit maudite, pour y chercher une relique perdue de son ordre. Tu sens qu'il a besoin d'aide, et son chemin pourrait galement t'en apprendre plus sur le mystrieux symbole grav sur ta main.",choices:[{text:"Accepter la proposition et faire quipe avec Tyrion",next:{type:"ally",ally:"Tyrion",nextScene:"scene9"}},{text:"Refuser l'offre et continuer seul",next:"scene9"}]},scene9:{text:"Aprs des heures de marche, tu arrives devant les ruines anciennes de Valdoria, un lieu charg d'histoire et de lgendes. Les vestiges de ce qui fut autrefois une cit majestueuse s'tendent  perte de vue, des murs effondrs et des arches brises se dressant comme les squelettes d'un gant endormi. L'air, trangement immobile, est imprgn de l'odeur de la pierre humide, de la terre et d'un effluve mtallique qui te glace le sang : le parfum de la mort. Une aura magique palpable mane de l'ensemble du site, comme si les chos des sorts passs continuaient de vibrer dans le silence. Deux chemins s'offrent  toi : l'un s'enfonce dans les entrailles des ruines, l'autre contourne prudemment la zone.",choices:[{text:"T'aventurer plus profondment dans les ruines",next:"scene10"},{text:"Continuer ton chemin et contourner les ruines",next:"scene12"}]},scene10:{text:"Ignorant les avertissements de ton instinct, tu t'engages dans l'alle principale des ruines. Les btiments, rduits  l'tat de carcasses de pierre, te rappellent des histoires oublies de batailles et de puissantes magies. Soudain, un craquement macabre brise le silence. Deux silhouettes squelettiques, animes par une force obscure, mergent des dcombres d'une ancienne taverne. Leurs os jaunis par le temps, leurs orbites vides fixes sur toi, elles brandissent des pes rouilles. Ces gardiens d'outre-tombe semblent prts  dfendre ce lieu jusqu' ce que leurs derniers os tombent en poussire.",choices:[{text:"Prparer ton arme et te dfendre !",action:{type:"combat",enemies:[{type:"squelette",count:2}],enemyPositions:[{x:0,y:0},{x:7,y:0}],next:"scene11"}}]},scene11:{text:"Aprs un combat acharn contre les gardiens d'outre-tombe, tu parviens  les vaincre. Leurs ossements s'effondrent sur le sol en une poigne de poussire. Le silence revient, encore plus lourd qu'avant. Tu dcides de fouiller les restes de la taverne et dcouvres, cach sous une dalle brise, un coffre vermoulu.  l'intrieur, un peu d'or et une fiole de potion de soin. Mais surtout, une ancienne carte partiellement brle indique le chemin vers une crypte situe plus loin dans les ruines. C'est peut-tre la piste qui te mnera  la vrit sur le symbole.",choices:[{text:"Prendre les objets et suivre le chemin de la crypte",next:{type:"item",item:"potionOfHealing",nextScene:"scene13"}},{text:"Ignorer la carte et faire demi-tour",next:"scene12"}]},scene12:{text:"Tu dcides de ne pas t'attarder dans cet endroit lugubre et fais le tour des ruines. Le chemin est long et parsem d'embches naturelles, mais tu vites le combat. Finalement, tu rejoins la route principale. Tu as l'impression d'avoir vit un danger, mais aussi d'avoir laiss derrire toi un secret bien gard. Le murmure des ruines s'loigne derrire toi, et tu continues ta route vers la prochaine tape.",choices:[{text:"Continuer l'aventure",next:"scene13"}]},scene13:{text:"Un sentier mne  une caverne mystrieuse, dont l'entre est masque par un rideau de lierre. L'air qui en mane est pais et charg de magie, avec une lgre odeur de souffre. Tu sens une prsence malveillante et un danger imminent qui t'attirent, comme si le mystre du symbole de ta main tait li  ce lieu.",choices:[{text:"Essayer de percevoir le danger",action:{type:"skillCheck",skill:"perception",dc:14,onSuccess:"scene13a",onPartialSuccess:"scene13b",onFailure:"scene13c"}},{text:"Rentrer directement dans la caverne",next:"scene14"}]},scene13a:{text:"Grce  tes sens d'elfe aiguiss et  ta concentration, tu perois clairement des bruits de pas et des chuchotements venant de l'intrieur de la caverne. Tu sens que des cratures t'attendent  l'afft, prtes  bondir. Le symbole sur ta paume s'illumine et une potion de sagesse tombe  tes pieds. Tu te prpares  un combat imminent.",choices:[{text:"Se tenir prt",next:{type:"item",item:"scrollOfSagesse",nextScene:"scene14"}}]},scene13b:{text:"Tu entends des bruits tranges venant de la caverne, comme des raclements de pierre et des chuchotements lointains, mais tu ne peux pas identifier clairement le danger. Tu dcides de rester sur tes gardes, sans savoir exactement  quoi t'attendre.",choices:[{text:"Rentrer dans la caverne",next:"scene14"}]},scene13c:{text:"Malgr tes efforts, tu n'entends rien de suspect. Le silence de la caverne te semble trompeur. Tu te sens un peu imprudent, mais tu dcides de continuer malgr tout, le symbole sur ta main te brlant lgrement.",choices:[{text:"Rentrer dans la caverne",next:"scene14"}]},scene14:{text:" l'intrieur de la caverne, l'odeur de soufre est plus forte. Deux diablotins surgissent des ombres, tout feu tout flamme, leurs corps de cratures infernales s'agitant de rage. Ils gardent l'entre de la salle principale et se jettent sur toi, prts  t'attaquer.",choices:[{text:"Engager le combat",action:{type:"combat",enemies:[{type:"diablotin",count:2}],enemyPositions:[{x:5,y:0},{x:6,y:1}],next:"scene15"}}]},scene15:{text:"Aprs le combat, tu trouves un lac magique qui scintille dans l'obscurit. Ses eaux mettent une lumire bleute et les vapeurs qui s'en chappent apaisent ton esprit. L'endroit est parfait pour te rgnrer compltement et panser tes blessures.",choices:[{text:"Faire un repos long (rcupre tous les PV et les ressources de classe)",action:{type:"longRest",nextScene:"scene16"}},{text:"Continuer l'exploration",next:"scene16"}]},scene16:{text:"Ressourc, tu explores un ancien temple cach au fond de la caverne. Des runes mystiques sont graves dans les murs, mettant une nergie sombre mais fascinante. L'une d'elles, en particulier, semble vibrer en harmonie avec le symbole sur ta main, dgageant une forte nergie dmoniaque.",choices:[{text:"tudier les runes",next:"scene17"},{text:"Ignorer et avancer",next:"scene17"}]},scene17:{text:"Au centre du temple, un Diable pineux, une crature dmoniaque  l'apparence de reptile, apparat dans un nuage de fume. Il se tient droit et t'observe, ses yeux brlants te fixant intensment. D'une voix caverneuse, il te dfie, voulant tester ta matrise des sorts et ton courage.",choices:[{text:"Combattre le Diable pineux",action:{type:"combat",enemies:[{type:"diable",count:1}],next:"scene18"}}]},scene18:{text:"La bataille est intense, mais tu parviens  vaincre la crature. Alors qu'elle disparat en poussire, tu trouves un parchemin de l'agilit qui renforce ta dextrit, ainsi que des notes sur l'art de la prestidigitation, laisses par un ancien mage qui a peut-tre lui aussi combattu le Diable pineux.",choices:[{text:"Prendre les parchemins",next:{type:"item",item:["scrollOfDexterity","bookArtHeal"],nextScene:"scene19"}}]},scene19:{text:"Alors que tu te prpares  quitter le temple, la voix d'un de tes matres de l'acadmie rsonne dans la caverne. Il te retrouve, impressionn par tes exploits et le chemin que tu as parcouru seul. Il te rvle que le symbole est la clef d'un ancien pouvoir, mais que de grands dangers t'attendent. Il te remet une dernire aide avant que vos chemins se sparent.",choices:[{text:"Accepter l'aide du Matre",next:{type:"item",item:["scrollOfDexterity","scrollOfIntelligence"],nextScene:"scene20"}}]},scene20:{text:"Aprs un dernier change, ton Matre te fait ses adieux. Tu quittes le temple et la caverne, laissant derrire toi les ruines de Valdoria. Le chemin vers Meresnya est long, et la route s'tend devant toi sous un ciel crpusculaire. Le symbole sur ta paume met une douce chaleur, comme une boussole interne te guidant vers ton destin. Tu t'engages sur la grande route, le cur rempli d'une nouvelle dtermination.",choices:[{text:"Continuer le voyage",next:"scene21"}]},scene21:{text:`Le lendemain, aprs une nuit de marche, tu arrives  une auberge isole au carrefour de deux routes. L'auberge "Le Dragon Endormi" est un refuge pour les voyageurs fatigus.  l'intrieur, un vieil homme aux yeux vifs te propose une carte. Il te dit que la route principale est plus sre mais plus longue, tandis qu'un sentier  travers les Marais de la Lune est plus court, mais rempli de btes et de dangers.`,choices:[{text:"Prendre la route principale (plus sre, mais plus longue)",next:"scene22"},{text:"Prendre le sentier des Marais (plus courte, mais plus dangereuse)",next:"scene23"}]},scene22:{text:"Tu dcides de prendre la route principale, plus longue mais plus sre. Aprs une journe de marche paisible, tu arrives sans encombre aux portes de Meresnya. La cit est immense, ses murs de marbre blanc s'lvent majestueusement, et l'animation de la ville se fait dj entendre.",choices:[{text:"Entrer dans la cit",next:"scene24"}]},scene23:{text:"Tu t'engages sur le sentier des Marais de la Lune. L'air est lourd et humide, et une brume persistante enveloppe les lieux. Soudain, un bruit de frottement se fait entendre, et une Crature de la Boue, une masse informe de terre et de vase, se dresse devant toi, ses yeux luisants de malice. Elle t'attaque !",choices:[{text:"Combattre la Crature de la Boue",action:{type:"combat",enemies:[{type:"mephiteBoueux",count:1}],enemyPositions:[{x:6,y:0}],next:"scene24"}}]},scene24:{text:"Tu te retrouves enfin aux portes de Meresnya. La cit s'tend devant toi, une mtropole bouillonnante de vie. Des marchands crient leurs offres, des mages changent des secrets, et l'architecture grandiose tmoigne de la richesse et du savoir qui s'y trouvent. Le symbole sur ta main t'indique que tu es au bon endroit. Ta qute pour percer son mystre peut enfin commencer.",choices:[{text:"Chercher un rudit pour t'aider",next:"scene1"}]}},rm=r=>{let c;const s=new Set,u=(v,b)=>{const x=typeof v=="function"?v(c):v;if(!Object.is(x,c)){const M=c;c=b??(typeof x!="object"||x===null)?x:Object.assign({},c,x),s.forEach(T=>T(c,M))}},d=()=>c,m={setState:u,getState:d,getInitialState:()=>g,subscribe:v=>(s.add(v),()=>s.delete(v))},g=c=r(u,d,m);return m},uv=r=>r?rm(r):rm,ov=r=>r;function dv(r,c=ov){const s=ze.useSyncExternalStore(r.subscribe,ze.useCallback(()=>c(r.getState()),[r,c]),ze.useCallback(()=>c(r.getInitialState()),[r,c]));return ze.useDebugValue(s),s}const um=r=>{const c=uv(r),s=u=>dv(c,u);return Object.assign(s,c),s},Ni=r=>r?um(r):um,om={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1},es=new Map,hi=r=>{const c=es.get(r);return c?Object.fromEntries(Object.entries(c.stores).map(([s,u])=>[s,u.getState()])):{}},fv=(r,c,s)=>{if(r===void 0)return{type:"untracked",connection:c.connect(s)};const u=es.get(s.name);if(u)return{type:"tracked",store:r,...u};const d={connection:c.connect(s),stores:{}};return es.set(s.name,d),{type:"tracked",store:r,...d}},mv=(r,c)=>{if(c===void 0)return;const s=es.get(r);s&&(delete s.stores[c],Object.keys(s.stores).length===0&&es.delete(r))},pv=r=>{var c,s;if(!r)return;const u=r.split(`
`),d=u.findIndex(h=>h.includes("api.setState"));if(d<0)return;const f=((c=u[d+1])==null?void 0:c.trim())||"";return(s=/.+ (.+) .+/.exec(f))==null?void 0:s[1]},hv=(r,c={})=>(s,u,d)=>{const{enabled:f,anonymousActionType:h,store:m,...g}=c;let v;try{v=(f??(om?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!v)return r(s,u,d);const{connection:b,...x}=fv(m,v,g);let M=!0;d.setState=(N,R,A)=>{const q=s(N,R);if(!M)return q;const k=A===void 0?{type:h||pv(new Error().stack)||"anonymous"}:typeof A=="string"?{type:A}:A;return m===void 0?(b?.send(k,u()),q):(b?.send({...k,type:`${m}/${k.type}`},{...hi(g.name),[m]:d.getState()}),q)},d.devtools={cleanup:()=>{b&&typeof b.unsubscribe=="function"&&b.unsubscribe(),mv(g.name,m)}};const T=(...N)=>{const R=M;M=!1,s(...N),M=R},_=r(d.setState,u,d);if(x.type==="untracked"?b?.init(_):(x.stores[x.store]=d,b?.init(Object.fromEntries(Object.entries(x.stores).map(([N,R])=>[N,N===x.store?_:R.getState()])))),d.dispatchFromDevtools&&typeof d.dispatch=="function"){let N=!1;const R=d.dispatch;d.dispatch=(...A)=>{(om?"production":void 0)!=="production"&&A[0].type==="__setState"&&!N&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),N=!0),R(...A)}}return b.subscribe(N=>{var R;switch(N.type){case"ACTION":if(typeof N.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return kr(N.payload,A=>{if(A.type==="__setState"){if(m===void 0){T(A.state);return}Object.keys(A.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format.
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const q=A.state[m];if(q==null)return;JSON.stringify(d.getState())!==JSON.stringify(q)&&T(q);return}d.dispatchFromDevtools&&typeof d.dispatch=="function"&&d.dispatch(A)});case"DISPATCH":switch(N.payload.type){case"RESET":return T(_),m===void 0?b?.init(d.getState()):b?.init(hi(g.name));case"COMMIT":if(m===void 0){b?.init(d.getState());return}return b?.init(hi(g.name));case"ROLLBACK":return kr(N.state,A=>{if(m===void 0){T(A),b?.init(d.getState());return}T(A[m]),b?.init(hi(g.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return kr(N.state,A=>{if(m===void 0){T(A);return}JSON.stringify(d.getState())!==JSON.stringify(A[m])&&T(A[m])});case"IMPORT_STATE":{const{nextLiftedState:A}=N.payload,q=(R=A.computedStates.slice(-1)[0])==null?void 0:R.state;if(!q)return;T(m===void 0?q:q[m]),b?.send(null,A);return}case"PAUSE_RECORDING":return M=!M}return}}),_},Ci=hv,kr=(r,c)=>{let s;try{s=JSON.parse(r)}catch(u){console.error("[zustand devtools middleware] Could not parse the received json",u)}s!==void 0&&c(s)},vv=r=>(c,s,u)=>{const d=u.subscribe;return u.subscribe=(h,m,g)=>{let v=h;if(m){const b=g?.equalityFn||Object.is;let x=h(u.getState());v=M=>{const T=h(M);if(!b(x,T)){const _=x;m(x=T,_)}},g?.fireImmediately&&m(x,x)}return d(v)},r(c,s,u)},gv=vv;function yv(r,c){let s;try{s=r()}catch{return}return{getItem:d=>{var f;const h=g=>g===null?null:JSON.parse(g,void 0),m=(f=s.getItem(d))!=null?f:null;return m instanceof Promise?m.then(h):h(m)},setItem:(d,f)=>s.setItem(d,JSON.stringify(f,void 0)),removeItem:d=>s.removeItem(d)}}const Zr=r=>c=>{try{const s=r(c);return s instanceof Promise?s:{then(u){return Zr(u)(s)},catch(u){return this}}}catch(s){return{then(u){return this},catch(u){return Zr(u)(s)}}}},bv=(r,c)=>(s,u,d)=>{let f={storage:yv(()=>localStorage),partialize:N=>N,version:0,merge:(N,R)=>({...R,...N}),...c},h=!1;const m=new Set,g=new Set;let v=f.storage;if(!v)return r((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${f.name}', the given storage is currently unavailable.`),s(...N)},u,d);const b=()=>{const N=f.partialize({...u()});return v.setItem(f.name,{state:N,version:f.version})},x=d.setState;d.setState=(N,R)=>{x(N,R),b()};const M=r((...N)=>{s(...N),b()},u,d);d.getInitialState=()=>M;let T;const _=()=>{var N,R;if(!v)return;h=!1,m.forEach(q=>{var k;return q((k=u())!=null?k:M)});const A=((R=f.onRehydrateStorage)==null?void 0:R.call(f,(N=u())!=null?N:M))||void 0;return Zr(v.getItem.bind(v))(f.name).then(q=>{if(q)if(typeof q.version=="number"&&q.version!==f.version){if(f.migrate){const k=f.migrate(q.state,q.version);return k instanceof Promise?k.then(ce=>[!0,ce]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,q.state];return[!1,void 0]}).then(q=>{var k;const[ce,F]=q;if(T=f.merge(F,(k=u())!=null?k:M),s(T,!0),ce)return b()}).then(()=>{A?.(T,void 0),T=u(),h=!0,g.forEach(q=>q(T))}).catch(q=>{A?.(void 0,q)})};return d.persist={setOptions:N=>{f={...f,...N},N.storage&&(v=N.storage)},clearStorage:()=>{v?.removeItem(f.name)},getOptions:()=>f,rehydrate:()=>_(),hasHydrated:()=>h,onHydrate:N=>(m.add(N),()=>{m.delete(N)}),onFinishHydration:N=>(g.add(N),()=>{g.delete(N)})},f.skipHydration||_(),T||M},xv=bv,$a={"Projectile Magique":{name:"Projectile Magique",level:0,school:"vocation",castingTime:"1 action",range:"36 mtres",description:"Vous crez trois flchettes faites d'nergie magique brillante. Chacune touche une crature de votre choix, situe  porte et dans votre champ de vision. Une flchette inflige 1d4+1 dgts de force  la cible. Toutes les flchettes frappent leur cible en mme temps, sachant que vous pouvez toutes les diriger contre une seule et mme crature ou les rpartir entre plusieurs.",damage:{dice:"1d4",bonus:1,type:"force"},projectiles:3,requiresAttackRoll:!1,castableOutOfCombat:!1},"Trait de Feu":{name:"Trait de Feu",level:1,school:"vocation",castingTime:"1 action",range:"36 mtres",duration:"instantane",description:"Vous lancez un trait enflamm sur une crature ou un objet  porte. Faites une attaque de sort  distance contre la cible. Si vous touchez, elle subit 1d10 dgts de feu. Si le sort touche un objet inflammable qui n'est ni port ni transport, il s'embrase.",damage:{dice:"1d10",bonus:0,type:"feu"},projectiles:1,requiresAttackRoll:!0,castableOutOfCombat:!1},"Rayon de givre":{name:"Rayon de givre",level:0,school:"vocation",castingTime:"1 action",range:"18 mtres",description:"Un rayon de lumire d'un blanc bleut file vers une crature  porte. Faites une attaque de sort  distance contre la cible. Si vous la touchez, elle subit 1d8 dgts de froid et sa vitesse est rduite de 3 mtres jusqu'au dbut de votre prochain tour.",damage:{dice:"1d8",bonus:0,type:"froid"},projectiles:1,requiresAttackRoll:!0,castableOutOfCombat:!1},"Rayon Ardent":{name:"Rayon Ardent",level:2,school:"vocation",castingTime:"1 action",range:"36 mtres",description:"Vous crez trois rayons de feu et les projetez sur des cibles  porte. Vous pouvez les diriger contre une mme cible ou contre des cibles diffrentes. Faites une attaque de sort  distance pour chaque rayon. Si vous touchez, la cible reoit 2d6 dgts.",damage:{dice:"2d6",bonus:0,type:"feu"},projectiles:3,requiresAttackRoll:!0,castableOutOfCombat:!1},"Boule de Feu":{name:"Boule de Feu",level:2,school:"vocation",castingTime:"1 action",range:"45 mtres",description:"Une boule de feu explose dans une sphre de 6 mtres de rayon centre sur un point  porte. Chaque crature dans la zone doit faire un jet de sauvegarde de Dextrit. En cas d'chec, elle subit 8d6 dgts de feu, ou la moiti en cas de russite.",damage:{dice:"8d6",bonus:0,type:"feu"},areaOfEffect:{shape:"sphere",radius:20},savingThrow:{ability:"dexterite",dc:"spell"},requiresAttackRoll:!1,castableOutOfCombat:!1,projectiles:1},"Armure du Mage":{name:"Armure du Mage",level:1,school:"Abjuration",castingTime:"1 action",range:"Toucher",description:"Vous touchez une crature consentante et non-vtue d'une armure. Sa Classe d'Armure devient 13 + son modificateur de Dextrit.",requiresAttackRoll:!1,castableOutOfCombat:!0}},vi={wizard:{name:"Elarion",level:1,currentXP:0,race:"Haut Elfe",class:"Magicien",historic:"rudit de l'Acadmie",maxHP:12,currentHP:12,ac:10,initiative:0,speed:"9m",proficiencyBonus:2,hitDice:1,hitDiceType:6,type:"player",stats:{force:10,dexterite:15,constitution:12,intelligence:16,sagesse:13,charisme:12},proficiencies:{saves:["intelligence","sagesse"],skills:["arcane","histoire","investigation","perspicacite"]},weaponProficiencies:["simple"],spellcasting:{ability:"intelligence",spellSlots:{},knownSpells:[],cantrips:["Projectile Magique","Rayon de givre"],preparedSpells:["Armure du Mage"],activeSpells:{}},weapons:["dagger"],inventory:[]},warrior:{name:"Gareth",level:1,currentXP:0,race:"Humain",class:"Guerrier",historic:"Soldat Vtran",maxHP:18,currentHP:18,ac:16,initiative:0,speed:"9m",proficiencyBonus:2,hitDice:1,hitDiceType:10,type:"player",stats:{force:16,dexterite:13,constitution:15,intelligence:10,sagesse:12,charisme:14},proficiencies:{saves:["force","constitution"],skills:["athletisme","intimidation","perception","survie"]},weaponProficiencies:["simple","martial"],armorProficiencies:["light","medium","heavy","shields"],weapons:["longsword","shortbow","heavybow","dagger"],armor:"chainmail",shield:!0,inventory:[]},rogue:{name:"Lyra",level:1,currentXP:0,race:"Halfelin",class:"Roublard",historic:"Criminel",maxHP:14,currentHP:14,ac:13,initiative:0,speed:"7.5m",proficiencyBonus:2,hitDice:1,hitDiceType:8,type:"player",stats:{force:15,dexterite:16,constitution:14,intelligence:13,sagesse:12,charisme:8},proficiencies:{saves:["dexterite","intelligence"],skills:["acrobaties","discretion","escamotage","investigation","perception","persuasion","tromperie"]},weaponProficiencies:["simple","longsword","rapier","shortsword","lightCrossbow"],armorProficiencies:["light"],weapons:["rapier","shortbow","dagger"],armor:"leather",specialAbilities:{sneakAttack:{name:"Attaque Sournoise",description:"1d6 dgts supplmentaires si avantage ou alli adjacent",damage:"1d6",level:1},expertise:{name:"Expertise",description:"Double le bonus de matrise pour certaines comptences",skills:["discretion","escamotage"]}},inventory:[]},paladin:{name:"Elara",level:1,currentXP:0,race:"Elfe",class:"Paladin",historic:"Templier",maxHP:16,currentHP:16,ac:18,initiative:0,speed:"9m",proficiencyBonus:2,hitDice:1,hitDiceType:10,type:"player",stats:{force:14,dexterite:12,constitution:14,intelligence:10,sagesse:13,charisme:16},proficiencies:{saves:["force","charisme"],skills:["athletisme","intimidation","medecine","persuasion"]},weaponProficiencies:["simple","martial"],armorProficiencies:["light","medium","heavy","shields"],weapons:["longsword","shield"],armor:"chainmail",shield:!0,inventory:[]}},Sv={1:{1:2},2:{1:3},3:{1:4,2:2},4:{1:4,2:3},5:{1:4,2:3,3:2}},Oe=r=>Math.floor((r-10)/2),yi=r=>Math.floor(Math.random()*r)+1,jv=()=>yi(20),Wn=(r=0)=>jv()+r,Zl=r=>{if(!r||!r.includes("d"))return 0;const[c,s]=r.split("d").map(Number);let u=0;for(let d=0;d<c;d++)u+=yi(s);return u},Ut=(r,c)=>Math.abs(r.x-c.x)+Math.abs(r.y-c.y),_v=""+new URL("tyrion-BGb9Hy2n.jpg",import.meta.url).href,xm={Tyrion:{name:"Tyrion",level:1,race:"Humain",class:"Jeune Guerrier",historic:"Chercheur de Reliques",maxHP:10,currentHP:10,ac:13,initiative:0,speed:"9m",proficiencyBonus:2,hitDice:1,hitDiceType:6,type:"companion",stats:{force:16,dexterite:15,constitution:13,intelligence:12,sagesse:10,charisme:12},movement:6,image:_v,attacks:[{name:"son pe Courte",type:"melee",range:1,description:"Une attaque avec une pe courte.",damageDice:"1d6",damageType:"tranchant",stat:"force"}],inventory:[]}};class $e{static getProficiencyBonus(c){return Math.ceil(c/4)+1}static getSpellSaveDC(c){if(!c.spellcasting)return 8;const s=this.getSpellcastingAbility(c),u=Oe(c.stats[s]),d=this.getProficiencyBonus(c.level);return 8+u+d}static getSpellcastingAbility(c){return c.spellcasting?c.spellcasting.ability||(()=>{switch(c.class){case"Magicien":return"intelligence";case"Clerc":return"sagesse";case"Barde":return"charisme";case"Rdeur":case"Paladin":return"sagesse";case"Sorcier":case"Occultiste":return"charisme";default:return"intelligence"}})():"intelligence"}static getAttackBonus(c,s){const u=this.getProficiencyBonus(c.level);switch(s.actionType){case"spell":const d=this.getSpellcastingAbility(c);return Oe(c.stats[d])+u;case"weapon":let f=s.stat||"force";if(s.properties?.includes("finesse")){const g=Oe(c.stats.force);f=Oe(c.stats.dexterite)>g?"dexterite":"force"}const m=this.isWeaponProficient(c,s)?u:0;return Oe(c.stats[f])+m;default:return 0}}static isWeaponProficient(c,s){if(!c.weaponProficiencies)return!1;if(c.weaponProficiencies.includes(s.id))return!0;const u=["dagger","club","quarterstaff","lightCrossbow","shortbow"].includes(s.id);return!!(u&&c.weaponProficiencies.includes("simple")||!u&&c.weaponProficiencies.includes("martial"))}static levelUp(c){const s=c.level+1;if(s>20)return c;const u=this.getHitDie(c.class),d=Oe(c.stats.constitution),f=Math.max(1,yi(u)+d),h={...c,level:s,maxHP:c.maxHP+f,currentHP:c.currentHP+f,currentXP:c.currentXP||c.experience||0,proficiencyBonus:this.getProficiencyBonus(s)};if(c.spellcasting){const m=this.generateSpellSlotsForLevel(s,c.class);h.spellcasting={...c.spellcasting,spellSlots:m}}return console.log(` Level up successful: ${c.level}  ${s}, HP: ${c.maxHP}  ${h.maxHP}`),h}static generateSpellSlotsForLevel(c,s){const u={1:{1:{max:2,used:0}},2:{1:{max:3,used:0}},3:{1:{max:4,used:0},2:{max:2,used:0}},4:{1:{max:4,used:0},2:{max:3,used:0}},5:{1:{max:4,used:0},2:{max:3,used:0},3:{max:2,used:0}}};return s==="Magicien"||s==="Clerc"?u[c]||{}:{}}static getHitDie(c){return{Guerrier:10,Magicien:6,Roublard:8,Clerc:8,Rdeur:10,Paladin:10}[c]||8}static shortRest(c,s=0){if(s<=0)return c;const u=this.getHitDie(c.class),d=Oe(c.stats.constitution);let f=0;const h=c.hitDice||Math.floor(c.level/2),m=Math.min(s,h);for(let g=0;g<m;g++)f+=Math.max(1,yi(u)+d);return{...c,currentHP:Math.min(c.maxHP,c.currentHP+f),hitDice:h-m}}static longRest(c){const s={...c,currentHP:c.maxHP,hitDice:c.level};return c.spellcasting&&(s.spellcasting={...c.spellcasting,slotsRemaining:{...c.spellcasting.slotsTotal}}),s}static takeDamage(c,s){return{...c,currentHP:Math.max(0,c.currentHP-s)}}static heal(c,s){return{...c,currentHP:Math.min(c.maxHP,c.currentHP+s)}}static consumeSpellSlot(c,s){if(!c.spellcasting||s<=0)return c;const u=c.spellcasting.slotsRemaining[s]||0;return u<=0?c:{...c,spellcasting:{...c.spellcasting,slotsRemaining:{...c.spellcasting.slotsRemaining,[s]:u-1}}}}static addExperience(c,s){const d=(c.currentXP||c.experience||0)+s;return this.processLevelUps({...c,currentXP:d})}static processLevelUps(c){let s={...c},u=0;const d=10,f=20;for(;u<d&&s.level<f;){const h=this.getXPToNextLevel(s.level);if(s.currentXP>=h){const m=s.level;if(s=this.levelUp(s),s.level<=m){console.error(` Level up failed to increase level (${m}  ${s.level})`);break}console.log(` Level up ! ${m}  ${s.level} (XP: ${s.currentXP}/${h})`),u++}else break}return u>=d&&console.warn(" Limite de montes de niveau atteinte pour viter une boucle infinie"),s}static getXPForLevel(c){return[0,300,900,2700,6500,14e3,23e3,34e3,48e3,64e3,85e3][c-1]||0}static getXPToNextLevel(c){return this.getXPForLevel(c+1)}}class It{static processSceneAction(c,s){if(typeof c=="string")return c;if(typeof c=="object")switch(c.type){case"combat":return this.processCombatAction(c);case"longRest":return this.processRestAction(c,s,"long");case"shortRest":return this.processRestAction(c,s,"short");case"item":return this.processItemAction(c,s);case"ally":return this.processAllyAction(c,s);case"skillCheck":return this.processSkillCheck(c,s);default:return console.warn("Type d'action inconnu :",c.type),null}return null}static processCombatAction(c){return{...c,enemies:c.enemies,enemyPositions:c.enemyPositions,next:c.next}}static processRestAction(c,s,u){return u==="long"?s.startLongRest(c.nextScene):s.startShortRest(c.nextScene),null}static processItemAction(c,s){return s.handleItemGain(c.item),c.nextScene}static processAllyAction(c,s){const u=xm[c.ally];return u?(s.setPlayerCompanion(u),s.addCombatMessage(`${u.name} te rejoint dans ton aventure !`,"upgrade"),c.nextScene):(console.error(`Compagnon '${c.ally}' introuvable.`),null)}static processSkillCheck(c,s){return s.handleSkillCheck(c.skill,c.dc,c.onSuccess,c.onPartialSuccess,c.onFailure),null}static performSkillCheck(c,s,u){const f=this.getSkillAbilityMapping()[s]||"force",h=getModifier(c.stats[f]),m=$e.getProficiencyBonus(c.level),g=c.skillProficiencies?.includes(s)||!1,v=h+(g?m:0),b=Wn(v);return{roll:b,total:b,dc:u,success:b>=u,skill:s,ability:f,modifier:v,proficient:g}}static getSkillAbilityMapping(){return{Acrobaties:"dexterite",Arcanes:"intelligence",Athletisme:"force",Discrtion:"dexterite",Dressage:"sagesse",Escamotage:"dexterite",Histoire:"intelligence",Insight:"sagesse",Intimidation:"charisme",Investigation:"intelligence",Mdecine:"sagesse",Nature:"intelligence",Perception:"sagesse",Persuasion:"charisme",Religion:"intelligence",Representation:"charisme",Survie:"sagesse",Tromperie:"charisme"}}static calculateCombatExperience(c,s=1){const u=c.reduce((d,f)=>d+({0:10,"1/8":25,"1/4":50,"1/2":100,1:200,2:450,3:700,4:1100,5:1800}[f.challengeRating]||100),0);return Math.floor(u/s)}static processCombatRewards(c,s,u=null){const d=u?2:1,f=this.calculateCombatExperience(c,d),h={xpGained:f,messages:[],leveledUp:!1},m=$e.getXPToNextLevel(s.level);return s.experience+f>=m&&(h.leveledUp=!0,h.messages.push(`${s.name} gagne un niveau !`)),h.messages.push(`+${f} XP`),h}static isChoiceAvailable(c,s){return c.conditions?c.conditions.every(u=>{switch(u.type){case"hasItem":return s.playerCharacter.inventory.some(f=>f.id===u.itemId);case"hasCompanion":return s.playerCompanion!==null;case"minLevel":return s.playerCharacter.level>=u.level;case"hasSpell":return[...s.playerCharacter.spellcasting?.cantrips||[],...s.playerCharacter.spellcasting?.preparedSpells||[]].includes(u.spellName);case"statCheck":return s.playerCharacter.stats[u.stat]>=u.value;default:return!0}}):!0}static generateId(c="id"){return`${c}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static deepClone(c){if(c===null||typeof c!="object")return c;if(c instanceof Date)return new Date(c.getTime());if(c instanceof Array)return c.map(u=>this.deepClone(u));const s={};for(const u in c)c.hasOwnProperty(u)&&(s[u]=this.deepClone(c[u]));return s}}const Nv={acrobaties:"dexterite",arcane:"intelligence",athletisme:"force",discretion:"dexterite",dressage:"sagesse",escamotage:"dexterite",histoire:"intelligence",intimidation:"charisme",intuition:"sagesse",investigation:"intelligence",medecine:"sagesse",nature:"intelligence",perception:"sagesse",persuasion:"charisme",religion:"intelligence",representation:"charisme",survie:"sagesse",tromperie:"charisme"},ha=Ni(Ci((r,c)=>({gamePhase:"character-selection",currentScene:"scene2b",sceneHistory:[],combatLog:[],isShortResting:!1,isLongResting:!1,nextSceneAfterRest:null,combatKey:0,gameMessages:[],setGamePhase:s=>r({gamePhase:s}),setCurrentScene:s=>r(u=>({currentScene:s,sceneHistory:[...u.sceneHistory,u.currentScene]})),goToPreviousScene:()=>r(s=>s.sceneHistory.length>0?{currentScene:s.sceneHistory[s.sceneHistory.length-1],sceneHistory:s.sceneHistory.slice(0,-1)}:s),addCombatMessage:(s,u="default")=>r(d=>({combatLog:[...d.combatLog,{id:It.generateId("msg"),message:s,type:u,timestamp:new Date}]})),clearCombatLog:()=>r({combatLog:[]}),addGameMessage:(s,u="info")=>r(d=>({gameMessages:[...d.gameMessages,{id:It.generateId("game-msg"),message:s,type:u,timestamp:new Date}]})),clearGameMessages:()=>r({gameMessages:[]}),startShortRest:s=>r({isShortResting:!0,nextSceneAfterRest:s}),endShortRest:()=>r(s=>({isShortResting:!1,currentScene:s.nextSceneAfterRest,nextSceneAfterRest:null})),startLongRest:s=>r({isLongResting:!0,nextSceneAfterRest:s}),endLongRest:()=>r(s=>({isLongResting:!1,currentScene:s.nextSceneAfterRest,nextSceneAfterRest:null})),incrementCombatKey:()=>r(s=>({combatKey:s.combatKey+1})),handleSkillCheck:(s,u,d,f,h,m)=>{const g=Nv[s],v=m.stats[g],b=Oe(v),M=m.proficiencies?.skills?.includes(s)||!1?m.proficiencyBonus:0,T=b+M,_=Wn(T),N=_,{addCombatMessage:R,setCurrentScene:A}=c();R(`Test de ${s} (${g}): ${_-T} (+${T} de bonus) = ${N}. DD: ${u}`,"skill-check");let q=h;N>=u?(q=d,R(" Russite !","success")):N>=u-5&&f?(q=f,R(" Russite partielle","partial")):(q=h,R(" chec","failure")),A(q)},updateSpellSlotsForLevel:s=>{if(!s.spellcasting)return s;const u=c().getSpellSlotsForLevel(s.level,s.class),d=c().getKnownSpells(s.level,s.class);return{...s,spellcasting:{...s.spellcasting,spellSlots:u,knownSpells:d}}},getSpellSlotsForLevel:(s,u)=>{let d=s;switch(u){case"Magicien":break;case"Paladin":case"Rdeur":d=Math.max(0,Math.floor((s-1)/2));break;case"Guerrier":if(s>=3)d=Math.max(0,Math.floor((s-2)/3));else return{};break;case"Roublard":if(s>=3)d=Math.max(0,Math.floor((s-2)/3));else return{};break;default:return{}}const f=Sv[d];if(!f)return{};const h={};for(const m in f)h[m]={total:f[m],used:0};return h},getKnownSpells:(s,u)=>{const d=c().getSpellSlotsForLevel(s,u),f=d?Math.max(...Object.keys(d).map(Number)):0,h=Object.values($a).filter(v=>{switch(u){case"Magicien":return!0;case"Guerrier":return v.school==="Abjuration"||v.school==="vocation"||v.level===0;case"Roublard":return v.school==="Enchantement"||v.school==="Illusion"||v.level===0;default:return!1}}),m=h.filter(v=>v.level===0).map(v=>v.name),g=h.filter(v=>v.level>0&&v.level<=f).map(v=>v.name);return[...m,...g]}}),{name:"game-store"}));class bi{getSpellAttackBonus(c){if(!c.spellcasting)return 0;const s=c.spellcasting.ability||"intelligence",u=Oe(c.stats[s]),d=this.getProficiencyBonus(c.level);return u+d}getSpellSaveDC(c){if(!c.spellcasting)return 8;const s=c.spellcasting.ability||"intelligence",u=Oe(c.stats[s]),d=this.getProficiencyBonus(c.level);return 8+u+d}getProficiencyBonus(c){return Math.ceil(c/4)+1}getKnownSpells(c){return c.spellcasting?.knownSpells?c.spellcasting.knownSpells.map(s=>this.getSpellData(s)).filter(Boolean).filter(s=>s.level>0):[]}getPreparedSpells(c){return c.spellcasting?.preparedSpells?c.spellcasting.preparedSpells.map(s=>{const u=this.getSpellData(s);return u&&this.isSpellAvailableForClass(u,c)?u:null}).filter(Boolean):[]}getCantrips(c){return c.spellcasting?.cantrips?c.spellcasting.cantrips.map(s=>this.getSpellData(s)).filter(Boolean):[]}getMaxPreparedSpells(c){if(!c.spellcasting)return 0;const s=c.spellcasting.ability||"intelligence";return Math.max(1,Oe(c.stats[s]))+c.level}getSpellSlots(c){return!c.spellcasting?.spellSlots||Object.keys(c.spellcasting.spellSlots).length===0?this.generateDefaultSpellSlots(c):c.spellcasting.spellSlots}generateDefaultSpellSlots(c){const s={},u=c.level,f={1:{1:2},2:{1:3},3:{1:4,2:2},4:{1:4,2:3},5:{1:4,2:3,3:2},6:{1:4,2:3,3:3},7:{1:4,2:3,3:3,4:1},8:{1:4,2:3,3:3,4:2},9:{1:4,2:3,3:3,4:3,5:1},10:{1:4,2:3,3:3,4:3,5:2},11:{1:4,2:3,3:3,4:3,5:2,6:1},12:{1:4,2:3,3:3,4:3,5:2,6:1},13:{1:4,2:3,3:3,4:3,5:2,6:1,7:1},14:{1:4,2:3,3:3,4:3,5:2,6:1,7:1},15:{1:4,2:3,3:3,4:3,5:2,6:1,7:1,8:1},16:{1:4,2:3,3:3,4:3,5:2,6:1,7:1,8:1},17:{1:4,2:3,3:3,4:3,5:2,6:1,7:1,8:1,9:1},18:{1:4,2:3,3:3,4:3,5:3,6:1,7:1,8:1,9:1},19:{1:4,2:3,3:3,4:3,5:3,6:2,7:1,8:1,9:1},20:{1:4,2:3,3:3,4:3,5:3,6:2,7:2,8:1,9:1}}[Math.min(u,20)]||{};for(const[h,m]of Object.entries(f))s[h]={max:m,used:0,available:m};return s}getSpellData(c){if($a[c])return{id:c,...$a[c]};const s=Object.entries($a).find(([u,d])=>d.name===c||d.name?.toLowerCase()===c?.toLowerCase());return s?{id:s[0],...s[1]}:null}filterSpells(c,s){return c.filter(u=>{if(s.school!=="all"&&u.school!==s.school)return!1;if(s.level!=="all"){const d=parseInt(s.level);if(u.level!==d)return!1}if(s.searchTerm){const d=s.searchTerm.toLowerCase(),f=u.name?.toLowerCase().includes(d),h=u.description?.toLowerCase().includes(d),m=u.school?.toLowerCase().includes(d);if(!f&&!h&&!m)return!1}return s.castableOnly&&u.level===0,!0})}sortSpells(c,s="level"){return[...c].sort((u,d)=>{switch(s){case"name":return(u.name||"").localeCompare(d.name||"");case"level":return u.level!==d.level?u.level-d.level:(u.name||"").localeCompare(d.name||"");case"school":return u.school!==d.school?(u.school||"").localeCompare(d.school||""):(u.name||"").localeCompare(d.name||"");case"range":return this.compareRange(u.range,d.range);default:return 0}})}compareRange(c,s){const u=d=>!d||d==="Personnel"?0:d==="Contact"?1:d.includes("mtres")?parseInt(d.match(/\d+/)?.[0]||"0"):999999;return u(c)-u(s)}canCastSpell(c,s,u=null){if(!c||!s.spellcasting)return!1;if(c.level===0)return!0;const d=this.getSpellSlots(s),f=u||c.level;for(let h=f;h<=9;h++){const m=d[h];if(m&&m.available>0)return!0}return!1}getAvailableCastingLevels(c,s){if(c.level===0)return[0];const u=this.getSpellSlots(s),d=[];for(let f=c.level;f<=9;f++){const h=u[f];h&&h.available>0&&d.push(f)}return d}calculateSpellDamage(c,s){if(!c.damage)return null;const u=c.damage,d=Math.max(0,s-c.level);return c.scalingDamage&&d>0?u+c.scalingDamage*d:u}getSchoolsOfMagic(){return["Abjuration","Invocation","Divination","Enchantement","vocation","Illusion","Ncromancie","Transmutation"]}getGrimoireSpells(c){if(!c.spellcasting)return[];const s=[];return Object.entries($a).forEach(([u,d])=>{this.isSpellAvailableForClass(d,c)&&s.push({id:u,...d,isPrepared:c.spellcasting.preparedSpells?.includes(u)||!1})}),this.sortSpells(s,"level")}getUnpreparedSpells(c){if(!c.spellcasting)return[];const s=this.getGrimoireSpells(c),u=c.spellcasting.preparedSpells||[];return s.filter(d=>d.level>0&&!u.includes(d.id))}isSpellAvailableForClass(c,s){if(c.level===0)return s.level>=1;const u={1:1,2:3,3:5,4:7,5:9,6:11,7:13,8:15,9:17};return s.level>=(u[c.level]||20)}isSpellActive(c,s){return s.activeEffects?s.activeEffects.some(d=>d.sourceSpellId===c||d.name===c):!1}canPrepareSpell(c,s){if(!s.spellcasting||s.spellcasting.preparedSpells?.includes(c))return!1;const u=s.spellcasting.preparedSpells?.length||0,d=this.getMaxPreparedSpells(s);if(u>=d)return!1;const f=this.getSpellData(c);return!f||f.level===0?!1:this.isSpellAvailableForClass(f,s)}canUnprepareSpell(c,s){return s.spellcasting?.preparedSpells?s.spellcasting.preparedSpells.includes(c):!1}}class gi{static castSpell(c,s,u=[],d={}){const f={success:!1,character:c,messages:[],effects:[]},h=this.validateSpellcast(c,s);if(!h.success)return f.messages.push(h.message),f;s.level>0&&(f.character=this.consumeSpellSlot(f.character,s.level));const m=this.processSpellEffects(s,u,c,d);return f.effects=m.effects,f.messages=[...f.messages,...m.messages],f.character=this.applySpellEffectsToCharacter(f.character,s,m),f.success=!0,f}static validateSpellcast(c,s){if(!c.spellcasting)return{success:!1,message:"Ce personnage ne peut pas lancer de sorts"};if(![...c.spellcasting.cantrips||[],...c.spellcasting.preparedSpells||[]].includes(s.id))return{success:!1,message:"Sort non prpar"};if(s.level>0){const f=new bi().getSpellSlots(c);let h=!1;for(let m=s.level;m<=9;m++){const g=f[m];if(g&&g.available>0){h=!0;break}}if(!h)return{success:!1,message:"Aucun emplacement de sort disponible"}}return{success:!0}}static processSpellEffects(c,s,u,d={}){const f={effects:[],messages:[]};if(c.damage){const h=this.processDamageSpell(c,s,u,d);f.effects.push(...h.effects),f.messages.push(...h.messages)}if(c.healing){const h=this.processHealingSpell(c,s,u,d);f.effects.push(...h.effects),f.messages.push(...h.messages)}if(c.effects){const h=this.processUtilitySpell(c,s,u,d);f.effects.push(...h.effects),f.messages.push(...h.messages)}return f}static processDamageSpell(c,s,u,d){const f={effects:[],messages:[]};return s.forEach(h=>{let m=Zl(c.damage.dice)+(c.damage.bonus||0);if(d.spellLevel&&d.spellLevel>c.level){const g=d.spellLevel-c.level;if(c.damage.scaling){const v=Zl(c.damage.scaling)*g;m+=v}}f.effects.push({type:"damage",target:h,amount:m,damageType:c.damage.type}),f.messages.push(`${h.name} subit ${m} dgts ${c.damage.type} de ${c.name}`)}),f}static processHealingSpell(c,s,u,d){const f={effects:[],messages:[]};return s.forEach(h=>{let m=Zl(c.healing.dice)+(c.healing.bonus||0);if(d.spellLevel&&d.spellLevel>c.level){const g=d.spellLevel-c.level;if(c.healing.scaling){const v=Zl(c.healing.scaling)*g;m+=v}}f.effects.push({type:"healing",target:h,amount:m}),f.messages.push(`${h.name} rcupre ${m} points de vie grce  ${c.name}`)}),f}static processUtilitySpell(c,s,u,d){const f={effects:[],messages:[]};return c.effects.forEach(h=>{switch(h.type){case"ac_bonus":s.forEach(m=>{f.effects.push({type:"ac_modifier",target:m,modifier:h.value,duration:c.duration}),f.messages.push(`${m.name} gagne +${h.value} CA grce  ${c.name}`)});break;case"advantage":s.forEach(m=>{f.effects.push({type:"advantage",target:m,category:h.category,duration:c.duration}),f.messages.push(`${m.name} a l'avantage sur ${h.category} grce  ${c.name}`)});break;case"condition":s.forEach(m=>{f.effects.push({type:"condition",target:m,condition:h.condition,duration:c.duration}),f.messages.push(`${m.name} est affect par ${h.condition} (${c.name})`)});break;default:console.warn(`Unknown spell effect type: ${h.type}`)}}),f}static getAvailableSpellSlots(c){return c.spellcasting?c.spellcasting.slotsRemaining||{}:{}}static applySpellEffectsToCharacter(c,s,u){let d={...c};if(s.name==="Armure du Mage"){const h=13+Math.floor((c.stats.dexterite-10)/2);d={...d,ac:h,armorClass:h,activeEffects:[...c.activeEffects||[],{id:`armure_du_mage_${Date.now()}`,sourceSpellId:"Armure du Mage",name:"Armure du Mage",type:"spell_effect",description:"CA = 13 + modificateur de Dextrit",startTime:new Date}]}}return u.effects.forEach(f=>{if(f.target===c||f.target?.id===c.id)switch(f.type){case"ac_modifier":d.armorClass=(d.armorClass||10)+f.modifier;break;case"healing":d.currentHP=Math.min(d.maxHP,d.currentHP+f.amount);break}}),d}static consumeSpellSlot(c,s){if(!c.spellcasting||s<=0)return c;const d=new bi().getSpellSlots(c);let f=null;for(let m=s;m<=9;m++){const g=d[m];if(g&&g.available>0){f=m;break}}if(!f)return c;const h={...d,[f]:{...d[f],used:d[f].used+1,available:d[f].available-1}};return{...c,spellcasting:{...c.spellcasting,spellSlots:h}}}static getPreparedSpells(c){return c.spellcasting?[...c.spellcasting.cantrips||[],...c.spellcasting.preparedSpells||[]]:[]}static getMaxPreparedSpells(c){if(!c.spellcasting)return 0;const s=$e.getSpellcastingAbility(c),u=Math.max(1,Oe(c.stats[s]));return c.level+u}static prepareSpell(c,s){if(!c.spellcasting)return null;const u=c.spellcasting.preparedSpells||[],d=this.getMaxPreparedSpells(c);return u.includes(s)?c:u.length>=d?null:{...c,spellcasting:{...c.spellcasting,preparedSpells:[...u,s]}}}static unprepareSpell(c,s){if(!c.spellcasting)return c;const u=c.spellcasting.preparedSpells||[];return{...c,spellcasting:{...c.spellcasting,preparedSpells:u.filter(d=>d!==s)}}}}const Jn={potionOfHealing:{name:"Potion de Soin",description:"Restaure 2d4 + 2 PV.",type:"consumable",iconType:"heal",weight:.5,use:r=>{const c=Math.floor(Math.random()*4)+1+Math.floor(Math.random()*4)+1+2,s=Math.min(r.maxHP,r.currentHP+c);return{...r,currentHP:s}},message:r=>`Tu as bu une Potion de Soin et rcupres ${r} PV.`},potionOfSuperiorHealing:{name:"Potion de Soin Suprieure",description:"Restaure 4d4 + 4 PV.",type:"consumable",iconType:"heal",weight:.5,use:r=>{let c=0;for(let u=0;u<4;u++)c+=Math.floor(Math.random()*4)+1;c+=4;const s=Math.min(r.maxHP,r.currentHP+c);return{...r,currentHP:s}},message:r=>`Tu as bu une Potion de Soin Suprieure et rcupres ${r} PV.`},scrollOfStrength:{name:"Parchemin de Force",description:"Augmente ta Force de 2 de manire permanente.",type:"consumable",iconType:"upgrade",weight:.1,use:r=>({...r,stats:{...r.stats,force:r.stats.force+2}}),message:()=>"Tu as lu un Parchemin de Force et te sens plus puissant !"},scrollOfDexterity:{name:"Parchemin d'Agilit",description:"Augmente ta Dextrit de 2 de manire permanente.",type:"consumable",iconType:"upgrade",weight:.1,use:r=>({...r,stats:{...r.stats,dexterite:r.stats.dexterite+2}}),message:()=>"Tu as lu un Parchemin d'Agilit et te sens plus agile !"},scrollOfConstitution:{name:"Parchemin de Vitalit",description:"Augmente ta Constitution de 2 de manire permanente et tes PV maximum de 2.",type:"consumable",iconType:"upgrade",weight:.1,use:r=>({...r,stats:{...r.stats,constitution:r.stats.constitution+2},maxHP:r.maxHP+2,currentHP:r.currentHP+2}),message:()=>"Tu as lu un Parchemin de Vitalit, ton corps se renforce et tu gagnes des PV !"},scrollOfIntelligence:{name:"Parchemin d'Intelligence",description:"Augmente ton Intelligence de 2 de manire permanente.",type:"consumable",iconType:"upgrade",rarity:"lgendaire",weight:.1,use:r=>({...r,stats:{...r.stats,intelligence:r.stats.intelligence+2}}),message:()=>"Tu as lu un Parchemin d'Intelligence et tes facults augmentent !"},scrollOfSagesse:{name:"Parchemin de Sagesse",description:"Augmente ta Sagesse de 2 de manire permanente.",type:"consumable",iconType:"upgrade",weight:.1,use:r=>({...r,stats:{...r.stats,sagesse:r.stats.sagesse+2}}),message:()=>"Tu as lu un Parchemin de Sagesse et te sens plus sae !"},bookArtHeal:{name:"Livre l'art de la prestidigitation",description:"C'est un jolie livre vous devriez le lire",type:"consumable",iconType:"heal",weight:.8,use:r=>{const s=Math.min(r.maxHP,r.currentHP+2);return{...r,currentHP:s}},message:()=>"Tu as lu ce livre pendant une heure et tu t'es un peu repos, tu as rcuperer 2PV"}},cl={dagger:{name:"Dague",id:"dagger",type:"weapon",category:"melee",damage:{dice:"1d4",bonus:0,type:"force"},damageType:"perforant",properties:["finesse","light","thrown"],range:{melee:1,thrown:"20/60"},stat:"force",description:"Une petite lame facile  manier."},club:{name:"Gourdin",id:"club",type:"weapon",category:"melee",damage:{dice:"1d4",bonus:0,type:"force"},damageType:"contondant",properties:["light"],range:{melee:1},stat:"force",description:"Un simple bton de bois."},quarterstaff:{name:"Bton",id:"quarterstaff",type:"weapon",category:"melee",damage:{dice:"1d6",bonus:0,type:"force"},damageType:"contondant",properties:["versatile"],range:{melee:1},stat:"force",description:"Un bton solide pouvant tre mani  une ou deux mains."},longsword:{name:"pe longue",id:"longsword",type:"weapon",category:"melee",damage:{dice:"1d8",bonus:0,type:"force"},damageType:"tranchant",properties:["versatile"],range:{melee:1},stat:"force",description:"Une pe classique, quilibre et polyvalente."},shortsword:{name:"pe courte",id:"shortsword",type:"weapon",category:"melee",damage:{dice:"1d6",bonus:0,type:"force"},damageType:"perforant",properties:["finesse","light"],range:{melee:1},stat:"force",description:"Une lame courte et rapide."},rapier:{name:"Rapire",id:"rapier",type:"weapon",category:"melee",damage:{dice:"1d8",bonus:0,type:"dexterite"},damageType:"perforant",properties:["finesse"],range:{melee:1},stat:"dexterite",description:"Une pe d'estoc lgante et prcise."},battleaxe:{name:"Hache de bataille",id:"battleaxe",type:"weapon",category:"melee",damage:{dice:"1d8",bonus:0,type:"force"},damageType:"tranchant",properties:["versatile"],range:{melee:1},stat:"force",description:"Une hache lourde et tranchante."},warhammer:{name:"Marteau de guerre",id:"warhammer",type:"weapon",category:"melee",damage:{dice:"1d8",bonus:0,type:"force"},damageType:"contondant",properties:["versatile"],range:{melee:1},stat:"force",description:"Un marteau lourd conu pour le combat."},greatsword:{name:"pe  deux mains",id:"greatsword",type:"weapon",category:"melee",damage:{dice:"2d6",bonus:0,type:"force"},damageType:"tranchant",properties:["heavy","two-handed"],range:{melee:1},stat:"force",description:"Une pe massive ncessitant les deux mains."},lightCrossbow:{name:"Arbalte lgre",id:"lightCrossbow",type:"weapon",category:"ranged",damage:{dice:"1d8",bonus:0,type:"dexterite"},damageType:"perforant",properties:["ammunition","loading","two-handed"],range:{ranged:"80/320"},stat:"dexterite",description:"Une arbalte facile  manier."},shortbow:{name:"Arc court",id:"shortbow",type:"weapon",category:"ranged",damage:{dice:"1d6",bonus:0,type:"dexterite"},damageType:"perforant",properties:["ammunition","two-handed"],range:{ranged:"80/320"},stat:"dexterite",description:"Un arc compact et maniable."},longbow:{name:"Arc long",id:"longbow",type:"weapon",category:"ranged",damage:{dice:"1d8",bonus:0,type:"dexterite"},damageType:"perforant",properties:["ammunition","heavy","two-handed"],range:{ranged:"150/600"},stat:"dexterite",description:"Un arc puissant avec une longue porte."},heavybow:{name:"Arc lourd",id:"heavybow",type:"weapon",category:"ranged",damage:{dice:"1d10",bonus:0,type:"dexterite"},damageType:"perforant",properties:["ammunition","heavy","two-handed"],range:{ranged:"200/800"},stat:"dexterite",description:"Un arc de guerre exceptionnellement puissant, difficile  bander."},heavyCrossbow:{name:"Arbalte lourde",id:"heavyCrossbow",type:"weapon",category:"ranged",damage:{dice:"1d10",bonus:0,type:"dexterite"},damageType:"perforant",properties:["ammunition","heavy","loading","two-handed"],range:{ranged:"100/400"},stat:"dexterite",description:"Une arbalte puissante mais lente  recharger."},arccheat:{name:"Arc Du MJ",id:"arccheat",type:"weapon",category:"ranged",damage:{dice:"1d10",bonus:50,type:"intelligence"},damageType:"perforant",properties:["ammunition","heavy","two-handed"],range:{ranged:"150/600"},stat:"intelligence",description:"Un arc d'une grande prcision, fabriqu  partir du bois d'un arbre ancien.",rarity:"Lgendaire",weight:3}},ot=r=>(r.playerCharacter&&(r.selectedCharacter=r.playerCharacter),r),Wt=Ni(gv(Ci((r,c)=>({playerCharacter:null,playerCompanion:null,selectedCharacter:null,activeEffects:[],temporaryModifiers:{},experienceGains:[],levelUpPending:!1,levelUpData:null,setPlayerCharacter:s=>r(ot({playerCharacter:s?It.deepClone(s):null})),setPlayerCompanion:s=>r({playerCompanion:s?It.deepClone(s):null}),updatePlayerCharacter:s=>r(u=>({playerCharacter:u.playerCharacter?{...u.playerCharacter,...s}:null})),updatePlayerCompanion:s=>r(u=>({playerCompanion:u.playerCompanion?{...u.playerCompanion,...s}:null})),takeDamagePlayer:s=>r(u=>{if(!u.playerCharacter)return u;const d=$e.takeDamage(u.playerCharacter,s);return ot({playerCharacter:d})}),takeDamageCompanion:s=>r(u=>u.playerCompanion?{playerCompanion:$e.takeDamage(u.playerCompanion,s)}:u),healPlayer:s=>r(u=>{if(!u.playerCharacter)return u;const d=$e.heal(u.playerCharacter,s);return ot({playerCharacter:d})}),healCompanion:s=>r(u=>u.playerCompanion?{playerCompanion:$e.heal(u.playerCompanion,s)}:u),shortRestPlayer:(s=0)=>r(u=>{if(!u.playerCharacter)return u;const d=$e.shortRest(u.playerCharacter,s);return ot({playerCharacter:d})}),longRestPlayer:()=>r(s=>{if(!s.playerCharacter)return s;const u=$e.longRest(s.playerCharacter);return ot({playerCharacter:u})}),longRestCompanion:()=>r(s=>s.playerCompanion?{playerCompanion:$e.longRest(s.playerCompanion)}:s),longRestAll:()=>{const{longRestPlayer:s,longRestCompanion:u}=c();s(),u()},spendHitDie:(s="player")=>r(u=>{const d=s==="player"?u.playerCharacter:u.playerCompanion;if(!d||d.hitDice<=0||d.currentHP>=d.maxHP)return u;const f=d.hitDiceType||8,h=Math.floor((d.stats.constitution-10)/2),m=Math.floor(Math.random()*f)+1,g=Math.max(1,m+h),v=Math.min(d.maxHP,d.currentHP+g),b={...d,currentHP:v,hitDice:d.hitDice-1};return s==="player"?ot({playerCharacter:b}):{playerCompanion:b}}),addExperience:(s,u="player")=>r(d=>{const f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f)return d;console.log(` Adding ${s} XP to ${u} (current level: ${f.level}, current XP: ${f.currentXP||f.experience||0})`);const h=$e.addExperience(f,s);console.log(` After XP gain: level ${h.level}, XP: ${h.currentXP}`);const m={...d};return h.level>f.level&&(console.log(` Level up detected! ${f.level}  ${h.level}`),m.levelUpPending=!0,m.levelUpData={character:u,oldLevel:f.level,newLevel:h.level,hpGained:h.maxHP-f.maxHP}),m.experienceGains=[...d.experienceGains,{id:It.generateId("xp"),amount:s,target:u,timestamp:new Date}],u==="player"?(m.playerCharacter=h,m.selectedCharacter=h):m.playerCompanion=h,m}),confirmLevelUp:()=>r(s=>({levelUpPending:!1,levelUpData:null})),castSpellPlayer:(s,u={})=>r(d=>d.playerCharacter?{playerCharacter:gi.castSpell(d.playerCharacter,s,[],u).character}:d),consumeSpellSlot:(s,u="player")=>r(d=>{const f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f)return d;const h=$e.consumeSpellSlot(f,s);return u==="player"?ot({playerCharacter:h}):{playerCompanion:h}}),prepareSpell:(s,u="player")=>{const d=c(),f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f)return{success:!1,message:`Aucun personnage ${u} trouv`};const h=gi.prepareSpell(f,s);if(!h){const m=f.spellcasting?.preparedSpells||[],g=gi.getMaxPreparedSpells(f);return m.includes(s)?{success:!1,message:`${s} est dj prpar`}:m.length>=g?{success:!1,message:`Limite de sorts prpars atteinte (${g})`}:{success:!1,message:`Impossible de prparer ${s}`}}return r(u==="player"?ot({playerCharacter:h}):{playerCompanion:h}),{success:!0,message:`${s} prpar avec succs`}},unprepareSpell:(s,u="player")=>{const d=c(),f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f)return{success:!1,message:`Aucun personnage ${u} trouv`};const h=gi.unprepareSpell(f,s);return h?(r(u==="player"?ot({playerCharacter:h}):{playerCompanion:h}),{success:!0,message:`${s} retir des sorts prpars`}):{success:!1,message:`Impossible de retirer ${s}`}},equipItem:(s,u="player")=>r(d=>{const f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f)return d;let h=f.inventory?.find(x=>(x.id||x.name||x.nom)===s);if(!h){const x=cl[s];x&&(h={...x,id:s})}if(!h)return d;const m=h.type;if(!["weapon","arme","armor","armure","accessory","accessoire"].includes(m))return d;let v={...f.equipment||{}},b=null;if(m==="weapon"||m==="arme"?b="mainHand":m==="armor"||m==="armure"?b="body":(m==="accessory"||m==="accessoire")&&(b="accessory"),!b)return d;if(v[b]){const x=v[b],M=f.inventory?.some(N=>(N.id||N.name||N.nom)===x);let T=[...f.inventory||[]];if(M){const N=cl[x];N&&T.push({...N,id:x})}v[b]=s,T=T.filter(N=>(N.id||N.name||N.nom)!==s);const _={inventory:T,equipment:v};return u==="player"?ot({playerCharacter:{...f,..._}}):{playerCompanion:{...f,..._}}}else{v[b]=s;const M={inventory:f.inventory?f.inventory.filter(T=>(T.id||T.name||T.nom)!==s):[],equipment:v};return u==="player"?ot({playerCharacter:{...f,...M}}):{playerCompanion:{...f,...M}}}}),unequipItem:(s,u="player")=>r(d=>{const f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f||!f.equipment)return d;const h=f.equipment;let m=null;for(const[M,T]of Object.entries(h))if(T===s){m=M;break}if(!m)return d;const g={...h};delete g[m];const v=cl[s],b=[...f.inventory||[]];v&&b.push({...v,id:s});const x={inventory:b,equipment:g};return u==="player"?ot({playerCharacter:{...f,...x}}):{playerCompanion:{...f,...x}}}),addItemToInventory:(s,u="player")=>r(d=>{const f=u==="player"?d.playerCharacter:d.playerCompanion;if(!f)return d;const h=f.inventory||[],m=s.id||s.name||s.nom,g=s.quantity||1,v=h.findIndex(M=>(M.id||M.name||M.nom)===m);let b;v>=0?(b=[...h],b[v]={...b[v],quantity:(b[v].quantity||1)+g}):b=[...h,{...s,id:s.id||s.name||s.nom||It.generateId("item"),quantity:g}];const x={inventory:b};return u==="player"?ot({playerCharacter:{...f,...x}}):{playerCompanion:{...f,...x}}}),removeItemFromInventory:(s,u="player",d=1)=>r(f=>{const h=u==="player"?f.playerCharacter:f.playerCompanion;if(!h)return f;const m=h.inventory||[],g=m.findIndex(T=>(T.id||T.name||T.nom)===s);if(g===-1)return f;let v=[...m];const b=v[g],x=b.quantity||1;x<=d?v.splice(g,1):v[g]={...b,quantity:x-d};const M={inventory:v};return u==="player"?ot({playerCharacter:{...h,...M}}):{playerCompanion:{...h,...M}}}),useItem:(s,u="player")=>{const d=u==="player"?c().playerCharacter:c().playerCompanion;if(!d)return{success:!1,message:"Personnage non trouv"};const f=d.inventory.find(m=>(m.id||m.name||m.nom)===s);if(!f)return{success:!1,message:"Objet non trouv dans l'inventaire"};const h=Jn[s]||Jn[f.id]||Jn[f.name]||Jn[f.nom];if(h&&h.use)try{const m=h.use(d);return r(u==="player"?{playerCharacter:m,selectedCharacter:m}:{playerCompanion:m}),h.type==="consumable"&&c().removeItemFromInventory(s,u,1),{success:!0,message:typeof h.message=="function"?h.message():h.message,item:h}}catch(m){return console.error("Erreur lors de l'utilisation de l'objet:",m),{success:!1,message:`Erreur: ${m.message}`}}else{if(f.effects){let m={...d},g=`${f.name||f.nom} utilis`;return f.effects.forEach(v=>{switch(v.type){case"heal":const b=v.value;m.currentHP=Math.min(d.maxHP,d.currentHP+b),g=`Vous rcuprez ${b} PV`;break;default:console.warn(`Unknown item effect type: ${v.type}`)}}),r(u==="player"?{playerCharacter:m,selectedCharacter:m}:{playerCompanion:m}),(f.consumable||f.type==="consumable")&&c().removeItemFromInventory(s,u,1),{success:!0,message:g}}return{success:!1,message:"Cet objet ne peut pas tre utilis"}}},addEffect:s=>r(u=>({activeEffects:[...u.activeEffects,{...s,id:s.id||It.generateId("effect"),startTime:new Date}]})),removeEffect:s=>r(u=>({activeEffects:u.activeEffects.filter(d=>d.id!==s)})),clearExpiredEffects:()=>r(s=>{const u=new Date;return{activeEffects:s.activeEffects.filter(d=>d.duration?u-d.startTime<d.duration:!0)}}),consolidateInventory:(s="player")=>r(u=>{const d=s==="player"?u.playerCharacter:u.playerCompanion;if(!d||!d.inventory)return u;const f=[],h=new Map;d.inventory.forEach(g=>{const v=g.id||g.name||g.nom;if(h.has(v)){const b=h.get(v);b.quantity=(b.quantity||1)+(g.quantity||1)}else h.set(v,{...g,quantity:g.quantity||1})}),h.forEach(g=>f.push(g));const m={inventory:f};return s==="player"?ot({playerCharacter:{...d,...m}}):{playerCompanion:{...d,...m}}}),resetCharacters:()=>r({playerCharacter:null,playerCompanion:null,activeEffects:[],temporaryModifiers:{},experienceGains:[],levelUpPending:!1,levelUpData:null}),clearExperienceGains:()=>r({experienceGains:[]})}),{name:"character-store"}))),Kr=8,Jr=6,vt={PLAYER:"player",COMPANION:"companion",ENEMY:"enemy"},Ql=(r,c)=>r>=0&&r<Kr&&c>=0&&c<Jr,xi=(r,c,s,u=[],d=null)=>{if(s.player&&s.player.x===r&&s.player.y===c||s.companion&&s.companion.x===r&&s.companion.y===c)return!0;for(const f of u)if(f.name!==d&&f.currentHP>0){const h=s[f.name];if(h&&h.x===r&&h.y===c)return!0}return!1},dm=(r,c,s)=>{if(!r||!c)return!1;const u=Math.abs(r.x-c.x)+Math.abs(r.y-c.y),d=Cv(s);return u<=d},Cv=r=>{if(r.actionType==="spell"){if(typeof r.range=="string"){if(r.range.includes("mtres")){const c=parseInt(r.range);return Math.floor(c/1.5)}return r.range==="Toucher"?1:12}return r.range||12}if(r.actionType==="weapon"){if(r.category==="melee")return r.range?.melee||1;if(r.category==="ranged"){const c=r.range?.ranged||"80/320",s=parseInt(c.split("/")[0]);return Math.floor(s/5)}return 1}return 1};class Kt{static calculateDamage(c){let s=Zl(c.damageDice)+(c.damageBonus||0),u=`${s} dgts ${c.damageType}`;if(c.secondaryDamageDice){const d=Zl(c.secondaryDamageDice)+(c.secondaryDamageBonus||0);s+=d,u+=` + ${d} dgts ${c.secondaryDamageType} (${s}dmg)`}return{damage:s,message:u}}static getTargetsInRange(c,s,u,d){const{playerCharacter:f,companionCharacter:h,combatEnemies:m,combatPositions:g}=d,v=[];if(!s)return v;const b=dm.getActionRange?dm.getActionRange(u):u.range||1;return c.type===vt.ENEMY&&f?.currentHP>0&&g.player&&Ut(s,g.player)<=b&&v.push({...f,type:vt.PLAYER,position:g.player}),c.type===vt.ENEMY&&h?.currentHP>0&&g.companion&&Ut(s,g.companion)<=b&&v.push({...h,type:vt.COMPANION,position:g.companion}),[vt.PLAYER,vt.COMPANION].includes(c.type)&&m.forEach(x=>{if(x.currentHP>0){const M=g[x.name];M&&Ut(s,M)<=b&&v.push({...x,type:vt.ENEMY,position:M})}}),v}static calculateOptimalMovement(c,s,u){if(!s||c.currentHP<=0)return null;const d=this.findPotentialTargets(c,u);if(d.length===0)return null;const f=d.reduce((b,x)=>{const M=Ut(s,x.position);return!b||M<b.distance?{target:x,distance:M}:b},null);if(!f)return null;const h=this.getIdealDistance(c);if(f.distance<=h)return null;const m=c.movement||6;let g=null,v=-1;for(let b=-m;b<=m;b++)for(let x=-m;x<=m;x++){const M=Math.abs(b)+Math.abs(x);if(M===0||M>m)continue;const T={x:s.x+b,y:s.y+x};if(!Ql(T.x,T.y)||xi(T.x,T.y,u.combatPositions,u.combatEnemies,c.name))continue;const _=Ut(T,f.target.position),R=100-Math.abs(_-h)-M*.1;R>v&&(v=R,g=T)}return g}static findPotentialTargets(c,s){const{playerCharacter:u,companionCharacter:d,combatEnemies:f,combatPositions:h}=s,m=[];return c.type===vt.ENEMY?(u?.currentHP>0&&h.player&&m.push({entity:u,position:h.player}),d?.currentHP>0&&h.companion&&m.push({entity:d,position:h.companion})):f.forEach(g=>{g.currentHP>0&&h[g.name]&&m.push({entity:g,position:h[g.name]})}),m}static getIdealDistance(c){if(!c.attacks)return 1;const s=c.attacks.some(d=>d.type==="ranged"||d.range&&d.range>1),u=c.attacks.some(d=>d.type==="melee"||!d.range||d.range<=1);if(u&&!s)return 1;if(s&&!u){const d=c.attacks.find(f=>f.type==="ranged");return Math.min(4,d?.range||4)}else return 1}static calculateAoESquares(c,s){const u=[];if(!c||!s)return u;switch(s.shape){case"sphere":case"circle":const d=s.size||1;for(let m=c.x-d;m<=c.x+d;m++)for(let g=c.y-d;g<=c.y+d;g++)Ql(m,g)&&Ut(c,{x:m,y:g})<=d&&u.push({x:m,y:g});break;case"cone":const f=s.size||2;for(let m=1;m<=f;m++)for(let g=-m;g<=m;g++){const v=c.x+m,b=c.y+g;Ql(v,b)&&u.push({x:v,y:b})}break;case"line":const h=s.size||3;for(let m=1;m<=h;m++){const g=c.x+m,v=c.y;Ql(g,v)&&u.push({x:g,y:v})}break;default:u.push(c)}return u}static findBestTarget(c,s,u){const{playerCharacter:d,companionCharacter:f,combatPositions:h}=u;if(!s)return console.warn(` Pas de position pour ${c.name}`),null;const m=[];if(c.type===vt.ENEMY?(d&&d.currentHP>0&&h.player&&m.push({type:vt.PLAYER,name:d.name,character:d,position:h.player}),f&&f.currentHP>0&&h.companion&&m.push({type:vt.COMPANION,name:f.name,character:f,position:h.companion})):(c.type===vt.COMPANION||c.type==="companion")&&u.combatEnemies&&u.combatEnemies.forEach(b=>{b.currentHP>0&&h[b.name]&&m.push({type:vt.ENEMY,name:b.name,character:b,position:h[b.name]})}),m.length===0)return console.log(` ${c.name}: Aucune cible vivante trouve`),null;let g=null,v=1/0;return console.log(` ${c.name}  (${s.x}, ${s.y}) value les cibles:`),m.forEach(b=>{const x=Ut(s,b.position);console.log(`   - ${b.name} (${b.type})  (${b.position.x}, ${b.position.y}) - distance: ${x}`),x<v?(v=x,g=b,console.log(`      Nouvelle cible la plus proche: ${b.name}  distance ${x}`)):x===v&&b.type===vt.PLAYER&&(g=b,console.log(`      Mme distance ${x}, priorit au joueur: ${b.name}`))}),g&&(g.distance=v,console.log(` ${c.name} choisit: ${g.name} (${g.type})  distance ${v}`)),g}static validateMovement(c,s,u,d){if(!Ql(u.x,u.y))return console.warn(` Position invalide pour ${c.name}: (${u.x}, ${u.y})`),!1;const{combatPositions:f,combatEnemies:h}=d;if(xi(u.x,u.y,f,h,c.name))return console.warn(` Position occupe pour ${c.name}: (${u.x}, ${u.y})`),!1;const g=Ut(s,u),v=c.movement||6;return g>v?(console.warn(` Mouvement trop loin pour ${c.name}: ${g} > ${v}`),!1):!0}}const Sm={gobelin:{name:"Gobelin",maxHP:7,currentHP:7,ac:15,xp:50,stats:{force:8,dexterite:14,constitution:10,intelligence:10,sagesse:8,charisme:8},attacks:[{name:"son Cimeterre",type:"melee",attackBonus:4,range:1,targets:1,damageDice:"1d6",damageBonus:2,damageType:"tranchant",description:"Attaque au corps  corps avec une arme : +4 au toucher, allonge 1,50 m, une cible. Touch : 5 (1d6 + 2) dgts tranchants."}],image:"https://www.aidedd.org/dnd/images/goblin.jpg"},mephiteBoueux:{name:"Mphite boueux",maxHP:27,currentHP:27,ac:11,xp:50,stats:{force:8,dexterite:12,constitution:12,intelligence:9,sagesse:11,charisme:7},attacks:[{name:"Poing",type:"melee",attackBonus:3,range:1,targets:1,damageDice:"1d6",damageBonus:1,damageType:"contondant",description:"Attaque au corps  corps avec une arme : +3 au toucher, allonge 1,50 m, une crature. Touch : 4 (1d6 + 1) dgts contondants."}],image:"https://www.aidedd.org/dnd/images/mud-mephit.jpg"},kobold:{name:"Kobold",maxHP:5,currentHP:5,ac:12,xp:25,movement:6,stats:{force:8,dexterite:15,constitution:10,intelligence:8,sagesse:8,charisme:8},attacks:[{name:"sa Dague",type:"melee",attackBonus:4,range:1,targets:1,damageDice:"1d4",damageBonus:2,damageType:"perforant",description:"Attaque au corps  corps : +4 au toucher, allonge 1 m, une cible. Touch : 4 (1d4 + 2) dgts perforants."}],image:"https://www.aidedd.org/dnd/images/kobold.jpg"},goule:{name:"Goule",maxHP:22,currentHP:22,ac:12,xp:200,movement:6,stats:{force:13,dexterite:15,constitution:10,intelligence:7,sagesse:10,charisme:6},attacks:[{name:"Griffes",type:"melee",attackBonus:4,range:1,targets:1,damageDice:"2d4",damageBonus:2,damageType:"tranchant",description:"Attaque au corps  corps avec une arme : +4 au toucher, allonge 1,50 m, une cible. Touch : 7 (2d4 + 2) dgts tranchants. Si la cible est une crature autre qu'un elfe ou un mort-vivant, celle-ci doit russir un jet de sauvegarde de Constitution DD 10 pour ne pas tre paralyse pendant 1 minute. La cible peut relancer le jet de sauvegarde  la fin de chacun de ses tours, mettant fin  l'effet qui l'affecte en cas de russite."}],image:"https://www.aidedd.org/dnd/images/ghoul.jpg"},squelette:{name:"Squelette",maxHP:13,currentHP:13,ac:13,xp:50,movement:6,stats:{force:10,dexterite:14,constitution:15,intelligence:6,sagesse:8,charisme:5},attacks:[{name:"son pe courte",type:"melee",attackBonus:4,range:1,targets:1,damageDice:"1d6",damageBonus:2,damageType:"perforant",description:"Attaque au corps  corps : +4 au toucher, allonge 1 m, une cible. Touch : 4 (1d4 + 2) dgts perforants."}],image:"https://www.aidedd.org/dnd/images/skeleton.jpg"},diablotin:{name:"Diablotin",maxHP:10,currentHP:10,ac:13,xp:200,movement:6,stats:{force:6,dexterite:17,constitution:13,intelligence:11,sagesse:12,charisme:14},attacks:[{name:"Dard",type:"melee",attackBonus:5,range:1,targets:1,damageDice:"1d4",damageBonus:3,damageType:"perforants",description:"Attaque au corps  corps : +4 au toucher, allonge 1 m, une cible. Touch : 4 (1d4 + 2) dgts perforants."}],image:"https://www.aidedd.org/dnd/images/imp.jpg"},diable:{name:"Diable pineux",maxHP:22,currentHP:22,ac:13,xp:450,stats:{force:10,dexterite:15,constitution:12,intelligence:11,sagesse:14,charisme:8},movement:8,attackSets:[{name:"Morsure et fourche",attacks:[{name:"Morsure",type:"melee",attackBonus:2,range:1,damageDice:"2d4",damageBonus:0,damageType:"tranchants",description:"Attaque avec ces crocs aceres"},{name:"Fourche",type:"melee",attackBonus:2,range:1,damageDice:"1d6",damageBonus:0,damageType:"perforants",description:"Attaque avec une fourche"}]},{name:"Double pine caudale",attacks:[{name:"pine caudale",type:"ranged",attackBonus:4,range:6,damageDice:"1d4",damageBonus:2,damageType:"perforants",secondaryDamageDice:"1d6",secondaryDamageBonus:0,secondaryDamageType:"feu",description:"Projette une pine de sa queue"},{name:"pine caudale",type:"ranged",attackBonus:4,range:6,damageDice:"1d4",damageBonus:2,damageType:"perforants",secondaryDamageDice:"1d6",secondaryDamageBonus:0,secondaryDamageType:"feu",description:"Projette une pine de sa queue"}]}],image:"https://www.aidedd.org/dnd/images/spined-devil.jpg"}};class Si{initializeCombat(c,s,u){const d=this.createEnemiesFromEncounter(u),f=this.rollInitiative(c,s,d),h=this.initializePositions(c,s,d,u.enemyPositions);return{enemies:d,turnOrder:f,positions:h,currentTurn:0}}createEnemiesFromEncounter(c){if(!c?.enemies?.length)throw new Error("Aucun ennemi dfini dans la rencontre");return c.enemies.flatMap((s,u)=>{const d=Sm[s.type];return d?Array(s.count).fill(null).map((f,h)=>({...d,id:`${s.type}_${u}_${h}`,name:s.count>1?`${d.name} ${h+1}`:d.name,type:"enemy",currentHP:d.currentHP??d.maxHP??10,maxHP:d.maxHP??10,ac:d.ac??10,stats:{...d.stats},attacks:[...d.attacks||[]],image:d.image||"",isAlive:!0})):(console.error(`Template non trouv pour: ${s.type}`),[])})}rollInitiative(c,s,u){const d=[];if(!c||!c.stats)throw console.error("CombatService: playerCharacter ou playerCharacter.stats manquant"),new Error("Personnage joueur requis pour initialiser le combat");const f=this.rollD20()+Oe(c.stats.dexterite);if(d.push({...c,id:"player",type:"player",initiative:f,isAlive:!0}),s){const h=this.rollD20()+Oe(s.stats.dexterite);d.push({...s,id:"companion",type:"companion",initiative:h,isAlive:!0})}return u.forEach(h=>{const m=this.rollD20()+Oe(h.stats.dexterite);d.push({...h,initiative:m})}),d.sort((h,m)=>m.initiative===h.initiative?h.type==="player"?-1:m.type==="player"?1:h.type==="companion"?-1:m.type==="companion"?1:0:m.initiative-h.initiative)}initializePositions(c,s,u,d=null){const f={player:{x:1,y:2},companion:s?{x:0,y:2}:null,playerHasMoved:!1,companionHasMoved:!1};return d?u.forEach((h,m)=>{const g=d[m];g?f[h.id]={x:g.x,y:g.y}:f[h.id]=this.getDefaultEnemyPosition(m,u.length)}):u.forEach((h,m)=>{f[h.id]=this.getDefaultEnemyPosition(m,u.length)}),f}getDefaultEnemyPosition(c,s){const f=Math.floor(4.8),h=8-f;if(s===1)return{x:f+Math.floor(h/2),y:Math.floor(6/2)};const m=Math.min(h,s),g=Math.floor(c/m),v=c%m;return{x:f+v,y:Math.max(1,Math.min(4,g+1))}}executePlayerAction(c,s,u,d,f){const h=[],m={damage:[],effects:[],messages:h};if(!s||!u.length)return h.push({text:"Aucune action ou cible slectionne",type:"error"}),m;switch(s.type){case"attack":return this.executeAttack(c,s,u,m);case"spell":return this.executeSpell(c,s,u,m);default:return h.push({text:`Type d'action inconnu: ${s.type}`,type:"error"}),m}}executeAttack(c,s,u,d){return u.forEach(f=>{const h=this.rollD20(),m=this.getAttackBonus(c,s),g=h+m,v=h===20;if(g>=f.ac||v){let x=this.rollDamage(s.damage);v?(x*=2,d.messages.push({text:` Coup critique ! ${c.name} inflige ${x} dgts  ${f.name} !`,type:"critical"})):d.messages.push({text:` ${c.name} touche ${f.name} et inflige ${x} dgts`,type:"hit"}),d.damage.push({targetId:f.id,damage:x})}else d.messages.push({text:` ${c.name} manque ${f.name} (${g} vs CA ${f.ac})`,type:"miss"})}),d}executeSpell(c,s,u,d){return d.messages.push({text:` ${c.name} lance ${s.name}`,type:"spell"}),u.forEach(f=>{if(s.requiresAttackRoll){const h=this.rollD20(),m=this.getSpellAttackBonus(c),g=h+m,v=h===20;if(g>=f.ac||v){let x=0;s.damage&&(x=this.rollDamage(s.damage.dice)+(s.damage.bonus||0),v&&(x*=2)),d.messages.push({text:` ${s.name} touche ${f.name} et inflige ${x} dgts`,type:v?"critical":"hit"}),d.damage.push({targetId:f.id||f.name,damage:x})}else d.messages.push({text:` ${s.name} manque ${f.name} (${g} vs CA ${f.ac})`,type:"miss"})}else{let h=0;s.damage&&(h=this.rollDamage(s.damage.dice)+(s.damage.bonus||0)),d.messages.push({text:` ${s.name} touche automatiquement ${f.name} et inflige ${h} dgts`,type:"spell-hit"}),d.damage.push({targetId:f.id||f.name,damage:h})}}),d}getAttackBonus(c,s){if(s.attackBonus!==void 0)return s.attackBonus;const u=c.level?Math.ceil(c.level/4)+1:2;if(!c.stats)return console.error(" Character.stats manquant dans getAttackBonus:",c),0;let d="force";s.stat?d=s.stat:(s.category==="ranged"||s.type==="ranged"||s.range&&s.range>1)&&(d="dexterite");const f=c.stats[d];return f===void 0?(console.error(` Stat ${d} manquante pour character:`,c),u):Oe(f)+u}getSpellAttackBonus(c){const s=c.level?Math.ceil(c.level/4)+1:2;if(!c.spellcasting||!c.spellcasting.ability)return s;const u=c.spellcasting.ability,d=c.stats[u];return Oe(d||10)+s}rollDamage(c){const s=c.match(/(\d+)d(\d+)(\+(\d+))?/);if(!s)return 0;const[,u,d,,f]=s;let h=0;for(let m=0;m<parseInt(u);m++)h+=Math.floor(Math.random()*parseInt(d))+1;return h+(parseInt(f)||0)}rollD20(){return Math.floor(Math.random()*20)+1}isDefeated(c){return c.currentHP<=0}checkCombatEnd(c,s,u){const d=this.isDefeated(c),f=s?this.isDefeated(s):!0,h=u.every(m=>this.isDefeated(m));return d&&f?"defeat":h?"victory":null}executeEntityAttack(c,s,u,d){if(!c||!s||!u)return console.error(" Paramtres manquants pour executeEntityAttack"),{success:!1,damage:0};if(u.character&&u.character.currentHP<=0)return console.warn(` ${c.name} tente d'attaquer ${u.name} qui est dj mort`),d(`${c.name} ralise que ${u.name} est dj tomb au combat.`),{success:!1,damage:0};const f=this.rollD20(),h=this.getAttackBonus(c,s);if(isNaN(h))return console.error(" Attack bonus est NaN pour:",c,s),{success:!1,damage:0};const m=f+h,g=f===20,v=u.character?u.character.ac:u.ac||10;if(isNaN(v))return console.error(" Target AC est NaN pour:",u),{success:!1,damage:0};if(m>=v||g){let x=0;return s.damageDice?x=this.rollDamage(s.damageDice)+(s.damageBonus||0):s.damage?x=this.rollDamage(s.damage):x=1,g?(x*=2,d(` Coup critique ! ${c.name} utilise ${s.name} et inflige ${x} dgts  ${u.name} !`,"critical")):d(` ${c.name} utilise ${s.name} et inflige ${x} dgts  ${u.name}`,c.type==="enemy"?"enemy-hit":"companion-hit"),{success:!0,damage:x,critical:g}}else return d(` ${c.name} manque ${u.name} avec ${s.name} (${m} vs CA ${v})`,"miss"),{success:!1,damage:0}}executeEntityMovement(c,s,u,d,f){if(!Kt.validateMovement(c,s,u,d))return console.warn(` Mouvement invalide pour ${c.name}`),f(`${c.name} ne peut pas se dplacer  cette position.`),!1;const m=Math.abs(u.x-s.x)+Math.abs(u.y-s.y);return console.log(` ${c.name} bouge de (${s.x}, ${s.y}) vers (${u.x}, ${u.y}) - distance: ${m}`),!0}}const Jt=Ni(Ci((r,c)=>({isActive:!1,isInitialized:!1,combatPhase:"idle",combatKey:0,encounterData:null,combatEnemies:[],companionCharacter:null,turnOrder:[],currentTurnIndex:0,turnCounter:0,combatPositions:{},showMovementFor:null,showTargetingFor:null,hasMovedThisTurn:!1,playerAction:null,actionTargets:[],selectedAoESquares:[],aoeCenter:null,defeated:!1,victory:!1,totalXpGained:0,initializeCombat:(s,u,d)=>r(f=>{const h=[];s.enemies.forEach((x,M)=>{const T=Sm[x.type];if(!T){console.error(" Template ennemi non trouv:",x.type);return}for(let _=0;_<x.count;_++)h.push({...It.deepClone(T),name:`${T.name} ${_+1}`,id:It.generateId("enemy"),type:"enemy"})});const m=[],g=Wn(Oe(u.stats.dexterite));if(m.push({type:"player",name:u.name,initiative:g,character:u}),d&&d.stats){const x=Wn(Oe(d.stats.dexterite));m.push({type:"companion",name:d.name,initiative:x,character:d})}else console.log(" Pas de compagnon valide, skip");h.forEach(x=>{if(!x.stats||!x.stats.dexterite){console.error(" Enemy sans stats.dexterite:",x);return}const M=Wn(Oe(x.stats.dexterite));m.push({type:"enemy",name:x.name,initiative:M,character:x})});const v=m.sort((x,M)=>M.initiative===x.initiative?x.type==="player"?-1:M.type==="player"?1:0:M.initiative-x.initiative),b=c().calculateInitialPositions(h,!!d,s.enemyPositions);return b.playerStartPos={...b.player},b.companion&&(b.companionStartPos={...b.companion}),{...f,isActive:!0,isInitialized:!0,combatPhase:"initiative-display",encounterData:s,combatEnemies:h,companionCharacter:d?It.deepClone(d):null,turnOrder:v,currentTurnIndex:0,turnCounter:1,combatPositions:b,hasMovedThisTurn:!1,defeated:!1,victory:!1,totalXpGained:0}}),calculateInitialPositions:(s,u,d={})=>{const f={player:{x:0,y:5}};return u&&(f.companion={x:1,y:5}),s.forEach((h,m)=>{if(d[h.name])f[h.name]=d[h.name];else{const g=Math.min(6,Kr-2),v=Math.min(m,Jr-1);f[h.name]={x:g+m%2,y:v}}}),f},resetCombat:()=>r({isActive:!1,isInitialized:!1,combatPhase:"idle",encounterData:null,combatEnemies:[],companionCharacter:null,turnOrder:[],currentTurnIndex:0,turnCounter:0,combatPositions:{},showMovementFor:null,showTargetingFor:null,hasMovedThisTurn:!1,playerAction:null,actionTargets:[],selectedAoESquares:[],aoeCenter:null,defeated:!1,victory:!1,totalXpGained:0}),startCombat:()=>r({combatPhase:"turn"}),nextTurn:()=>r(s=>{let u=s.currentTurnIndex+1;u>=s.turnOrder.length&&(u=0,s.turnCounter++);const d=s.turnOrder.length;let f=0;for(;u!==s.currentTurnIndex&&f<d;){const g=s.turnOrder[u];let v=!1;if(g.type==="enemy"){const b=s.combatEnemies.find(x=>x.name===g.name);(!b||b.currentHP<=0)&&(v=!0)}else g.type;if(v){u++,f++,u>=s.turnOrder.length&&(u=0,s.turnCounter++);continue}break}const h=s.turnOrder[u],m={...s.combatPositions};return h?.type==="player"?m.playerStartPos={...s.combatPositions.player}:h?.type==="companion"&&(m.companionStartPos={...s.combatPositions.companion}),{currentTurnIndex:u,turnCounter:s.turnCounter,combatPhase:"turn",hasMovedThisTurn:!1,showMovementFor:null,showTargetingFor:null,playerAction:null,actionTargets:[],combatPositions:m}}),setTurnPhase:s=>r({combatPhase:s}),getCurrentTurn:()=>{const{turnOrder:s,currentTurnIndex:u}=c();return s[u]},moveCharacter:(s,u)=>r(d=>{if(!Ql(u.x,u.y)||xi(u.x,u.y,d.combatPositions,d.combatEnemies,s))return d;const h=d.combatPositions[s];return c().checkOpportunityAttacks(s,h,u),{combatPositions:{...d.combatPositions,[s]:u},hasMovedThisTurn:s==="player"?!0:d.hasMovedThisTurn}}),checkOpportunityAttacks:(s,u,d)=>{const{combatPositions:f,combatEnemies:h}=c(),m=[];return h.forEach(g=>{if(g.currentHP<=0)return;const v=f[g.name];if(!v)return;const b=Ut(u,v)<=1,x=Ut(d,v)<=1;b&&!x&&m.push({attacker:g,target:s,position:v})}),m},updateEnemyPosition:(s,u)=>r(d=>({combatPositions:{...d.combatPositions,[s]:u}})),setPlayerAction:s=>r({playerAction:s}),setActionTargets:s=>r({actionTargets:s}),setShowMovementFor:s=>r({showMovementFor:s}),setShowTargetingFor:s=>r({showTargetingFor:s}),setSelectedAoESquares:s=>r({selectedAoESquares:s}),setAoECenter:s=>r({aoeCenter:s}),executeAction:()=>{const{playerAction:s,actionTargets:u,turnOrder:d,currentTurnIndex:f,combatPositions:h}=c();if(!s||u.length===0)return;const m=d[f];h[m.name.toLowerCase()];const v=new Si().executePlayerAction(m.character,s,u,combatEnemies,h);c().applyActionResults(v)},applyActionResults:s=>r(u=>{const d={...u};return s.damages?.forEach(f=>{if(f.target.type==="enemy"){const h=d.combatEnemies.findIndex(m=>m.name===f.target.name);h!==-1&&(d.combatEnemies[h]={...d.combatEnemies[h],currentHP:Math.max(0,d.combatEnemies[h].currentHP-f.amount)})}}),c().checkCombatEnd(),d}),_onPlayerDamage:null,_onCompanionDamage:null,setDamageCallbacks:(s,u)=>r({_onPlayerDamage:s,_onCompanionDamage:u}),dealDamageToPlayer:s=>{const{_onPlayerDamage:u}=c();u?u(s):console.warn("Player damage callback not set")},dealDamageToCompanion:s=>{const{_onCompanionDamage:u}=c();u?u(s):console.warn("Companion damage callback not set")},dealDamageToEnemy:(s,u)=>r(d=>{const f=d.combatEnemies.findIndex(m=>m.name===s);if(f===-1)return d;const h=[...d.combatEnemies];return h[f]={...h[f],currentHP:Math.max(0,h[f].currentHP-u)},{combatEnemies:h}}),checkCombatEnd:()=>{const{combatEnemies:s}=c();if(s.filter(d=>d.currentHP>0).length===0){c().handleVictory();return}},handleVictory:()=>{const{combatEnemies:s}=c(),u=s.reduce((d,f)=>d+(f.xp||0),0);r(d=>({victory:!0,combatPhase:"end",isActive:!1,totalXpGained:u}))},handleDefeat:()=>r({defeated:!0,combatPhase:"end",isActive:!1}),endCombat:s=>r({[s?"victory":"defeated"]:!0,combatPhase:"end",isActive:!1}),executeEnemyTurn:s=>{const{combatEnemies:u,combatPositions:d,companionCharacter:f}=c(),h=u.find(_=>_.name===s);if(!h||h.currentHP<=0)return;const m=d[s];if(!m)return;console.log(" Executing enemy turn:",s);const v={playerCharacter:null,companionCharacter:f,combatEnemies:u,combatPositions:d},b=Kt.calculateOptimalMovement({...h,type:"enemy"},m,v);b&&(console.log(` ${s} moves to position (${b.x}, ${b.y})`),c().moveCharacter(s,b));const x=b||m,M=h.attacks?.[0]||{name:"Attaque de base",type:"melee",range:1,damageDice:"1d6",damageBonus:0},T=Kt.getTargetsInRange({...h,type:"enemy"},x,M,v);if(T.length>0){let _=T.find(q=>d.player&&q.position.x===d.player.x&&q.position.y===d.player.y);_||(_=T[0]),console.log(` ${s} attacks ${_.name||"target"}`);const N=Kt.calculateDamage(M);console.log(` ${s} inflige ${N.damage} dgts  ${_.name}`);const R=d.player,A=d.companion;R&&_.position.x===R.x&&_.position.y===R.y?c().dealDamageToPlayer(N.damage):A&&_.position.x===A.x&&_.position.y===A.y&&c().dealDamageToCompanion(N.damage)}else console.log(` ${s} has no targets in range`)},executeCompanionTurn:()=>{const{companionCharacter:s,combatPositions:u,combatEnemies:d}=c();if(!s||s.currentHP<=0)return;const f=u.companion;if(!f)return;console.log(" Executing companion turn:",s.name);const h={playerCharacter:null,companionCharacter:s,combatEnemies:d,combatPositions:u},m=Kt.calculateOptimalMovement({...s,type:"companion"},f,h);m&&(console.log(` ${s.name} moves to position (${m.x}, ${m.y})`),c().moveCharacter("companion",m));const g=m||f,v=s.attacks?.[0]||{name:"Attaque de base",type:"melee",range:1,damageDice:"1d6",damageBonus:0},b=Kt.getTargetsInRange({...s,type:"companion"},g,v,h);if(console.log(" Companion targets found:",b),b.length>0){const x=b.reduce((T,_)=>{if(!T)return _;const N=_.currentHP??0,R=T.currentHP??0;return N<R&&N>0?_:T});if(!x||!x.name){console.log(` ${s.name} found no valid target`);return}console.log(` ${s.name} attacks ${x.name}`);const M=Kt.calculateDamage(v);console.log(` ${s.name} inflige ${M.damage} dgts  ${x.name}`),c().dealDamageToEnemy(x.name,M.damage)}else console.log(` ${s.name} has no targets in range`)},incrementCombatKey:()=>r(s=>({combatKey:s.combatKey+1})),getValidMovementSquares:(s,u=6)=>{const{combatPositions:d,combatEnemies:f}=c(),h=d[s];if(!h)return[];const m=[];for(let g=0;g<Kr;g++)for(let v=0;v<Jr;v++)Ut(h,{x:g,y:v})<=u&&!xi(g,v,d,f,s)&&m.push({x:g,y:v});return m},getValidTargetSquares:(s,u)=>{const{combatPositions:d,combatEnemies:f}=c();return Kt.getTargetsInRange({type:"player"},u,s,{combatPositions:d,combatEnemies:f}).map(h=>d[h.name])}}),{name:"combat-store"})),Xe=Ni(xv(Ci((r,c)=>({openPanels:new Set(["character-sheet"]),collapsedSections:new Set,activeModal:null,modalData:null,modalHistory:[],notifications:[],notificationCounter:0,isMobile:typeof window<"u"?window.innerWidth<=768:!1,sidebarCollapsed:!1,screenSize:typeof window<"u"?window.innerWidth<=480?"mobile":window.innerWidth<=768?"tablet":"desktop":"desktop",showCombatDetails:!0,showHealthBars:!0,showInitiativeOrder:!0,combatAnimationsEnabled:!0,theme:"default",showTooltips:!0,autoScrollLogs:!0,compactMode:!1,loading:!1,loadingMessage:"",hoveredElement:null,focusedElement:null,openPanel:s=>r(u=>({openPanels:new Set([...u.openPanels,s])})),closePanel:s=>r(u=>{const d=new Set(u.openPanels);return d.delete(s),{openPanels:d}}),togglePanel:s=>r(u=>{const d=new Set(u.openPanels);return d.has(s)?d.delete(s):d.add(s),{openPanels:d}}),closeAllPanels:()=>r({openPanels:new Set}),resetPanels:()=>r({openPanels:new Set(["character-sheet"])}),collapseSection:s=>r(u=>({collapsedSections:new Set([...u.collapsedSections,s])})),expandSection:s=>r(u=>{const d=new Set(u.collapsedSections);return d.delete(s),{collapsedSections:d}}),toggleSection:s=>r(u=>{const d=new Set(u.collapsedSections);return d.has(s)?d.delete(s):d.add(s),{collapsedSections:d}}),openModal:(s,u=null)=>r(d=>({modalHistory:d.activeModal?[...d.modalHistory,{type:d.activeModal,data:d.modalData}]:d.modalHistory,activeModal:s,modalData:u})),closeModal:()=>r(s=>{if(s.modalHistory.length>0){const u=s.modalHistory[s.modalHistory.length-1];return{activeModal:u.type,modalData:u.data,modalHistory:s.modalHistory.slice(0,-1)}}return{activeModal:null,modalData:null,modalHistory:[]}}),closeAllModals:()=>r({activeModal:null,modalData:null,modalHistory:[]}),addNotification:s=>r(u=>({notifications:[...u.notifications,{id:`notif-${u.notificationCounter}`,timestamp:Date.now(),type:"info",duration:5e3,...s}],notificationCounter:u.notificationCounter+1})),removeNotification:s=>r(u=>({notifications:u.notifications.filter(d=>d.id!==s)})),clearNotifications:()=>r({notifications:[]}),showSuccess:(s,u={})=>c().addNotification({type:"success",message:s,...u}),showError:(s,u={})=>c().addNotification({type:"error",message:s,duration:8e3,...u}),showWarning:(s,u={})=>c().addNotification({type:"warning",message:s,duration:6e3,...u}),showInfo:(s,u={})=>c().addNotification({type:"info",message:s,...u}),updateScreenSize:()=>r(s=>{const u=window.innerWidth;let d="desktop",f=!1;return u<=480?(d="mobile",f=!0):u<=768&&(d="tablet"),s.isMobile!==f||s.screenSize!==d?{isMobile:f,screenSize:d}:s}),toggleSidebar:()=>r(s=>({sidebarCollapsed:!s.sidebarCollapsed})),setSidebarCollapsed:s=>r({sidebarCollapsed:s}),toggleCombatDetails:()=>r(s=>({showCombatDetails:!s.showCombatDetails})),toggleHealthBars:()=>r(s=>({showHealthBars:!s.showHealthBars})),toggleInitiativeOrder:()=>r(s=>({showInitiativeOrder:!s.showInitiativeOrder})),toggleCombatAnimations:()=>r(s=>({combatAnimationsEnabled:!s.combatAnimationsEnabled})),setCombatUISettings:s=>r(u=>({showCombatDetails:s.showDetails??u.showCombatDetails,showHealthBars:s.showHealthBars??u.showHealthBars,showInitiativeOrder:s.showInitiativeOrder??u.showInitiativeOrder,combatAnimationsEnabled:s.animationsEnabled??u.combatAnimationsEnabled})),setTheme:s=>r({theme:s}),toggleTooltips:()=>r(s=>({showTooltips:!s.showTooltips})),toggleAutoScrollLogs:()=>r(s=>({autoScrollLogs:!s.autoScrollLogs})),toggleCompactMode:()=>r(s=>({compactMode:!s.compactMode})),updatePreferences:s=>r(u=>({theme:s.theme??u.theme,showTooltips:s.showTooltips??u.showTooltips,autoScrollLogs:s.autoScrollLogs??u.autoScrollLogs,compactMode:s.compactMode??u.compactMode})),setLoading:(s,u="")=>r({loading:s,loadingMessage:s?u:""}),setHoveredElement:s=>r({hoveredElement:s}),setFocusedElement:s=>r({focusedElement:s}),clearHover:()=>r({hoveredElement:null}),clearFocus:()=>r({focusedElement:null}),resetUI:()=>r({openPanels:new Set(["character-sheet"]),collapsedSections:new Set,activeModal:null,modalData:null,modalHistory:[],notifications:[],sidebarCollapsed:!1,showCombatDetails:!0,showHealthBars:!0,showInitiativeOrder:!0,combatAnimationsEnabled:!0,hoveredElement:null,focusedElement:null,loading:!1,loadingMessage:""}),savePreferences:()=>{console.log("Preferences saved automatically")}}),{name:"ui-store"}),{name:"rpg-ui-preferences",partialize:r=>({theme:r.theme,showTooltips:r.showTooltips,autoScrollLogs:r.autoScrollLogs,compactMode:r.compactMode,sidebarCollapsed:r.sidebarCollapsed,showCombatDetails:r.showCombatDetails,showHealthBars:r.showHealthBars,showInitiativeOrder:r.showInitiativeOrder,combatAnimationsEnabled:r.combatAnimationsEnabled,openPanels:Array.from(r.openPanels),collapsedSections:Array.from(r.collapsedSections)}),onRehydrateStorage:()=>r=>{r&&(r.openPanels=new Set(r.openPanels||["character-sheet"]),r.collapsedSections=new Set(r.collapsedSections||[]))}}));if(typeof window<"u"){const r=()=>{Xe.getState().updateScreenSize()};window.addEventListener("resize",r)}const xe=({children:r,variant:c="default",size:s="medium",className:u="",onClick:d,disabled:f=!1,...h})=>{const m="card",g=`card--${c}`,v=`card--${s}`,M=[m,g,v,f?"card--disabled":"",d?"card--clickable":"",u].filter(Boolean).join(" ");return i.jsx("div",{className:M,onClick:f?void 0:d,...h,children:r})},wt=({children:r,className:c=""})=>i.jsx("div",{className:`card__header ${c}`,children:r}),Ze=({children:r,className:c=""})=>i.jsx("div",{className:`card__body ${c}`,children:r}),Ei=({children:r,className:c=""})=>i.jsx("div",{className:`card__footer ${c}`,children:r}),ie=({children:r,variant:c="primary",size:s="medium",disabled:u=!1,loading:d=!1,icon:f,iconPosition:h="left",fullWidth:m=!1,className:g="",onClick:v,type:b="button",...x})=>{const M=Xe(ne=>ne.compactMode),T="btn",_=`btn--${c}`,N=`btn--${s}`,ce=[T,_,N,M?"btn--compact":"",u?"btn--disabled":"",d?"btn--loading":"",m?"btn--full-width":"",g].filter(Boolean).join(" "),F=ne=>{u||d||v?.(ne)};return i.jsxs("button",{type:b,className:ce,onClick:F,disabled:u||d,...x,children:[d&&i.jsx("span",{className:"btn__spinner"}),f&&h==="left"&&i.jsx("span",{className:"btn__icon btn__icon--left",children:f}),i.jsx("span",{className:"btn__content",children:r}),f&&h==="right"&&i.jsx("span",{className:"btn__icon btn__icon--right",children:f})]})},pa=({children:r,variant:c="horizontal",spacing:s="medium",className:u=""})=>{const d=["btn-group",`btn-group--${c}`,`btn-group--spacing-${s}`,u].filter(Boolean).join(" ");return i.jsx("div",{className:d,children:r})},fm=({children:r,variant:c="secondary",size:s="medium",disabled:u=!1,selected:d=!1,cooldown:f=!1,onClick:h,className:m="",...g})=>{const v=["action-button",d&&"action-button--selected",f&&"action-button--cooldown",m].filter(Boolean).join(" ");return i.jsxs(ie,{variant:d?"primary":c,size:s,disabled:u||f,onClick:h,className:v,...g,children:[r,f&&i.jsx("div",{className:"action-button__cooldown-overlay",children:i.jsx("span",{className:"action-button__cooldown-text",children:""})})]})};var Ev=bm();const Tv=eu(Ev);var jm={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},mm=ze.createContext&&ze.createContext(jm),Av=["attr","size","title"];function Mv(r,c){if(r==null)return{};var s=Dv(r,c),u,d;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(r);for(d=0;d<f.length;d++)u=f[d],!(c.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(r,u)&&(s[u]=r[u])}return s}function Dv(r,c){if(r==null)return{};var s={};for(var u in r)if(Object.prototype.hasOwnProperty.call(r,u)){if(c.indexOf(u)>=0)continue;s[u]=r[u]}return s}function ji(){return ji=Object.assign?Object.assign.bind():function(r){for(var c=1;c<arguments.length;c++){var s=arguments[c];for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(r[u]=s[u])}return r},ji.apply(this,arguments)}function pm(r,c){var s=Object.keys(r);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(r);c&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(r,d).enumerable})),s.push.apply(s,u)}return s}function _i(r){for(var c=1;c<arguments.length;c++){var s=arguments[c]!=null?arguments[c]:{};c%2?pm(Object(s),!0).forEach(function(u){Rv(r,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(s)):pm(Object(s)).forEach(function(u){Object.defineProperty(r,u,Object.getOwnPropertyDescriptor(s,u))})}return r}function Rv(r,c,s){return c=zv(c),c in r?Object.defineProperty(r,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[c]=s,r}function zv(r){var c=Hv(r,"string");return typeof c=="symbol"?c:c+""}function Hv(r,c){if(typeof r!="object"||!r)return r;var s=r[Symbol.toPrimitive];if(s!==void 0){var u=s.call(r,c);if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(c==="string"?String:Number)(r)}function _m(r){return r&&r.map((c,s)=>ze.createElement(c.tag,_i({key:s},c.attr),_m(c.child)))}function Fe(r){return c=>ze.createElement(Ov,ji({attr:_i({},r.attr)},c),_m(r.child))}function Ov(r){var c=s=>{var{attr:u,size:d,title:f}=r,h=Mv(r,Av),m=d||s.size||"1em",g;return s.className&&(g=s.className),r.className&&(g=(g?g+" ":"")+r.className),ze.createElement("svg",ji({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,u,h,{className:g,style:_i(_i({color:r.color||s.color},s.style),r.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),f&&ze.createElement("title",null,f),r.children)};return mm!==void 0?ze.createElement(mm.Consumer,null,s=>c(s)):c(jm)}function qv(r){return Fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(r)}function Bv(r){return Fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(r)}function Nm(r){return Fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(r)}function Cm(r){return Fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(r)}function Uv(r){return Fe({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25zM11.5 9.5 9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zm-1.51 3.49L9 15.17l-.99-2.18L5.83 12l2.18-.99L9 8.83l.99 2.18 2.18.99-2.18.99z"},child:[]}]})(r)}const au=({type:r,title:c,children:s,size:u="medium",showCloseButton:d=!0,closeOnBackdrop:f=!0,closeOnEscape:h=!0,className:m="",onClose:g})=>{const v=Xe(q=>q.activeModal),b=Xe(q=>q.modalData),x=Xe(q=>q.closeModal),M=Xe(q=>q.isMobile),T=v===r;te.useEffect(()=>{if(!T||!h)return;const q=k=>{k.key==="Escape"&&_()};return document.addEventListener("keydown",q),()=>document.removeEventListener("keydown",q)},[T,h]),te.useEffect(()=>{if(T)return document.body.style.overflow="hidden",()=>{document.body.style.overflow=""}},[T]);const _=()=>{g?.(),x()},N=q=>{q.target===q.currentTarget&&f&&_()};if(!T)return null;const R=["modal",`modal--${u}`,M&&"modal--mobile",m].filter(Boolean).join(" "),A=i.jsx("div",{className:"modal__backdrop",onClick:N,children:i.jsxs("div",{className:R,role:"dialog","aria-modal":"true",children:[(c||d)&&i.jsxs("div",{className:"modal__header",children:[c&&i.jsx("h2",{className:"modal__title",children:c}),d&&i.jsx(ie,{variant:"ghost",size:"small",icon:i.jsx(Bv,{}),onClick:_,className:"modal__close-button","aria-label":"Fermer la modal"})]}),i.jsx("div",{className:"modal__content",children:typeof s=="function"?s({data:b,onClose:_}):s})]})});return Tv.createPortal(A,document.body)},wv=()=>{const r=Xe(d=>d.openModal),c=Xe(d=>d.closeModal),s=Xe(d=>d.activeModal),u=Xe(d=>d.modalData);return{openModal:r,closeModal:c,activeModal:s,modalData:u,isOpen:d=>s===d}},Ir=({current:r,max:c,label:s,showNumbers:u=!0,showPercentage:d=!1,size:f="medium",variant:h="health",animated:m=!0,className:g=""})=>{const v=Xe(N=>N.showHealthBars),b=Xe(N=>N.combatAnimationsEnabled);if(!v)return null;const x=c>0?Math.max(0,Math.min(100,r/c*100)):0,M=Math.max(0,r);let T="";x>75?T="health-bar--high":x>50?T="health-bar--medium":x>25?T="health-bar--low":T="health-bar--critical";const _=["health-bar",`health-bar--${f}`,`health-bar--${h}`,"flex flex--column flex--center",T,m&&b&&"health-bar--animated",g].filter(Boolean).join(" ");return i.jsxs("div",{className:_,children:[s&&i.jsxs("div",{className:"health-bar__label",children:[i.jsxs("span",{className:"health-bar__label-text",children:[s," "]}),u&&i.jsxs("span",{className:"health-bar__numbers",children:[M,"/",c,d&&` (${Math.round(x)}%)`]})]}),i.jsxs("div",{className:"health-bar__container",children:[i.jsx("div",{className:"health-bar__background",children:i.jsx("div",{className:"health-bar__fill",style:{width:`${x}%`,transition:m&&b?"width 0.3s ease-out":"none"}})}),!s&&u&&i.jsx("div",{className:"health-bar__overlay",children:i.jsxs("span",{className:"health-bar__overlay-text",children:[M,"/",c,d&&` (${Math.round(x)}%)`]})})]})]})},Lv=({character:r,characterStats:c,layout:s="vertical"})=>{if(!r)return null;const u=["resource-bars",`resource-bars--${s}`].join(" ");return i.jsxs("div",{className:u,children:[i.jsx(Ir,{current:r.currentHP,max:r.maxHP,label:" Points de vie",variant:"health",showNumbers:!0}),r.hitDice&&i.jsx(Ir,{current:r.hitDice,max:r.level,label:" Ds de vie",variant:"energy",showNumbers:!0,size:"small"})]})},In=({id:r,title:c,children:s,defaultExpanded:u=!0,persistState:d=!0,showIcon:f=!0,headerLevel:h=4,className:m="",headerClassName:g="",contentClassName:v="",onToggle:b})=>{const x=Xe(ne=>d?ne.collapsedSections.has(r):!1),M=Xe(ne=>ne.toggleSection),T=Xe(ne=>ne.combatAnimationsEnabled),[_,N]=ze.useState(!u),R=d?!x:!_,A=()=>{d&&r?M(r):N(!_),b?.(R)},q=["collapsible-section",R&&"collapsible-section--expanded",T&&"collapsible-section--animated",m].filter(Boolean).join(" "),k=["collapsible-section__header",`collapsible-section__header--h${h}`,g].filter(Boolean).join(" "),ce=["collapsible-section__content",v].filter(Boolean).join(" "),F=`h${h}`;return i.jsxs("div",{className:q,children:[i.jsxs(F,{className:k,onClick:A,role:"button",tabIndex:0,onKeyDown:ne=>{(ne.key==="Enter"||ne.key===" ")&&(ne.preventDefault(),A())},"aria-expanded":R,"aria-controls":r?`${r}-content`:void 0,children:[i.jsx("span",{className:"collapsible-section__title",children:c}),f&&i.jsx("span",{className:"collapsible-section__icon",children:R?i.jsx(Nm,{}):i.jsx(Cm,{})})]}),R&&i.jsx("div",{className:ce,id:r?`${r}-content`:void 0,children:s})]})};function Gv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M500 224h-30.364C455.724 130.325 381.675 56.276 288 42.364V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v30.364C130.325 56.276 56.276 130.325 42.364 224H12c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h30.364C56.276 381.675 130.325 455.724 224 469.636V500c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-30.364C381.675 455.724 455.724 381.675 469.636 288H500c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12zM288 404.634V364c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v40.634C165.826 392.232 119.783 346.243 107.366 288H148c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12h-40.634C119.768 165.826 165.757 119.783 224 107.366V148c0 6.627 5.373 12 12 12h40c6.627 0 12-5.373 12-12v-40.634C346.174 119.768 392.217 165.757 404.634 224H364c-6.627 0-12 5.373-12 12v40c0 6.627 5.373 12 12 12h40.634C392.232 346.174 346.243 392.217 288 404.634zM288 256c0 17.673-14.327 32-32 32s-32-14.327-32-32c0-17.673 14.327-32 32-32s32 14.327 32 32z"},child:[]}]})(r)}function $v(r){return Fe({attr:{viewBox:"0 0 480 512"},child:[{tag:"path",attr:{d:"M106.75 215.06L1.2 370.95c-3.08 5 .1 11.5 5.93 12.14l208.26 22.07-108.64-190.1zM7.41 315.43L82.7 193.08 6.06 147.1c-2.67-1.6-6.06.32-6.06 3.43v162.81c0 4.03 5.29 5.53 7.41 2.09zM18.25 423.6l194.4 87.66c5.3 2.45 11.35-1.43 11.35-7.26v-65.67l-203.55-22.3c-4.45-.5-6.23 5.59-2.2 7.57zm81.22-257.78L179.4 22.88c4.34-7.06-3.59-15.25-10.78-11.14L17.81 110.35c-2.47 1.62-2.39 5.26.13 6.78l81.53 48.69zM240 176h109.21L253.63 7.62C250.5 2.54 245.25 0 240 0s-10.5 2.54-13.63 7.62L130.79 176H240zm233.94-28.9l-76.64 45.99 75.29 122.35c2.11 3.44 7.41 1.94 7.41-2.1V150.53c0-3.11-3.39-5.03-6.06-3.43zm-93.41 18.72l81.53-48.7c2.53-1.52 2.6-5.16.13-6.78l-150.81-98.6c-7.19-4.11-15.12 4.08-10.78 11.14l79.93 142.94zm79.02 250.21L256 438.32v65.67c0 5.84 6.05 9.71 11.35 7.26l194.4-87.66c4.03-1.97 2.25-8.06-2.2-7.56zm-86.3-200.97l-108.63 190.1 208.26-22.07c5.83-.65 9.01-7.14 5.93-12.14L373.25 215.06zM240 208H139.57L240 383.75 340.43 208H240z"},child:[]}]})(r)}function Pv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M243.2 189.9V258c26.1 5.9 49.3 15.6 73.6 22.3v-68.2c-26-5.8-49.4-15.5-73.6-22.2zm223.3-123c-34.3 15.9-76.5 31.9-117 31.9C296 98.8 251.7 64 184.3 64c-25 0-47.3 4.4-68 12 2.8-7.3 4.1-15.2 3.6-23.6C118.1 24 94.8 1.2 66.3 0 34.3-1.3 8 24.3 8 56c0 19 9.5 35.8 24 45.9V488c0 13.3 10.7 24 24 24h16c13.3 0 24-10.7 24-24v-94.4c28.3-12.1 63.6-22.1 114.4-22.1 53.6 0 97.8 34.8 165.2 34.8 48.2 0 86.7-16.3 122.5-40.9 8.7-6 13.8-15.8 13.8-26.4V95.9c.1-23.3-24.2-38.8-45.4-29zM169.6 325.5c-25.8 2.7-50 8.2-73.6 16.6v-70.5c26.2-9.3 47.5-15 73.6-17.4zM464 191c-23.6 9.8-46.3 19.5-73.6 23.9V286c24.8-3.4 51.4-11.8 73.6-26v70.5c-25.1 16.1-48.5 24.7-73.6 27.1V286c-27 3.7-47.9 1.5-73.6-5.6v67.4c-23.9-7.4-47.3-16.7-73.6-21.3V258c-19.7-4.4-40.8-6.8-73.6-3.8v-70c-22.4 3.1-44.6 10.2-73.6 20.9v-70.5c33.2-12.2 50.1-19.8 73.6-22v71.6c27-3.7 48.4-1.3 73.6 5.7v-67.4c23.7 7.4 47.2 16.7 73.6 21.3v68.4c23.7 5.3 47.6 6.9 73.6 2.7V143c27-4.8 52.3-13.6 73.6-22.5z"},child:[]}]})(r)}function Yv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h480c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zm-304-64l-64-32 64-32 32-64 32 64 64 32-64 32-16 32h208l-86.41-201.63a63.955 63.955 0 0 1-1.89-45.45L416 0 228.42 107.19a127.989 127.989 0 0 0-53.46 59.15L64 416h144l-16-32zm64-224l16-32 16 32 32 16-32 16-16 32-16-32-32-16 32-16z"},child:[]}]})(r)}function Xv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(r)}function Vv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 0C114.6 0 0 100.3 0 224c0 70.1 36.9 132.6 94.5 173.7 9.6 6.9 15.2 18.1 13.5 29.9l-9.4 66.2c-1.4 9.6 6 18.2 15.7 18.2H192v-56c0-4.4 3.6-8 8-8h16c4.4 0 8 3.6 8 8v56h64v-56c0-4.4 3.6-8 8-8h16c4.4 0 8 3.6 8 8v56h77.7c9.7 0 17.1-8.6 15.7-18.2l-9.4-66.2c-1.7-11.7 3.8-23 13.5-29.9C475.1 356.6 512 294.1 512 224 512 100.3 397.4 0 256 0zm-96 320c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64zm192 0c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64z"},child:[]}]})(r)}function kv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M214.02 19.115l-.02.06c38.033 14.387 73.867 34.09 106.393 58.446L368.02 158.4C292.254 72.063 181.72 20.678 64.66 20.604c-14.96-.01-30.027.834-45.14 2.535v18.8c108.174-12.774 213.91 21.292 293.527 88.554l42.314 97.416C290.887 132.486 182.425 73.885 66.395 73.21c-2.45-.013-4.9-.002-7.357.036-13.106.2-26.297 1.157-39.522 2.87v18.85c98.998-13.552 196.12 18.532 267.11 82.264l30.708 87.82C263.412 179.47 168.852 126.394 67.348 125.36c-15.818-.162-31.804.958-47.83 3.398v18.914c93.33-15.18 185.38 18.05 247.677 83.27l20.694 83.917C246.555 230.42 160.67 176.716 67.7 175.423c-1.256-.018-2.514-.025-3.774-.024-14.688.02-29.54 1.36-44.408 4.084v19.036c89.513-17.794 178.655 19.16 230.357 89.468l4.62 73.348c-28.973-83.013-107.888-136.692-193.257-135.87-13.8.132-27.768 1.693-41.72 4.78v19.188c77.22-18.904 155.333 13.983 197.095 77.14l5.873 57.49c23.33-6.283 47.534-13.218 68.727-20.873 19.194-6.93 35.884-14.525 46.596-22.038 5.354-3.756 9.142-7.478 11.174-10.574 2.033-3.096 2.47-5.184 2.098-7.59l-1.252-8.123 137.074-39.556C446.897 159.92 363.67 69.964 260.654 19.114H214.02zm278.86 273.922l-40.196 11.6c1.63 18.66-4.666 36.567-16.397 52.043-14.18 18.707-35.934 34.627-62.363 48.257-45.23 23.33-104.45 39.877-164.397 47.97l4.38 16.35c68.63-7.66 143.34-22.038 198.17-48.538 30.517-14.75 54.633-33.123 68.722-55.33 12.74-20.084 17.775-43.384 12.08-72.353zm-58.513 16.885l-65.027 18.765c-.736 4.345-2.345 8.51-4.733 12.147-3.925 5.98-9.462 10.986-16.068 15.62-13.213 9.266-30.996 17.098-50.978 24.316-31.927 11.53-68.41 20.998-99.558 29.134l6.644 24.79c59.027-7.79 117.64-24.153 160.71-46.366 24.828-12.805 44.388-27.573 56.037-42.94 8.804-11.614 13.283-23.135 12.972-35.466zm-261.754 77.43l-33.033 8.85 8.197 30.59c10.812 3.95 18.623 14.38 18.623 26.485 0 6.87-2.52 13.2-6.673 18.114l4.716 17.6 33.034-8.85-24.864-92.788zM138.22 443.79c-1.49 0-2.88.33-4.12.91l-75.6 20.255c2.926 4.706 4.625 10.24 4.625 16.14 0 .67-.03 1.33-.072 1.987l75.96-20.352c4.96-.386 8.698-4.37 8.698-9.453 0-5.35-4.138-9.488-9.49-9.488zM32.327 468.985c-6.798 0-12.11 5.312-12.11 12.11 0 6.798 5.312 12.11 12.11 12.11 6.798 0 12.111-5.312 12.111-12.11 0-6.798-5.313-12.11-12.11-12.11z"},child:[]}]})(r)}function Qv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M30.936 23.332c-.97 100.412 10.37 192.13 100.757 231.064 109.81 47.303 46.883 118.85-58.246 83.002 76.11 65.222 145.665 141.652 200.928 159.985 6.78 2.995 14.26 4.674 22.12 4.674 11.404 0 22.023-3.508 30.835-9.495 31.55 8.544 59.065 11.345 82.4 9.23 19.94-.195 38.412-6.676 53.524-17.556 49.986-33.49 55.46-109.83 11.715-201.34 1.573-8.565 1.077-16.997-1.154-25.322-1.973-9.506-6.227-18.195-12.152-25.476-28.97-42.765-97.358-83.18-159.58-124.506 77.79 99.205 67.214 143.1 10.635 94.234 1.09-7.624-1.225-15.174-6.103-23.178-1.8-3.4-4.032-6.54-6.625-9.343-17.988-22.57-52.22-49.85-87.02-92.078 38.056 186.15-97.83 83.32-182.036-53.895zM267.79 173.836c14.032 0 25.208 11.176 25.208 25.21 0 14.032-11.175 25.208-25.21 25.208-14.032 0-25.208-11.176-25.208-25.21 0-14.032 11.175-25.208 25.21-25.208zm147.575 54.834c22.756 0 41.004 18.248 41.004 41.004 0 22.756-18.248 41.004-41.005 41.004-5.145 0-10.056-.942-14.582-2.65-.746-19.392-10.64-36.512-25.476-47.16 3.997-18.478 20.328-32.198 40.058-32.198zm-75.45 39.473c23.44 0 42.24 18.802 42.24 42.242 0 23.44-18.8 42.242-42.24 42.242s-42.243-18.802-42.243-42.242c0-23.44 18.8-42.242 42.242-42.242zm68.886 65.464c41.396 0 74.755 33.36 74.755 74.754 0 41.397-33.357 74.755-74.754 74.755-23.397 0-44.22-10.662-57.91-27.404.458-2.85.704-5.772.704-8.75 0-15.814-6.752-30.113-17.506-40.183.268-12.963 3.804-25.092 9.828-35.61 23.163-1.518 42.872-16.092 51.803-36.403 4.247-.746 8.613-1.157 13.08-1.157zm-145.53 10.59c12.626 0 22.662 10.038 22.662 22.664 0 12.628-10.035 22.663-22.662 22.663-12.627 0-22.663-10.035-22.663-22.662 0-12.625 10.035-22.663 22.663-22.663zm33.226 66.35c20.22 0 36.414 16.194 36.414 36.414 0 20.222-16.192 36.413-36.414 36.413-20.22 0-36.412-16.192-36.412-36.412s16.19-36.413 36.412-36.413z"},child:[]}]})(r)}function Zv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 23c-3.7 0-7.4.1-11.1.27l.8 17.98c3.4-.16 6.8-.25 10.3-.25 118.8 0 215 96.2 215 215s-96.2 215-215 215c-89.6 0-166.35-54.7-198.65-132.6l27.63-8.3-48.43-34.3-19.05 54.5 22.55-6.7C74.68 428.8 158.4 489 256 489c128.6 0 233-104.4 233-233S384.6 23 256 23zm-30.8 2.04c-13.3 1.75-26.1 4.6-38.6 8.48l5.6 17.09c11.4-3.54 23.3-6.15 35.4-7.75l-2.4-17.82zm-57 15.12c-12.4 5.05-24.2 11.12-35.4 18.12l9.5 15.21c10.3-6.44 21.2-12.03 32.6-16.67l-6.7-16.66zM116.4 69.5a234.139 234.139 0 0 0-29.35 26.12l13.05 12.28c8.3-8.77 17.4-16.81 27-24.06l-4.8-6.57-5.9-7.77zm69.5 8.58l-4.4 17.44 217 55.48 4.4-17.4-217-55.52zM74.07 110.5c-8.19 10.2-15.54 21.2-21.94 32.7l15.65 8.8c5.91-10.7 12.69-20.8 20.26-30.3l-13.97-11.2zm127.63 8.8c-3.9 26 2.8 55.2 14.2 79.2 6.4 13.4 14.2 25.2 21.9 33.8 4.2 4.7 8.4 8.3 12.2 10.9l-5.4 21.2c-4.6.4-10 1.6-16 3.7-10.9 3.8-23.4 10.4-35.4 19.1-21.6 15.6-41.4 37.9-50.4 62.6l167.5 42.9c3.9-26-2.8-55.2-14.2-79.2-6.4-13.4-14.2-25.2-21.9-33.8-4.2-4.7-8.4-8.3-12.2-10.9l5.4-21.2c4.5-.5 10-1.6 16-3.7 10.9-3.8 23.4-10.4 35.4-19.1 21.6-15.6 41.4-37.9 50.4-62.6l-167.5-42.9zM43.24 160.9c-5.33 12-9.7 24.4-13 37.3l17.48 4.2c3.03-11.8 7.04-23.2 11.95-34.2l-16.43-7.3zM26.2 217.5C24.11 230 23 242.9 23 256v.9l18-.2v-.7c0-12.1 1.02-24 2.95-35.6l-17.75-2.9zM113.5 361l-4.4 17.4 217 55.5 4.4-17.4-217-55.5z"},child:[]}]})(r)}function Kv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M230.125 18.156V247h49.313V18.156h-49.313zM78.812 21.438l-16 136.906c48.707 30.112 97.637 47.843 148.625 53.094V33.125c-44.244-1.822-88.46-5.89-132.625-11.688zm349.438.28c-43.398 6.814-86.784 10.647-130.125 11.97v175c46.732-7.458 95.816-24.375 148.438-50.844L428.25 21.72zm-1.938 166.532c-44.474 19.847-87.06 32.836-128.187 38.97V247h37.031v143.188h-37.031v8.718c0 34.41-20.516 56.084-43.25 56.28-22.734.2-43.438-21.34-43.438-56.28v-8.72l-27.656.002h-9.343V247h37.001v-17.188c-43.774-4.164-86.14-16.857-127.687-38.062 5.04 92.69 3.66 185.37-5.063 278.063 117.402 32.047 234.788 31.002 352.188 0-6.853-93.858-9.223-187.706-4.563-281.563zm-233.187 77.438V371.5H316.47V265.687H193.124zm20.47 18.156H296v67.5H213.594v-67.5zm18.686 18.687v30.126h45.032V302.53h-45.03zm-2.155 87.658v8.718c0 28.23 13.32 37.692 24.594 37.594 11.27-.098 24.718-10.018 24.718-37.594v-8.72l-49.313.002z"},child:[]}]})(r)}function Jv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 16c-22.5 72-45 72-45 120 0 0 22.5 24 45 24s45-24 45-24c0-48-22.5-48-45-120zm0 144c-49.706 0-90 42.98-90 96s40.294 96 90 96c49.705 0 90-42.98 90-96s-40.295-96-90-96zm0 192c-22.5 0-45 24-45 24 0 48 22.5 48 45 120 22.5-72 45-72 45-120 0 0-22.5-24-45-24zm-22.5-168h45v48h45v48h-45v48h-45v-48h-45v-48h45v-48z"},child:[]}]})(r)}function Iv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M319.61 20.654c13.145 33.114 13.144 33.115-5.46 63.5 33.114-13.145 33.116-13.146 63.5 5.457-13.145-33.114-13.146-33.113 5.457-63.498-33.114 13.146-33.113 13.145-63.498-5.459zM113.024 38.021c-11.808 21.04-11.808 21.04-35.724 24.217 21.04 11.809 21.04 11.808 24.217 35.725 11.808-21.04 11.808-21.04 35.724-24.217-21.04-11.808-21.04-11.808-24.217-35.725zm76.55 56.184c-.952 50.588-.95 50.588-41.991 80.18 50.587.95 50.588.95 80.18 41.99.95-50.588.95-50.588 41.99-80.18-50.588-.95-50.588-.95-80.18-41.99zm191.177 55.885c-.046 24.127-.048 24.125-19.377 38.564 24.127.047 24.127.046 38.566 19.375.047-24.126.046-24.125 19.375-38.564-24.126-.047-24.125-.046-38.564-19.375zm-184.086 83.88c-1.191.024-2.36.07-3.492.134-18.591 1.064-41.868 8.416-77.445 22.556L76.012 433.582c78.487-20.734 132.97-21.909 170.99-4.615V247.71c-18.076-8.813-31.79-13.399-46.707-13.737a91.166 91.166 0 0 0-3.629-.002zm122.686 11.42c-2.916-.026-5.81.011-8.514.098-12.81.417-27.638 2.215-45.84 4.522V427.145c43.565-7.825 106.85-4.2 171.244 7.566l-39.78-177.197c-35.904-8.37-56.589-11.91-77.11-12.123zm2.289 16.95c18.889.204 36.852 2.768 53.707 5.02l4.437 16.523c-23.78-3.75-65.966-4.906-92.467-.98l-.636-17.805c11.959-2.154 23.625-2.88 34.959-2.758zm-250.483 4.658l-10.617 46.004h24.094l10.326-46.004H71.158zm345.881 0l39.742 177.031 2.239 9.973 22.591-.152-40.855-186.852h-23.717zm-78.857 57.82c16.993.026 33.67.791 49.146 2.223l3.524 17.174c-32.645-3.08-72.58-2.889-102.995 0l-.709-17.174c16.733-1.533 34.04-2.248 51.034-2.223zm-281.793 6.18l-6.924 30.004h24.394l6.735-30.004H56.389zm274.418 27.244c4.656.021 9.487.085 14.716.203l2.555 17.498c-19.97-.471-47.115.56-59.728 1.05l-.7-17.985c16.803-.493 29.189-.828 43.157-.766zm41.476.447c8.268.042 16.697.334 24.121.069l2.58 17.74c-8.653-.312-24.87-.83-32.064-.502l-2.807-17.234a257.25 257.25 0 0 1 8.17-.073zm-326.97 20.309l-17.985 77.928 25.035-.17 17.455-77.758H45.313zm303.164 11.848c19.608-.01 38.66.774 56.449 2.572l2.996 20.787c-34.305-4.244-85.755-7.697-119.1-3.244l-.14-17.922c20.02-1.379 40.186-2.183 59.795-2.193zm-166.606 44.05c-30.112.09-67.916 6.25-115.408 19.76l-7.22 2.053 187.759-1.27v-6.347c-16.236-9.206-37.42-14.278-65.13-14.196zm134.41 6.174c-19.63.067-37.112 1.439-51.283 4.182v10.064l177.594-1.203c-44.322-8.634-89.137-13.17-126.31-13.043zM26 475v18h460v-18H26z"},child:[]}]})(r)}function Wv(r){return Fe({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 29.816l-231 154v106.368l231-154 231 154V183.816zm0 128.043L105 259.783v90.283l151-101.925 151 101.925v-90.283zm0 112l-87 58.725v67.6l87-58 87 58v-67.6zm0 89.957l-87 58v64.368l87-58 87 58v-64.368z"},child:[]}]})(r)}const yt=(r,c="")=>({className:s="",...u})=>i.jsx(r,{className:`icon ${c} ${s}`,...u}),Em=yt(Xv,"heal-icon"),Fv=yt(kv,"damage-icon"),e1=yt(Yv,"magic-icon"),t1=yt($v,"dice-icon"),a1=yt(Gv,"miss-icon"),l1=yt(Vv,"defeat-icon"),n1=yt(Pv,"victory-icon"),s1=yt(Kv,"bag-icon"),i1=yt(Wv,"upgrade-icon"),c1=yt(Jv,"levelup-icon"),r1=yt(Uv,"exp-icon"),u1=yt(Iv,"spell-icon"),o1=yt(Qv,"burning-blobs-icon"),d1=yt(Zv,"duration-icon"),gt={PLAYER_DAMAGE:"player-damage",ENEMY_DAMAGE:"enemy-damage",VICTORY:"victory",HEAL:"heal",MISS:"miss",DEFEAT:"defeat",INITIATIVE:"initiative",BAG:"bag",UPGRADE:"upgrade",LEVEL_UP:"levelup",EXPERIENCE:"experience",SPELL:"spell",BURNING_BLOBS:"burning-blobs",DURATION:"duration"},f1=r=>{const s={[gt.PLAYER_DAMAGE]:e1,[gt.ENEMY_DAMAGE]:Fv,[gt.VICTORY]:n1,[gt.HEAL]:Em,[gt.MISS]:a1,[gt.DEFEAT]:l1,[gt.INITIATIVE]:t1,[gt.BAG]:s1,[gt.UPGRADE]:i1,[gt.LEVEL_UP]:c1,[gt.EXPERIENCE]:r1,[gt.SPELL]:u1,[gt.BURNING_BLOBS]:o1,[gt.DURATION]:d1}[r];return s?i.jsx(s,{}):null},m1=ze.memo(({entry:r,showTimestamp:c=!1})=>{const s=r.timestamp?new Date(r.timestamp).toLocaleTimeString():"";return i.jsxs("div",{className:`combat-log__entry combat-log__entry--${r.type}`,children:[i.jsxs("div",{className:"combat-log__entry-content",children:[i.jsx("span",{className:"combat-log__entry-icon",children:f1(r.type)}),i.jsx("span",{className:"combat-log__entry-message",children:r.message})]}),c&&s&&i.jsx("span",{className:"combat-log__entry-timestamp",children:s})]})}),Fn=({title:r="Journal",maxEntries:c=100,showTimestamps:s=!1,showClearButton:u=!0,collapsible:d=!1,compact:f=!1,className:h=""})=>{const m=te.useRef(null),g=ha(q=>q.combatLog),v=ha(q=>q.clearCombatLog),b=Xe(q=>q.autoScrollLogs),x=Xe(q=>q.compactMode),[M,T]=ze.useState(!1);te.useEffect(()=>{b&&m.current&&!M&&(m.current.scrollTop=m.current.scrollHeight)},[g,b,M]);const _=te.useMemo(()=>g.slice(-c),[g,c]),N=te.useMemo(()=>_.map(q=>i.jsx(m1,{entry:q,showTimestamp:s},q.id||`${q.message}-${q.timestamp}`)),[_,s]),R=["combat-log",f||x?"combat-log--compact":"",M?"combat-log--collapsed":"",h].filter(Boolean).join(" "),A=_.length>0;return i.jsxs("div",{className:R,children:[i.jsxs("div",{className:"combat-log__header",children:[i.jsxs("div",{className:"combat-log__title-section",children:[d&&i.jsx("button",{className:"combat-log__toggle",onClick:()=>T(!M),"aria-expanded":!M,children:M?i.jsx(Cm,{}):i.jsx(Nm,{})}),i.jsx("h3",{className:"combat-log__title",children:r}),A&&i.jsxs("span",{className:"combat-log__count",children:["(",_.length,")"]})]}),u&&A&&!M&&i.jsx(ie,{size:"small",variant:"ghost",icon:i.jsx(qv,{}),onClick:v,className:"combat-log__clear-button",title:"Vider le journal",children:"Vider"})]}),!M&&i.jsxs("div",{className:"combat-log__content",children:[i.jsx("div",{className:"combat-log__entries",ref:m,children:A?N:i.jsxs("div",{className:"combat-log__empty",children:[i.jsx("span",{className:"combat-log__empty-icon",children:""}),i.jsx("p",{className:"combat-log__empty-message",children:"En attente d'actions..."})]})}),A&&!b&&i.jsx("div",{className:"combat-log__controls",children:i.jsx(ie,{size:"small",variant:"ghost",onClick:()=>{m.current&&(m.current.scrollTop=m.current.scrollHeight)},children:" Aller au bas"})})]})]})};ze.memo(Fn);const il=({label:r,value:c,modifier:s,tooltip:u,size:d="medium",variant:f="default",showModifier:h=!1,onClick:m,className:g=""})=>{const v=Xe(_=>_.showTooltips),b=Xe(_=>_.compactMode),x=["stat-block",`stat-block--${d}`,`stat-block--${f}`,b&&"stat-block--compact",m&&"stat-block--clickable",g].filter(Boolean).join(" "),M=s!==void 0?s:typeof c=="number"&&h?Math.floor((c-10)/2):null,T=i.jsxs("div",{className:x,onClick:m,children:[i.jsx("div",{className:"stat-block__label",children:r}),i.jsxs("div",{className:"stat-block__value",children:[c,M!==null&&i.jsxs("span",{className:"stat-block__modifier",children:["(",M>=0?"+":"",M,")"]})]})]});return u&&v?i.jsx("div",{className:"stat-block-wrapper",title:u,children:T}):T},Tm=({children:r,layout:c="horizontal",spacing:s="medium",className:u=""})=>{const d=["stat-group",`stat-group--${c}`,`stat-group--spacing-${s}`,u].filter(Boolean).join(" ");return i.jsx("div",{className:d,children:r})},p1=ze.memo(({statName:r,score:c,hasSaveProficiency:s=!1,proficiencyBonus:u=0,onClick:d,showSaveBonus:f=!1,compact:h=!1})=>{const m=Oe(c),g=m+(s?u:0),v={force:"FOR",dexterite:"DEX",constitution:"CON",intelligence:"INT",sagesse:"SAG",charisme:"CHA"},b={force:"Force",dexterite:"Dextrit",constitution:"Constitution",intelligence:"Intelligence",sagesse:"Sagesse",charisme:"Charisme"},x=h?v[r]||r.toUpperCase():b[r]||r,M=`${b[r]}: ${c} (${m>=0?"+":""}${m})${f?`
Jet de sauvegarde: ${g>=0?"+":""}${g}`:""}`;return i.jsxs("div",{className:`ability-score ${h?"ability-score--compact":""}`,children:[i.jsx(il,{label:x,value:c,modifier:m,tooltip:M,variant:s?"highlighted":"default",onClick:d,size:h?"small":"medium",showModifier:!0}),f&&i.jsxs("div",{className:`ability-score__save ${s?"ability-score__save--proficient":""}`,children:[i.jsx("span",{className:"ability-score__save-label",children:"JdS:"}),i.jsxs("span",{className:"ability-score__save-value",children:[g>=0?"+":"",g]})]})]})}),h1=({stats:r,saves:c=[],proficiencyBonus:s=2,onStatClick:u,layout:d="grid",compact:f=!1,showSaveBonuses:h=!1})=>{const m=["ability-scores",`ability-scores--${d}`,f&&"ability-scores--compact"].filter(Boolean).join(" "),g=["force","dexterite","constitution","intelligence","sagesse","charisme"];return i.jsx("div",{className:m,children:i.jsx(Tm,{layout:d==="grid"?"grid":d,children:g.map(v=>i.jsx(p1,{statName:v,score:r[v]||10,hasSaveProficiency:c.includes(v),proficiencyBonus:s,onClick:()=>u?.(v),showSaveBonus:h,compact:f},v))})})},Wr={acrobaties:"dexterite",arcanes:"intelligence",athletisme:"force",discretion:"dexterite",dressage:"sagesse",escamotage:"dexterite",histoire:"intelligence",intimidation:"charisme",intuition:"sagesse",investigation:"intelligence",medecine:"sagesse",nature:"intelligence",perception:"sagesse",persuasion:"charisme",religion:"intelligence",representation:"charisme",survie:"sagesse",tromperie:"charisme"},Am={acrobaties:"Acrobaties",arcanes:"Arcanes",athletisme:"Athltisme",discretion:"Discrtion",dressage:"Dressage",escamotage:"Escamotage",histoire:"Histoire",intimidation:"Intimidation",intuition:"Intuition",investigation:"Investigation",medecine:"Mdecine",nature:"Nature",perception:"Perception",persuasion:"Persuasion",religion:"Religion",representation:"Reprsentation",survie:"Survie",tromperie:"Tromperie"},v1={force:"FOR",dexterite:"DEX",constitution:"CON",intelligence:"INT",sagesse:"SAG",charisme:"CHA"},Qr=ze.memo(({skillName:r,character:c,proficiencyBonus:s,onSkillClick:u,layout:d="default",showProficiencyIndicator:f=!0})=>{const h=Wr[r],m=c.proficiencies?.skills?.includes(r)||!1,g=Oe(c.stats[h]||10),v=g+(m?s:0),b=Am[r]||r,x=v1[h]||h.toUpperCase(),M=["skill-item",`skill-item--${d}`,m&&"skill-item--proficient"].filter(Boolean).join(" "),T=`${b} (${x}): ${v>=0?"+":""}${v}${m?" (matris)":""}`;return d==="compact"?i.jsx("div",{className:M,children:i.jsx(il,{label:b,value:`${v>=0?"+":""}${v}`,variant:m?"highlighted":"default",size:"small",tooltip:T,onClick:()=>u?.(r)})}):i.jsxs("div",{className:M,onClick:()=>u?.(r),children:[i.jsxs("div",{className:"skill-item__header",children:[f&&i.jsx("div",{className:`skill-item__proficiency ${m?"skill-item__proficiency--active":""}`,children:m?"":""}),i.jsxs("div",{className:"skill-item__name",children:[b,i.jsxs("span",{className:"skill-item__stat",children:["(",x,")"]})]}),i.jsxs("div",{className:"skill-item__bonus",children:[v>=0?"+":"",v]})]}),d==="detailed"&&i.jsx("div",{className:"skill-item__details",children:i.jsxs("div",{className:"skill-item__breakdown",children:["Stat: ",g>=0?"+":"",g,m&&i.jsxs("span",{children:[" + Matrise: +",s]})]})})]})}),g1=({character:r,proficiencyBonus:c=2,onSkillClick:s,layout:u="default",groupByAbility:d=!1,showSearch:f=!1,compact:h=!1})=>{const[m,g]=ze.useState(""),v=Object.keys(Wr).filter(x=>!m||Am[x].toLowerCase().includes(m.toLowerCase())),b=["skills-list",`skills-list--${u}`,h&&"skills-list--compact"].filter(Boolean).join(" ");if(d){const x={};v.forEach(T=>{const _=Wr[T];x[_]||(x[_]=[]),x[_].push(T)});const M={force:"Force",dexterite:"Dextrit",constitution:"Constitution",intelligence:"Intelligence",sagesse:"Sagesse",charisme:"Charisme"};return i.jsxs("div",{className:b,children:[f&&i.jsx("div",{className:"skills-list__search",children:i.jsx("input",{type:"text",placeholder:"Rechercher une comptence...",value:m,onChange:T=>g(T.target.value),className:"skills-list__search-input"})}),Object.entries(x).map(([T,_])=>i.jsx(In,{id:`skills-${T}`,title:`${M[T]} (${_.length})`,defaultExpanded:!h,children:i.jsx("div",{className:"skills-list__ability-group",children:_.map(N=>i.jsx(Qr,{skillName:N,character:r,proficiencyBonus:c,onSkillClick:s,layout:h?"compact":u},N))})},T))]})}return i.jsxs("div",{className:b,children:[f&&i.jsx("div",{className:"skills-list__search",children:i.jsx("input",{type:"text",placeholder:"Rechercher une comptence...",value:m,onChange:x=>g(x.target.value),className:"skills-list__search-input"})}),i.jsx("div",{className:"skills-list__items",children:u==="compact"?i.jsx(Tm,{layout:"grid",children:v.map(x=>i.jsx(Qr,{skillName:x,character:r,proficiencyBonus:c,onSkillClick:s,layout:u},x))}):v.map(x=>i.jsx(Qr,{skillName:x,character:r,proficiencyBonus:c,onSkillClick:s,layout:u},x))})]})},y1=({currentXP:r=0,nextLevelXP:c,progress:s=0,level:u,showNumbers:d=!0,showLevelUpIndicator:f=!0,size:h="medium",animated:m=!0})=>{const g=Wt(T=>T.levelUpPending),v=Wt(T=>T.experienceGains),b=v.length>0,x=b?v[v.length-1]:null,M=["xp-bar",`xp-bar--${h}`,m&&"xp-bar--animated",g&&"xp-bar--can-level-up",b&&"xp-bar--recent-gain"].filter(Boolean).join(" ");return i.jsxs("div",{className:M,children:[d&&i.jsx("div",{className:"xp-bar__info",children:i.jsx("div",{className:"xp-bar__current",children:i.jsxs("span",{className:"xp-bar__value",children:[" XP:  ",Math.max(0,Math.round(r))," / ",Math.max(0,Math.round(c))]})})}),i.jsxs("div",{className:"xp-bar__container",children:[i.jsxs("div",{className:"xp-bar__background",children:[i.jsx("div",{className:"xp-bar__fill",style:{width:`${Math.min(100,s)}%`,transition:m?"width 0.5s ease-out":"none"}}),b&&i.jsxs("div",{className:"xp-bar__recent-gain-indicator",children:["+",x.amount," XP"]})]}),g&&f&&i.jsx("div",{className:"xp-bar__level-up-indicator",children:" Niveau suivant disponible !"})]}),s>=100&&!g&&i.jsx("div",{className:"xp-bar__max-level",children:"Niveau maximum atteint"})]})},Mm=({characterType:r="player",compact:c=!1,showControls:s=!1})=>{const u=Wt(h=>r==="player"?h.playerCharacter:h.playerCompanion),d=te.useMemo(()=>{if(!u)return null;const h=$e.getXPToNextLevel(u.level),m=$e.getXPForLevel(u.level),g=u.currentXP||u.experience||0,v=$e.generateSpellSlotsForLevel(u.level,u.class),b=g-m,x=h-m,M=x>0?b/x*100:100,T=u.spellcasting?$e.getAttackBonus(u,{actionType:"spell"}):null,_=u.class==="Roublard"?"dexterite":"force",N=Oe(u.stats[_])+$e.getProficiencyBonus(u.level),R=u.spellcasting?$e.getSpellSaveDC(u):null;return{xpToNext:x,xpProgress:M,spellAttackBonus:T,weaponAttackBonus:N,spellSaveDC:R,spellSlots:v,proficiencyBonus:$e.getProficiencyBonus(u.level)}},[u]);if(!u)return i.jsx(xe,{className:"character-sheet character-sheet--empty",children:i.jsx(Ze,{children:i.jsxs("p",{children:["Aucun ",r==="player"?"personnage":"compagnon"]})})});const f=["character-sheet",c&&"character-sheet--compact",`character-sheet--${r}`].filter(Boolean).join(" ");return i.jsxs(xe,{className:f,children:[i.jsx(wt,{children:i.jsxs("div",{className:"character-sheet__header",children:[i.jsx("h3",{className:"character-sheet__name",children:u.name}),!c&&i.jsx(y1,{currentXP:Math.max(0,(u.currentXP||u.experience||0)-$e.getXPForLevel(u.level)),nextLevelXP:d.xpToNext,progress:d.xpProgress,level:u.level}),i.jsxs("p",{className:"character-sheet__details",children:["Niv. ",u.level," ",u.race," ",u.class]}),u.historic&&i.jsx("p",{className:"character-sheet__background",children:u.historic})]})}),i.jsxs(Ze,{children:[i.jsxs("div",{className:"character-sheet__main-stats",children:[i.jsx("div",{className:"character-sheet__combat-stats",children:i.jsx(il,{label:"CA",value:u.ac,tooltip:"Classe d'Armure"})}),!c&&i.jsx(In,{id:`${r}-resources`,title:"Ressources",defaultExpanded:!0,children:i.jsx(Lv,{character:u,characterStats:d,layout:"vertical"})})]}),i.jsx(In,{id:`${r}-abilities`,title:"Caractristiques",defaultExpanded:c,children:i.jsx(h1,{stats:u.stats,saves:u.proficiencies?.saves||[],proficiencyBonus:d.proficiencyBonus,compact:!c,showSaveBonus:!1})}),i.jsx(In,{id:`${r}-combat`,title:"Combat",defaultExpanded:c,children:i.jsxs("div",{className:"character-sheet__combat-info",children:[i.jsx(il,{label:"Bonus de Matrise",value:`+${d.proficiencyBonus}`}),d.spellAttackBonus!==null&&i.jsx(il,{label:"Att. Sorts",value:`+${d.spellAttackBonus}`,tooltip:"Bonus d'attaque des sorts"}),i.jsx(il,{label:"Att. Armes",value:`+${d.weaponAttackBonus}`,tooltip:"Bonus d'attaque des armes"}),d.spellSaveDC&&i.jsx(il,{label:"DD des sorts",value:d.spellSaveDC,tooltip:"Difficult des jets de sauvegarde contre vos sorts"})]})}),i.jsx(In,{id:`${r}-skills`,title:"Comptences",defaultExpanded:c,children:i.jsx(g1,{character:u,proficiencyBonus:d.proficiencyBonus,compact:c})})]})]})},b1=({characterType:r="player"})=>i.jsx(Mm,{characterType:r,compact:!0}),x1=({character:r,isSelected:c=!1,onSelect:s,onPreview:u,icon:d,description:f,showStats:h=!0,className:m=""})=>{const g=["character-selection-card",c&&"character-selection-card--selected",m].filter(Boolean).join(" "),v=b=>{b.target.closest("button")||s?.(r)};return r.stats.force,r.stats.dexterite,r.stats.constitution,r.stats.intelligence,r.stats.sagesse,r.stats.charisme,i.jsxs(xe,{className:g,onClick:v,variant:c?"primary":"default",children:[i.jsx(wt,{children:i.jsxs("div",{className:"character-portrait",children:[i.jsx("div",{className:"character-avatar",children:d}),i.jsxs("div",{className:"character-info",children:[i.jsx("h3",{className:"character-selection-card__name",children:r.name}),i.jsxs("p",{className:"character-selection-card__class",children:[r.race," ",r.class]}),i.jsxs("p",{className:"character-selection-card__level",children:["Niveau ",r.level]})]})]})}),i.jsxs(Ze,{children:[i.jsxs("div",{className:"character-stats-preview",children:[i.jsxs("div",{className:"stat-preview",children:[i.jsx("span",{className:"main-stat__label",children:""}),i.jsxs("span",{className:"main-stat__value",children:[r.maxHP," PV"]})]}),i.jsxs("div",{className:"stat-preview",children:[i.jsx("span",{className:"main-stat__label",children:""}),i.jsxs("span",{className:"main-stat__value",children:["CA ",r.ac]})]})]}),i.jsxs("div",{className:"character-specialties",children:[r.class==="Magicien"&&i.jsx("div",{className:"specialty",children:" Sorts puissants"}),r.class==="Guerrier"&&i.jsx("div",{className:"specialty",children:" Combat rapproch"}),r.class==="Roublard"&&i.jsx("div",{className:"specialty",children:" Attaques prcises"})]})]})]})},S1=({onCharacterSelect:r})=>{const[c,s]=te.useState(null),[u,d]=te.useState(!1),f=ha(_=>_.setGamePhase),h=Wt(_=>_.setPlayerCharacter),{openModal:m}=wv(),g=[vi.wizard,vi.warrior,vi.rogue,vi.paladin].filter(Boolean),v=_=>{s(_)},b=_=>{m("character-preview",_)},x=async()=>{if(c){d(!0);try{await new Promise(_=>setTimeout(_,500)),h(c),r?.(c),f("game")}catch(_){console.error("Erreur lors de la slection du personnage:",_)}finally{d(!1)}}},M=_=>({Magicien:"Matre des arcanes, ce personnage utilise des sorts puissants pour vaincre ses ennemis. Fragile mais redoutable  distance, il excelle dans le contrle du champ de bataille.",Guerrier:"Combattant expriment, ce hros excelle au corps--corps avec ses armes. Robuste et polyvalent au combat, il peut encaisser et infliger de lourds dgts.",Roublard:"Expert en furtivit, ce personnage frappe avec prcision et vite les coups. Agile et mortel par surprise, il excelle dans les situations qui demandent de la finesse."})[_.class]||"Un aventurier prt  affronter tous les dfis.",T=_=>({Magicien:"",Guerrier:"",Roublard:""})[_]||"";return i.jsxs("div",{className:"character-selection-screen",children:[i.jsxs("div",{className:"selection-header",children:[i.jsx("h1",{className:"character-selection__title",children:" Choisis ton Hros "}),i.jsx("p",{className:"character-selection__subtitle",children:"Slectionne le personnage avec lequel tu veux vivre cette aventure pique !"})]}),i.jsx("div",{className:"character-grid",children:g.map((_,N)=>i.jsx(x1,{character:_,isSelected:c?.name===_.name,onSelect:()=>v(_),onPreview:()=>b(_),icon:T(_.class),description:M(_)},`${_.name}-${N}`))}),c&&i.jsxs(xe,{className:"character-details",children:[i.jsxs(wt,{children:[i.jsxs("h3",{children:[T(c.class)," ",c.name]}),i.jsxs("p",{children:[c.level,"e niveau ",c.race," ",c.class]})]}),i.jsxs(Ze,{children:[i.jsx("p",{className:"character-selection__description",children:M(c)}),i.jsxs("div",{className:"character-stats-preview",children:[i.jsxs("div",{className:"stat-preview",children:[i.jsx("span",{className:"quick-stat__label",children:" PV "}),i.jsx("span",{className:"quick-stat__value",children:c.maxHP})]}),i.jsxs("div",{className:"stat-preview",children:[i.jsx("span",{className:"quick-stat__label",children:" CA "}),i.jsx("span",{className:"quick-stat__value",children:c.ac})]}),i.jsxs("div",{className:"stat-preview",children:[i.jsx("span",{className:"quick-stat__label",children:" Initiative "}),i.jsxs("span",{className:"quick-stat__value",children:["+ ",Math.floor((c.stats.dexterite-10)/2)]})]})]})]}),i.jsx(Ei,{children:i.jsx("div",{className:"character-selection__actions",children:i.jsx(ie,{variant:"primary",onClick:x,loading:u,disabled:!c,size:"large",children:u?"Prparation...":" Commencer l'aventure !"})})})]}),!c&&i.jsx("div",{className:"character-selection__help",children:i.jsx(xe,{variant:"ghost",className:"character-selection__help-card",children:i.jsx(Ze,{children:i.jsx("p",{children:' Clique sur un personnage pour le slectionner, ou sur "Voir les dtails" pour examiner ses caractristiques compltes.'})})})}),i.jsx(au,{type:"character-preview",size:"large",title:"Aperu du personnage",children:({data:_,onClose:N})=>i.jsx("div",{className:"character-preview-modal",children:_&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"character-preview-modal__header",children:[i.jsxs("h2",{children:[T(_.class)," ",_.name]}),i.jsxs("p",{children:[_.level,"e niveau ",_.race," ",_.class]})]}),i.jsxs("div",{className:"character-preview-modal__content",children:[i.jsx("div",{className:"character-preview-modal__description",children:i.jsx("p",{children:M(_)})}),i.jsx("div",{className:"character-preview-modal__sheet",children:i.jsx(b1,{characterData:_})})]}),i.jsxs("div",{className:"character-preview-modal__actions",children:[i.jsx(ie,{variant:"secondary",onClick:N,children:"Fermer"}),i.jsx(ie,{variant:"primary",onClick:()=>{s(_),N()},children:"Choisir ce personnage"})]})]})})})]})},j1=({character:r,variant:c="default",className:s="",onAbilityUse:u})=>{if(!r?.specialAbilities||Object.keys(r.specialAbilities).length===0)return null;const d=["special-abilities-panel",`special-abilities-panel--${c}`,s].filter(Boolean).join(" "),f=(h,m)=>{u&&m.uses&&m.uses.current>0&&u(h,m)};return i.jsxs(xe,{className:d,children:[i.jsx(wt,{children:i.jsx("h4",{children:"Capacits Spciales"})}),i.jsx(Ze,{children:i.jsx("div",{className:"abilities-list",children:Object.entries(r.specialAbilities).map(([h,m])=>i.jsxs("div",{className:"ability-item",children:[i.jsxs("div",{className:"ability-header",children:[i.jsx("h5",{className:"ability-name",children:m.name}),m.level&&i.jsxs("span",{className:"ability-level",children:["Niveau ",m.level]})]}),i.jsx("p",{className:"ability-description",children:m.description}),m.damage&&i.jsx("div",{className:"ability-stats",children:i.jsxs("span",{className:"ability-damage",children:["Dgts: ",m.damage]})}),m.uses&&i.jsxs("div",{className:"ability-uses",children:[i.jsxs("span",{className:"ability-uses-text",children:["Utilisations: ",m.uses.current||0,"/",m.uses.max]}),c==="interactive"&&m.uses.current>0&&i.jsx("button",{className:"ability-use-button",onClick:()=>f(h,m),title:`Utiliser ${m.name}`,children:"Utiliser"})]}),m.skills&&i.jsx("div",{className:"ability-skills",children:i.jsxs("span",{className:"ability-skills-text",children:["Comptences affectes: ",m.skills.join(", ")]})})]},h))})})]})},_1=({companion:r,variant:c="default",className:s="",showActions:u=!1,onAction:d})=>{if(!r)return null;const f=["companion-display",`companion-display--${c}`,s].filter(Boolean).join(" "),h=r.maxHP>0?Math.max(0,r.currentHP/r.maxHP*100):0,m=r.currentHP>0,g=h<=25&&h>0;return i.jsxs(xe,{className:f,children:[i.jsx(wt,{children:i.jsx("h4",{children:"Compagnon"})}),i.jsx(Ze,{children:i.jsxs("div",{className:"companion-card",children:[r.image&&i.jsx("div",{className:"companion-image-container",children:i.jsx("img",{src:r.image,alt:r.name,className:"companion-image"})}),i.jsxs("div",{className:"companion-info",children:[i.jsxs("div",{className:"companion-header",children:[i.jsx("span",{className:"companion-name",children:r.name}),c!=="compact"&&i.jsxs("span",{className:"companion-ac",children:["CA: ",r.ac]})]}),i.jsxs("div",{className:"companion-health",children:[i.jsxs("div",{className:"companion-hp-display",children:[i.jsx(Em,{className:`hp-icon ${m?"":"hp-icon--dead"}`}),i.jsxs("span",{className:`hp-text ${m?"":"hp-text--dead"}`,children:[Math.max(0,r.currentHP)," / ",r.maxHP," PV"]})]}),i.jsx(Ir,{current:r.currentHP,max:r.maxHP,size:c==="compact"?"small":"medium",animated:!0,showPercentage:c==="detailed"})]}),c==="detailed"&&i.jsxs("div",{className:"companion-details",children:[i.jsxs("div",{className:"companion-stats",children:[i.jsxs("span",{children:["Initiative: +",$e.getInitiativeModifier(r)]}),i.jsxs("span",{children:["Vitesse: ",r.speed||30," ft"]})]}),r.attacks&&r.attacks.length>0&&i.jsxs("div",{className:"companion-attacks",children:[i.jsx("h5",{children:"Attaques:"}),r.attacks.map((v,b)=>i.jsxs("div",{className:"attack-info",children:[i.jsx("span",{className:"attack-name",children:v.name}),i.jsxs("span",{className:"attack-damage",children:["(",v.damage,")"]})]},b))]})]}),u&&m&&i.jsxs("div",{className:"companion-actions",children:[i.jsx("button",{className:"action-button action-button--heal",onClick:()=>d?.("heal",r),disabled:r.currentHP>=r.maxHP,children:"Soigner"}),i.jsx("button",{className:"action-button action-button--rest",onClick:()=>d?.("rest",r),children:"Repos"})]}),!m&&i.jsxs("div",{className:"companion-status companion-status--dead",children:[i.jsx("span",{children:" Inconscient"}),u&&i.jsx("button",{className:"action-button action-button--revive",onClick:()=>d?.("revive",r),children:"Ranimer"})]}),g&&m&&i.jsx("div",{className:"companion-status companion-status--wounded",children:i.jsx("span",{children:" Gravement bless"})})]})]})})]})},N1=({playerCharacter:r,playerCompanion:c,enemies:s,positions:u,selectedAction:d,selectedTargets:f,currentTurn:h,phase:m,onTargetSelect:g,onMoveCharacter:v})=>{const[T,_]=te.useState(null),[N,R]=te.useState([]),A=te.useCallback((U,X)=>{if(u.player?.x===U&&u.player?.y===X)return{...r,id:"player",type:"player"};if(u.companion?.x===U&&u.companion?.y===X&&c)return{...c,id:"companion",type:"companion"};for(const w of s){const E=u[w.name];if(E?.x===U&&E?.y===X&&w.currentHP>0)return w}return null},[u,r,c,s]),q=(U,X)=>{const w=U/X;return w>.6?"#4caf50":w>.3?"#ff9800":"#f44336"},k=(U,X,w,E)=>Math.abs(U-w)+Math.abs(X-E),ce=(U,X)=>{if(m!=="player-movement")return!1;const w=u.player,E=u.playerStartPos||w;return!w||!E?!1:k(E.x,E.y,U,X)<=6&&!A(U,X)},F=(U,X)=>{if(!d||m!=="player-turn")return!1;const w=A(U,X);return d.type==="attack"?w?.type==="enemy"&&w.currentHP>0:d.areaOfEffect?!0:d.type==="spell"?w?.type==="enemy"&&w.currentHP>0:!1},ne=te.useCallback((U,X,w)=>{const E=[];switch(w.shape){case"sphere":{const L=Math.floor(w.radius/5);for(let V=0;V<8;V++)for(let K=0;K<6;K++)Math.sqrt(Math.pow(V-U,2)+Math.pow(K-X,2))<=L&&E.push({x:V,y:K});break}case"cube":{const L=Math.floor(w.size/5);for(let V=U;V<Math.min(U+L,8);V++)for(let K=X;K<Math.min(X+L,6);K++)V>=0&&K>=0&&E.push({x:V,y:K});break}}return E},[]),I=(U,X)=>{if(_({x:U,y:X}),d?.areaOfEffect&&m==="player-turn"){const w=ne(U,X,d.areaOfEffect);R(w)}else R([])},J=()=>{_(null),R([])},W=(U,X)=>{if(m==="player-movement"){ce(U,X)&&v?.("player",{x:U,y:X});return}if(m==="player-turn"&&d)if(d.areaOfEffect)g?.({x:U,y:X,isPosition:!0});else{const w=A(U,X);w&&F(U,X)&&g?.(w)}},ae=(U,X)=>{const w=["combat-grid__cell"],E=A(U,X);return E&&(w.push("combat-grid__cell--occupied"),w.push(`combat-grid__cell--${E.type}`),h<u.turnOrder?.length&&u.turnOrder[h]?.id===E.id&&w.push("combat-grid__cell--current-turn"),f.some(L=>L.id===E.id)&&w.push("combat-grid__cell--selected-target")),T?.x===U&&T?.y===X&&w.push("combat-grid__cell--hovered"),N.some(L=>L.x===U&&L.y===X)&&w.push("combat-grid__cell--aoe-highlight"),ce(U,X)&&w.push("combat-grid__cell--valid-movement"),F(U,X)&&w.push("combat-grid__cell--valid-target"),w.join(" ")},Ne=U=>{switch(U.type){case"player":return"";case"companion":return"";case"enemy":return"";default:return""}},Ae=(U,X)=>{const w=A(U,X),E=`${U}-${X}`;return i.jsxs("div",{className:ae(U,X),onMouseEnter:()=>I(U,X),onMouseLeave:J,onClick:()=>W(U,X),title:w?`${w.name} (${w.currentHP}/${w.maxHP} PV)`:`Case (${U}, ${X})`,children:[i.jsxs("span",{className:"combat-grid__coordinates",children:[U,",",X]}),w&&i.jsxs("div",{className:"combat-grid__combatant",children:[w.image?i.jsx("img",{src:w.image,alt:w.name,className:"combat-grid__combatant-image"}):i.jsx("span",{className:"combat-grid__combatant-icon",children:Ne(w)}),i.jsx("span",{className:"combat-grid__combatant-name",children:w.name}),i.jsxs("span",{className:"combat-grid__combatant-ac",children:["CA",w.ac]}),i.jsxs("span",{className:"combat-gird-health",children:[w.currentHP,"/",w.maxHP,""]}),i.jsx("div",{className:"combat-grid__health-bar w-95",children:i.jsx("div",{className:"combat-grid__health-fill",style:{width:`${w.currentHP/w.maxHP*100}%`,backgroundColor:q(w.currentHP,w.maxHP)}})})]}),ce(U,X)&&i.jsx("div",{className:"combat-grid__movement-indicator",children:""}),F(U,X)&&!w&&i.jsx("div",{className:"combat-grid__target-indicator",children:""})]},E)};return i.jsxs("div",{className:"combat-grid",children:[i.jsx("div",{className:"combat-grid__container",style:{gridTemplateColumns:"repeat(8, 1fr)",gridTemplateRows:"repeat(6, 1fr)"},children:Array.from({length:6},(U,X)=>Array.from({length:8},(w,E)=>Ae(E,X)))}),i.jsxs("div",{className:"combat-grid__legend",children:[i.jsxs("div",{className:"combat-grid__legend-item",children:[i.jsx("span",{className:"combat-grid__legend-icon",children:""}),i.jsx("span",{children:"Joueur"})]}),c&&i.jsxs("div",{className:"combat-grid__legend-item",children:[i.jsx("span",{className:"combat-grid__legend-icon",children:""}),i.jsx("span",{children:"Compagnon"})]}),i.jsxs("div",{className:"combat-grid__legend-item",children:[i.jsx("span",{className:"combat-grid__legend-icon",children:""}),i.jsx("span",{children:"Ennemis"})]})]})]})},C1=({currentTurn:r,turnOrder:c,phase:s,onPhaseChange:u,onNextTurn:d})=>{const{combatEnemies:f,combatPositions:h,dealDamageToEnemy:m,updateEnemyPosition:g,setDamageCallbacks:v}=Jt(),{addCombatMessage:b}=ha(),{takeDamagePlayer:x,takeDamageCompanion:M,playerCharacter:T,playerCompanion:_}=Wt(),N=new Si;te.useEffect(()=>{v(x,M)},[v,x,M]);const R=te.useCallback((U,X)=>{const w=U.type==="companion"?"companion":U.name,E=X.combatPositions[w];if(!E)return console.warn(` Position manquante pour ${U.name} (cl: ${w})`),{moved:!1,newPosition:E};const L=Kt.calculateOptimalMovement(U,E,X);if(!L)return console.log(` ${U.name} ne bouge pas - dj bien plac`),{moved:!1,newPosition:E};if(N.executeEntityMovement(U,E,L,X,b)){g(w,L);const K=Math.abs(L.x-E.x)+Math.abs(L.y-E.y);return b(`${U.name} se dplace de ${K} case(s).`),console.log(` ${U.name} bouge vers (${L.x}, ${L.y})`),{moved:!0,newPosition:L}}else return console.warn(` Mouvement chou pour ${U.name}`),{moved:!1,newPosition:E}},[N,g,b]),A=te.useCallback((U,X)=>{const w=U.type==="companion"?"companion":U.name,E=X.combatPositions[w],L=Kt.findBestTarget(U,E,{...X,playerCharacter:T,companionCharacter:_});return L||(console.log(` ${U.name}: Aucune cible trouve`),b(`${U.name} ne trouve aucune cible.`)),L},[T,_,b]),q=te.useCallback((U,X)=>{U.type==="player"?x(X):U.type==="companion"?M(X):U.type==="enemy"&&(m(U.name,X),setTimeout(()=>{const w=f.find(E=>E.name===U.name);w&&w.currentHP<=0&&b(` ${U.name} tombe au combat !`,"enemy-death")},100))},[x,M,m,b,f]),k=te.useCallback((U,X)=>{const w=U.filter(V=>V.attacks.some(K=>{const S=K.range||1;return X<=S}));if(w.length===0)return null;const E=w.filter(V=>V.attacks.some(K=>K.type==="melee"&&X<=(K.range||1))),L=w.filter(V=>V.attacks.some(K=>K.type==="ranged"&&X<=(K.range||6)));return X<=1&&E.length>0?E[0]:L.length>0?L[0]:w[0]},[]),ce=te.useCallback((U,X,w,E)=>{const V=(U.attacks||[{name:"Attaque de base",damageDice:"1d6",damageBonus:0,range:1}]).filter($=>{const Z=$.range||1;return E<=Z});if(V.length===0)return console.log(` ${U.name} est trop loin pour attaquer (distance: ${E})`),b(`${U.name} est trop loin pour attaquer.`),!1;const K=V[Math.floor(Math.random()*V.length)],S=N.executeEntityAttack(U,K,X,b);return S.success&&q(X,S.damage),S.success},[N,b,q]),F=te.useCallback((U,X,w,E)=>{const L=k(U.attackSets,E);if(!L)return console.log(` ${U.name} n'a pas d'attaque viable  distance ${E}`),b(`${U.name} ne peut pas attaquer  cette distance.`),!1;console.log(` ${U.name} utilise: ${L.name}`),b(`${U.name} lance ${L.name}.`);let V=!1,K=0;for(const S of L.attacks){if(X.character.currentHP<=0){console.log(` ${X.name} est mort, arrt des attaques restantes`);break}K++;const $=N.executeEntityAttack(U,S,X,b);$.success&&(V=!0,q(X,$.damage),K<L.attacks.length&&setTimeout(()=>{},200))}return V},[N,b,k,q]),ne=te.useCallback((U,X,w)=>{if(!X||!X.character)return console.warn(` Cible invalide pour ${U.name}`),!1;if(X.character.currentHP<=0)return console.log(` ${X.name} est dj mort, ${U.name} passe son tour`),b(`${U.name} ralise que ${X.name} est dj tomb au combat.`),!1;const E=U.type==="companion"?"companion":U.name,L=w.combatPositions[E],V=Ut(L,X.position);return U.attackSets&&U.attackSets.length>0?F(U,X,w,V):ce(U,X,w,V)},[F,ce,b]),I=te.useCallback(U=>{console.log(` === Tour de ${U.name} ===`);const X=f.find(S=>S.name===U.name);if(!X||X.currentHP<=0){console.log(` ${U.name} est mort, tour pass`),setTimeout(()=>{ae(!1),d()},200);return}const w={combatPositions:Jt.getState().combatPositions,combatEnemies:f,playerCharacter:T,companionCharacter:_},E=R(X,w),L=f.find(S=>S.name===U.name);if(!L||L.currentHP<=0){console.log(` ${U.name} est mort pendant le mouvement, tour annul`),setTimeout(()=>{ae(!1),d()},200);return}const V={...w,combatPositions:Jt.getState().combatPositions},K=A(L,V);if(!K){setTimeout(()=>{ae(!1),d()},200);return}setTimeout(()=>{const S=f.find(Z=>Z.name===U.name);if(!S||S.currentHP<=0){console.log(` ${U.name} est mort avant l'attaque, tour annul`),ae(!1),d();return}const $=ne(S,K,V);console.log($?` ${U.name} a termin son attaque`:` ${U.name} n'a pas pu attaquer`),setTimeout(()=>{ae(!1),d()},300)},E.moved?800:400)},[f,T,_,R,A,ne,d,u]),J=te.useCallback(U=>{if(console.log(` === Tour de ${U.name} ===`),!_||_.currentHP<=0){console.log(" Le compagnon est mort, tour pass"),b(`${U.name} est trop bless pour agir.`),setTimeout(()=>{ae(!1),d()},500);return}const X={combatPositions:Jt.getState().combatPositions,combatEnemies:f.filter(V=>V.currentHP>0),playerCharacter:null,companionCharacter:null},w={..._,name:U.name,type:"companion",attacks:_.attacks||[{name:"Attaque de base",damageDice:"1d6",damageBonus:0,range:1}]},E=R(w,X),L={...X,combatPositions:Jt.getState().combatPositions};setTimeout(()=>{const V=A(w,L);if(!V){b(`${U.name} ne trouve aucune cible.`),setTimeout(()=>{ae(!1),d()},500);return}const K=ne(w,V,L);console.log(K?` ${U.name} a attaqu avec succs`:` ${U.name} n'a pas pu attaquer`),setTimeout(()=>{ae(!1),d()},500)},E.moved?1e3:500)},[_,f,N,g,b,ne,d,u]),[W,ae]=ze.useState(!1),[Ne,Ae]=ze.useState(null);return te.useEffect(()=>{if(s!=="executing-turn"||!r||W)return;const{turnCounter:U,currentTurnIndex:X}=Jt.getState(),w=`${r.name}-${r.type}-${U}-${X}`;if(Ne===w){console.log(` Tour dj excut: ${w}`);return}console.log(` Excution du tour: ${r.name} (${r.type}) - Round: ${U}, Index: ${X}`),ae(!0),Ae(w);const E=f.every(S=>S.currentHP<=0),L=!T||T.currentHP<=0;if(E){console.log(" Victoire ! Tous les ennemis sont morts"),ae(!1),u("victory");return}else if(L){console.log(" Dfaite ! Le joueur est mort"),ae(!1),u("defeat");return}if((()=>{if(r.type==="player")return!T||T.currentHP<=0;if(r.type==="companion")return!_||_.currentHP<=0;if(r.type==="enemy"){const S=f.find($=>$.name===r.name);return!S||S.currentHP<=0}return!1})()){console.log(` ${r.name} est mort, tour pass automatiquement`),ae(!1);const S=f.every(Z=>Z.currentHP<=0),$=!T||T.currentHP<=0;if(S){console.log(" Tous les ennemis sont morts - Victoire !"),u("victory");return}else if($){console.log(" Le joueur est mort - Dfaite !"),u("defeat");return}d();return}const K=S=>{try{S()}catch($){console.error(` Erreur pendant l'excution du tour ${r.name}:`,$),ae(!1),d()}};switch(r.type){case"enemy":K(()=>{I(r),setTimeout(()=>ae(!1),800)});break;case"companion":K(()=>{J(r),setTimeout(()=>ae(!1),800)});break;case"player":T&&T.currentHP>0?(console.log(` Tour du joueur: ${r.name}`),ae(!1),setTimeout(()=>{f.every($=>$.currentHP<=0)&&(console.log(" Victoire dtecte aprs le tour du joueur !"),u("victory"))},100)):(console.log(" Joueur mort, fin de combat"),ae(!1),u("defeat"));break;default:console.warn(` Type de tour inconnu: ${r.type}`),ae(!1),d()}},[s,r,W,Ne,I,J,d,u,T,_,f]),null},E1=({playerCharacter:r,selectedAction:c,selectedTargets:s,onSelectAction:u,onExecuteAction:d,onPassTurn:f,canMove:h=!0,onMoveToggle:m})=>{const v=(()=>{const N=[];if(r.equipment?.mainHand){const A=r.equipment.mainHand,q=cl[A];q&&N.push({...q,id:A})}const R=(r.weapons||[]).map(A=>cl[A]).filter(A=>A).map(A=>({...A,id:A.id}));return N.push(...R),N})(),b=v.length>0?v.map(N=>({id:`attack_${N.id||N.name}`,type:"attack",name:N.name,description:`Attaque avec ${N.name}`,damage:typeof N.damage=="object"?`${N.damage.dice}${N.damage.bonus>0?`+${N.damage.bonus}`:""}`:N.damage,damageType:N.damageType,range:N.category==="ranged"?N.range?.ranged:N.range?.melee||1,stat:N.stat,icon:N.category==="ranged"?"":""})):[{id:"attack_unarmed",type:"attack",name:"Attaque  mains nues",description:"Attaque de base sans arme",damage:"1d4",damageType:"contondant",range:1,stat:"force",icon:""}],x=[];if(r.spellcasting){const N=(r.spellcasting.cantrips||[]).map(A=>{const q=$a[A]||{};return{id:`cantrip_${A}`,type:"spell",name:A,description:`Cantrip: ${A}`,level:0,range:q.range||60,projectiles:q.projectiles||1,damage:q.damage,requiresAttackRoll:q.requiresAttackRoll,icon:""}}),R=(r.spellcasting.preparedSpells||[]).filter(A=>{const k=($a[A]||{}).level||1,ce=r.spellcasting.spellSlots||{};for(let F=k;F<=9;F++){const ne=ce[F];if(ne&&ne.available>0)return!0}return!1}).map(A=>{const q=$a[A]||{};return{id:`spell_${A}`,type:"spell",name:A,description:`Sort: ${A}`,level:q.level||1,range:q.range||30,projectiles:q.projectiles||1,damage:q.damage,requiresAttackRoll:q.requiresAttackRoll,icon:""}});x.push(...N,...R)}const M=N=>i.jsx(fm,{variant:c?.id===N.id?"primary":"secondary",onClick:()=>u(N),disabled:c&&c.id!==N.id,children:i.jsxs("div",{className:"action-button__content",children:[i.jsx("span",{className:"action-button__icon",children:N.icon}),i.jsxs("div",{className:"action-button__details",children:[i.jsx("span",{className:"action-button__name",children:N.name}),N.damage&&i.jsxs("span",{className:"action-button__damage",children:["Dgts: ",typeof N.damage=="string"?N.damage:`${N.damage.dice}${N.damage.bonus>0?`+${N.damage.bonus}`:""}`]}),N.level>0&&i.jsxs("span",{className:"action-button__level",children:["Niveau ",N.level]})]})]})},N.id);c&&s.length>0;const T=c?.projectiles||1,_=s.length<T;return i.jsxs(xe,{className:"combat-action-panel",children:[i.jsxs(wt,{children:[i.jsxs("h3",{children:[" Actions de ",r.name]}),i.jsx("div",{className:"combat-action-panel__status",children:c&&i.jsxs("span",{className:"selected-action",children:[c.name," slectionn",_&&i.jsxs("span",{className:"target-count",children:["(",s.length,"/",T," cibles)"]})]})})]}),i.jsxs(Ze,{children:[h&&i.jsxs("div",{className:"combat-action-section",children:[i.jsx("h4",{children:"Mouvement"}),i.jsx(fm,{variant:"ghost",onClick:m,disabled:!!c,children:i.jsxs("div",{className:"action-button__content",children:[i.jsx("span",{className:"action-button__icon",children:""}),i.jsx("span",{className:"action-button__name",children:"Se dplacer"})]})})]}),b.length>0&&i.jsxs("div",{className:"combat-action-section",children:[i.jsx("h4",{children:"Attaques"}),i.jsx("div",{className:"combat-actions-grid",children:b.map(M)})]}),x.length>0&&i.jsxs("div",{className:"combat-action-section",children:[i.jsx("h4",{children:"Sorts"}),i.jsx("div",{className:"combat-actions-grid",children:x.map(M)})]}),c&&i.jsx("div",{className:"combat-action-instructions",children:i.jsx("p",{children:c.areaOfEffect?"Cliquez sur une case pour cibler la zone d'effet":_?`Slectionnez ${T-s.length} cible(s) pour excuter l'action`:"Action prte  tre excute"})}),s.length>0&&i.jsxs("div",{className:"combat-selected-targets",children:[i.jsx("h5",{children:"Cibles slectionnes:"}),i.jsx("ul",{className:"combat-selected-targets__list",children:s.map((N,R)=>i.jsxs("li",{className:"selected-target",children:[N.name," (PV: ",N.currentHP,"/",N.maxHP,")"]},R))})]})]}),i.jsx(Ei,{children:i.jsxs("div",{className:"combat-action-panel__controls",children:[c&&i.jsx(ie,{variant:"ghost",onClick:()=>u(null),children:"Annuler"}),i.jsx(ie,{variant:"secondary",onClick:f,children:"Passer le tour"})]})})]})},T1=({playerCharacter:r,playerCompanion:c,encounterData:s,onCombatEnd:u,onReplayCombat:d,combatKey:f})=>{const{combatPhase:h,currentTurnIndex:m,turnOrder:g,combatEnemies:v,combatPositions:b,playerAction:x,actionTargets:M,defeated:T,victory:_,isInitialized:N,initializeCombat:R,startCombat:A,setTurnPhase:q,nextTurn:k,setPlayerAction:ce,setActionTargets:F,resetCombat:ne,moveCharacter:I}=Jt(),J=g[m],W=()=>F([]),{addCombatMessage:ae,combatLog:Ne,clearCombatLog:Ae}=ha();te.useEffect(()=>{!s||!s.enemies?.length||(f!==void 0&&ne(),N||R(s,r,c))},[s,f,N,r,c,R,A,ne,ae,g]),te.useEffect(()=>{h==="initiative-display"&&(ae("Un combat commence !","combat-start"),g.forEach(V=>{const K=`${V.name} a obtenu ${V.initiative} en initiative !`;ae(K,"combat-start")}))},[h]),te.useEffect(()=>{if(h==="turn"&&J){console.log(` Phase 'turn' dtecte pour ${J.name} (${J.type})`);const V=v.every(S=>S.currentHP<=0),K=!r||r.currentHP<=0;if(V){console.log(" Victoire dtecte dans la transition de phase !"),q("victory");return}else if(K){console.log(" Dfaite dtecte dans la transition de phase !"),q("defeat");return}J.type==="player"?(console.log(` Passage en phase player-turn pour ${J.name}`),q("player-turn")):(J.type==="enemy"||J.type==="companion")&&(console.log(` Passage en phase executing-turn pour ${J.name}`),q("executing-turn"))}},[h,J,q,v,r,c]);const U=te.useCallback(V=>{ce(V)},[ce]),X=te.useCallback(V=>{if(!x)return;const K=[...M,V];F(K);const S=x.projectiles||1;K.length>=S&&setTimeout(()=>{const Z=new Si().executePlayerAction(r,x,K,v,b);Z.messages.forEach(Q=>ae(Q.text,Q.type)),Z.damage&&Z.damage.length>0&&Z.damage.forEach(Q=>{const le=v.find(me=>me.name===Q.targetId||me.id===Q.targetId);if(le){const{dealDamageToEnemy:me}=Jt.getState();me(le.name,Q.damage),setTimeout(()=>{const oe=v.find(et=>et.name===le.name);oe&&oe.currentHP<=0&&le.currentHP>0&&ae(` ${le.name} tombe au combat !`,"enemy-death")},100)}}),W(),ce(null),k()},500)},[x,M,F,r,v,b,ae,W,ce,k]),w=te.useCallback(()=>{if(!x||!M.length)return;new Si().executePlayerAction(r,x,M,v,b).messages.forEach(S=>ae(S.text,S.type)),W(),ce(null),k()},[x,M,r,v,b,ae,W,ce,k]),E=()=>{ae(`${r.name} passe son tour.`),W(),ce(null),k()},L=()=>{switch(h){case"initializing":return i.jsx(xe,{children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:"Initialisation du combat..."}),i.jsx("p",{children:"Prparation des combattants et jets d'initiative"})]})});case"initiative-display":return i.jsx(xe,{children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:"Initiative lance !"}),i.jsx("p",{children:"Les jets d'initiative ont t effectus. Prt  commencer le combat ?"}),i.jsx(ie,{onClick:()=>A(),children:"Commencer le combat"})]})});case"player-turn":return i.jsx(E1,{playerCharacter:r,selectedAction:x,selectedTargets:M,onSelectAction:U,onExecuteAction:w,onPassTurn:E,canMove:!b.playerHasMoved,onMoveToggle:()=>q("player-movement")});case"player-movement":return i.jsx(xe,{children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:"Phase de mouvement"}),i.jsx("p",{children:"Cliquez sur une case pour vous dplacer (maximum 6 cases)"}),i.jsx(ie,{onClick:()=>q("player-turn"),children:"Terminer le mouvement"})]})});case"victory":return i.jsx(xe,{children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:" Victoire !"}),i.jsx("p",{children:"Tous les ennemis ont t vaincus !"}),i.jsx(ie,{onClick:()=>{Ae(),u?.(s)},children:"Continuer l'aventure"})]})});case"defeat":return i.jsx(xe,{variant:"danger",children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:" Dfaite"}),i.jsx("p",{children:"Vous avez t vaincu..."}),i.jsx("div",{className:"combat-defeat-actions",children:i.jsx(ie,{variant:"secondary",onClick:d,children:"Rejouer le combat"})})]})});case"enemy-turn":case"companion-turn":case"executing-turn":return i.jsx(xe,{children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:"Tour en cours"}),i.jsxs("p",{children:[J?.type==="enemy"&&`${J.name} rflchit...`,J?.type==="companion"&&`${J.name} agit...`,(!J||J.type==="player")&&"Attendez la fin du tour en cours..."]})]})});default:return i.jsx(xe,{children:i.jsxs("div",{className:"combat-phase-content",children:[i.jsx("h3",{children:"Combat en cours"}),i.jsxs("p",{children:["Phase: ",h," - Attendez..."]})]})})}};return N?i.jsxs("div",{className:"combat-container",children:[i.jsx(C1,{currentTurn:J,turnOrder:g,phase:h,onPhaseChange:q,onNextTurn:k}),i.jsxs("div",{className:"combat-layout",children:[i.jsx("div",{className:"combat-grid-section",children:i.jsx(N1,{playerCharacter:r,playerCompanion:c,enemies:v,positions:b,selectedAction:x,selectedTargets:M,currentTurn:J,phase:h,onTargetSelect:X,onMoveCharacter:(V,K)=>{I(V,K)}})}),i.jsxs("div",{className:"combat-side-container",children:[i.jsx("div",{className:"combat-controls",children:L()}),i.jsx("div",{className:"combat-log-section",children:i.jsx(Fn,{title:"Combat",maxEntries:10,showTimestamps:!1})})]})]})]}):i.jsx("div",{className:"combat-container",children:i.jsx(xe,{children:i.jsx("div",{className:"combat-loading",children:i.jsx("h3",{children:"Chargement du combat..."})})})})},A1=({item:r,character:c,viewMode:s="grid",onClick:u,onUse:d,onEquip:f,onUnequip:h,className:m=""})=>{const g=r.nom||r.name||"Objet inconnu",v=r.description||"Aucune description",b=r.quantity||1,x=r.poids||r.weight||.1,M=r.rarity||"commun",T=r.type||"misc",_=r.equipped||!1,N=["inventory-item",`inventory-item--${s}`,`inventory-item--${T}`,`inventory-item--${M.replace(/\s+/g,"-")}`,_&&"inventory-item--equipped",m].filter(Boolean).join(" "),R=()=>{switch(T){case"weapon":case"arme":return"";case"armor":case"armure":return"";case"consumable":case"potion":return"";case"accessory":case"accessoire":return"";case"outil":return"";case"livre":return"";default:return""}},A=()=>{switch(M?.toLowerCase()){case"commun":return"";case"peu commun":return"";case"rare":return"";case"trs rare":return"";case"lgendaire":return"";case"artfact":return"";default:return""}},q=I=>{switch(I?.toLowerCase()){case"commun":return"#9e9e9e";case"peu commun":return"#4caf50";case"rare":return"#2196f3";case"trs rare":return"#9c27b0";case"lgendaire":return"#ff9800";case"artfact":return"#f44336";default:return"#9e9e9e"}},k=()=>["weapon","armor","accessory"].includes(T)&&!_,ce=()=>r.effet||r.action||T==="potion"||T==="consumable",F=()=>i.jsx(xe,{className:N,onClick:u,style:{borderColor:q(M)},children:i.jsxs("div",{className:"inventory-item__content",children:[i.jsxs("div",{className:"inventory-item__header",title:`${g} - ${v} item ${M}`,children:[i.jsx("span",{className:"inventory-item__icon",children:R()}),i.jsx("h5",{className:"inventory-item__name",children:g}),b>1&&i.jsxs("span",{className:"inventory-item__quantity",children:["x ",b]}),i.jsx("span",{className:"inventory-item__icon",children:A()}),_&&i.jsx("span",{className:"inventory-item__equipped-badge",children:""})]}),i.jsx("div",{className:"inventory-item__info",children:s!=="compact"&&i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"inventory-item__description",children:v.length>100?`${v.substring(0,100)}...`:v}),i.jsxs("div",{className:"inventory-item__stats",children:[x>0&&i.jsxs("span",{className:"inventory-item__weight",children:[" ",x," kg"]}),i.jsx("span",{className:"inventory-item__rarity",children:M})]})]})}),s!=="compact"&&i.jsxs("div",{className:"inventory-item__actions",children:[ce()&&i.jsx(ie,{size:"small",variant:"primary",onClick:I=>{I.stopPropagation(),d?.()},children:"Utiliser"}),k()&&i.jsx(ie,{size:"small",variant:"secondary",onClick:I=>{I.stopPropagation(),f?.()},children:"quiper"}),_&&i.jsx(ie,{size:"small",variant:"ghost",onClick:I=>{I.stopPropagation(),h?.()},children:"Retirer"})]})]})}),ne=()=>i.jsx("div",{className:N,onClick:u,children:i.jsxs("div",{className:"inventory-item__list-content",children:[i.jsxs("div",{className:"inventory-item__header",title:`${g} - ${v} item ${M}`,children:[i.jsx("span",{className:"inventory-item__icon",children:R()}),i.jsx("h5",{className:"inventory-item__name",children:g}),b>1&&i.jsxs("span",{className:"inventory-item__quantity",children:["x ",b]}),i.jsx("span",{className:"inventory-item__icon",children:A()}),_&&i.jsx("span",{className:"inventory-item__equipped-badge",children:""})]}),i.jsxs("div",{className:"inventory-item__list-actions",children:[ce()&&i.jsx(ie,{size:"small",variant:"primary",onClick:I=>{I.stopPropagation(),d?.()},children:"Utiliser"}),k()&&i.jsx(ie,{size:"small",variant:"secondary",onClick:I=>{I.stopPropagation(),f?.()},children:"quiper"}),_&&i.jsx(ie,{size:"small",variant:"ghost",onClick:I=>{I.stopPropagation(),h?.()},children:"Retirer"})]})]})});switch(s){case"list":return ne();case"compact":case"grid":default:return F()}},M1=({items:r=[],viewMode:c="grid",onItemClick:s,onItemUse:u,onItemEquip:d,onItemUnequip:f,character:h,className:m=""})=>{const g=["inventory-grid",`inventory-grid--${c}`,m].filter(Boolean).join(" ");return r.length===0?i.jsx("div",{className:"inventory-grid-empty"}):i.jsx("div",{className:g,children:r.map((v,b)=>i.jsx(A1,{item:v,character:h,viewMode:c,onClick:()=>s?.(v),onUse:()=>u?.(v),onEquip:()=>d?.(v),onUnequip:()=>f?.(v)},v.id||v.nom||v.name||b))})},D1=({filters:r={},onFilterChange:c,sortBy:s="name",onSortChange:u,availableItems:d=[],className:f=""})=>{const h=R=>{c?.({searchTerm:R.target.value})},m=R=>{c?.({category:R})},g=R=>{c?.({rarity:R})},v=()=>{c?.({category:"all",rarity:"all",searchTerm:""})},b=R=>R.type==="weapon"||R.type==="arme"||R.degats?"weapons":R.type==="armor"||R.type==="armure"||R.ca?"armor":R.type==="consumable"||R.type==="potion"||R.effet?"consumables":R.type==="accessoire"?"accessories":"misc",x=[{value:"all",label:"Tout",icon:""},{value:"weapons",label:"Armes",icon:""},{value:"armor",label:"Armures",icon:""},{value:"consumables",label:"Consommables",icon:""},{value:"accessories",label:"Accessoires",icon:""},{value:"misc",label:"Divers",icon:""}],M=ze.useMemo(()=>{const R=new Set(["all"]);return d.forEach(A=>{R.add(b(A))}),x.filter(A=>R.has(A.value))},[d]),T=[{value:"all",label:"Toutes",color:"#9e9e9e",icon:""},{value:"commun",label:"Commun",color:"#9e9e9e",icon:""},{value:"peu commun",label:"Peu commun",color:"#4caf50",icon:""},{value:"rare",label:"Rare",color:"#2196f3",icon:""},{value:"trs rare",label:"Trs rare",color:"#9c27b0",icon:""},{value:"lgendaire",label:"Lgendaire",color:"#ff9800",icon:""}],_=ze.useMemo(()=>{const R=new Set(["all"]);return d.forEach(A=>{const q=A.rarity||"commun";R.add(q)}),T.filter(A=>R.has(A.value))},[d]),N=[{value:"name",label:"Nom",icon:""},{value:"type",label:"Type",icon:""},{value:"weight",label:"Poids",icon:""},{value:"rarity",label:"Raret",icon:""}];return i.jsxs("div",{className:`inventory-filters ${f}`,children:[i.jsx("div",{className:"inventory-filters__search",children:i.jsxs("div",{className:"search-input-group",children:[i.jsx("span",{className:"search-icon",children:""}),i.jsx("input",{type:"text",placeholder:"Rechercher un objet...",value:r.searchTerm||"",onChange:h,className:"search-input"}),r.searchTerm&&i.jsx("button",{type:"button",className:"search-clear",onClick:()=>c?.({searchTerm:""}),children:""})]})}),i.jsxs("div",{className:"inventory-filters__section",children:[i.jsx("h5",{className:"inventory-filters__label",children:"Catgories"}),i.jsx(pa,{className:"inventory-filters__category-buttons",children:M.map(R=>i.jsxs(ie,{variant:r.category===R.value?"primary":"ghost",size:"small",onClick:()=>m(R.value),children:[i.jsx("span",{className:"button-icon",children:R.icon}),R.label]},R.value))})]}),i.jsxs("div",{className:"inventory-filters__section",children:[i.jsx("h5",{className:"inventory-filters__label",children:"Raret"}),i.jsx(pa,{className:"inventory-filters__rarity-buttons",children:_.map(R=>i.jsxs(ie,{variant:r.rarity===R.value?"primary":"ghost",size:"small",onClick:()=>g(R.value),style:r.rarity===R.value?{borderColor:R.color}:{},children:[i.jsx("span",{className:"button-icon",children:R.icon}),R.label]},R.value))})]}),i.jsxs("div",{className:"inventory-filters__section",children:[i.jsx("h5",{className:"inventory-filters__label",children:"Trier par"}),i.jsx(pa,{className:"inventory-filters__sort-buttons",children:N.map(R=>i.jsxs(ie,{variant:s===R.value?"primary":"ghost",size:"small",onClick:()=>u?.(R.value),children:[i.jsx("span",{className:"button-icon",children:R.icon}),R.label]},R.value))})]}),i.jsx("div",{className:"inventory-filters__actions",children:i.jsx(ie,{variant:"ghost",size:"small",onClick:v,disabled:r.category==="all"&&r.rarity==="all"&&!r.searchTerm,children:" Effacer les filtres"})})]})},R1=({item:r,character:c,onClose:s,onUse:u,onEquip:d,onUnequip:f})=>{if(!r)return null;const h=r.nom||r.name||"Objet inconnu",m=r.description||"Aucune description disponible",g=r.quantity||1,v=r.poids||r.weight||0,b=r.rarity||"commun",x=r.type||"misc",M=r.equipped||!1,T=()=>{const k=[];return r.degats&&k.push({label:"Dgts",value:r.degats,icon:""}),r.ca!==void 0&&k.push({label:"Classe d'Armure",value:`+${r.ca}`,icon:""}),r.portee&&k.push({label:"Porte",value:`${r.portee} m`,icon:""}),r.proprietes&&r.proprietes.length>0&&k.push({label:"Proprits",value:r.proprietes.join(", "),icon:""}),r.effet&&k.push({label:"Effet",value:r.effet,icon:""}),r.duree&&k.push({label:"Dure",value:r.duree,icon:""}),r.prix&&k.push({label:"Prix",value:`${r.prix} po`,icon:""}),k},_=()=>{switch(x){case"arme":return"";case"armure":return"";case"potion":return"";case"accessoire":return"";case"outil":return"";case"livre":return"";case"gemme":return"";case"composant":return"";default:return""}},N=k=>{switch(k?.toLowerCase()){case"commun":return"#9e9e9e";case"peu commun":return"#4caf50";case"rare":return"#2196f3";case"trs rare":return"#9c27b0";case"lgendaire":return"#ff9800";case"artfact":return"#f44336";default:return"#9e9e9e"}},R=()=>["arme","armure","accessoire"].includes(x)&&!M,A=()=>r.effet||r.action||x==="potion",q=T();return i.jsx(au,{onClose:s,size:"medium",children:i.jsxs(xe,{className:"item-detail-modal",children:[i.jsx(wt,{children:i.jsxs("div",{className:"item-detail-header",children:[i.jsxs("div",{className:"item-detail-icon-container",children:[i.jsx("span",{className:"item-detail-icon",style:{color:N(b)},children:_()}),g>1&&i.jsxs("span",{className:"item-detail-quantity",children:["x",g]})]}),i.jsxs("div",{className:"item-detail-title",children:[i.jsx("h2",{className:"item-detail-name",children:h}),i.jsxs("div",{className:"item-detail-meta",children:[i.jsx("span",{className:"item-detail-rarity",style:{color:N(b)},children:b}),i.jsx("span",{className:"item-detail-type",children:x}),M&&i.jsx("span",{className:"item-detail-equipped",children:" quip"})]})]})]})}),i.jsxs(Ze,{children:[i.jsxs("div",{className:"item-detail-section",children:[i.jsx("h4",{children:"Description"}),i.jsx("p",{className:"item-detail-description",children:m})]}),q.length>0&&i.jsxs("div",{className:"item-detail-section",children:[i.jsx("h4",{children:"Proprits"}),i.jsx("div",{className:"item-detail-properties",children:q.map((k,ce)=>i.jsxs("div",{className:"item-detail-property",children:[i.jsx("span",{className:"property-icon",children:k.icon}),i.jsxs("span",{className:"property-label",children:[k.label,":"]}),i.jsx("span",{className:"property-value",children:k.value})]},ce))})]}),i.jsxs("div",{className:"item-detail-section",children:[i.jsx("h4",{children:"Informations"}),i.jsxs("div",{className:"item-detail-stats",children:[i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:""}),i.jsx("span",{className:"stat-label",children:"Poids:"}),i.jsxs("span",{className:"stat-value",children:[v," kg"]})]}),g>1&&i.jsxs("div",{className:"stat-item",children:[i.jsx("span",{className:"stat-icon",children:""}),i.jsx("span",{className:"stat-label",children:"Quantit:"}),i.jsx("span",{className:"stat-value",children:g})]})]})]}),(r.prerequis||r.restrictions)&&i.jsxs("div",{className:"item-detail-section",children:[i.jsx("h4",{children:"Restrictions"}),i.jsxs("div",{className:"item-detail-restrictions",children:[r.prerequis&&i.jsxs("p",{className:"restriction",children:[i.jsx("span",{className:"restriction-icon",children:""}),"Prrequis: ",r.prerequis]}),r.restrictions&&i.jsxs("p",{className:"restriction",children:[i.jsx("span",{className:"restriction-icon",children:""}),r.restrictions]})]})]})]}),i.jsx(Ei,{children:i.jsxs("div",{className:"item-detail-actions",children:[i.jsx(ie,{variant:"ghost",onClick:s,children:"Fermer"}),A()&&i.jsx(ie,{variant:"primary",onClick:()=>{u?.(r),s()},children:" Utiliser"}),R()&&i.jsx(ie,{variant:"secondary",onClick:()=>{d?.(r),s()},children:" quiper"}),M&&i.jsx(ie,{variant:"ghost",onClick:()=>{f?.(r),s()},children:" Retirer"})]})})]})})},z1=({className:r="",characterInventory:c,onUseItem:s})=>{const{selectedCharacter:u,useItem:d,equipItem:f,unequipItem:h}=Wt(),m=u,{addCombatMessage:g}=ha(),[v,b]=te.useState(null),[x,M]=te.useState({category:"all",rarity:"all",searchTerm:""}),[T,_]=te.useState("name"),[N,R]=te.useState("grid"),A=te.useMemo(()=>{if(!m)return{items:[],totalWeight:0,maxWeight:0,allItems:[]};const J=m.equipment?Object.values(m.equipment).filter(Boolean).map(w=>{const E=cl[w];return E?{...E,id:w,equipped:!0}:null}).filter(Boolean):[],W=[...m.inventory||[],...J,...m.equipement?.inventaire||[],...m.equipement?.armes||[],...m.equipement?.armures||[],...m.equipement?.accessoires||[]];let ae=W.filter(w=>{if(x.category!=="all"&&Fr(w)!==x.category||x.rarity!=="all"&&(w.rarity||"commun")!==x.rarity)return!1;if(x.searchTerm){const E=x.searchTerm.toLowerCase();return w.nom?.toLowerCase().includes(E)||w.description?.toLowerCase().includes(E)||w.name?.toLowerCase().includes(E)}return!0});ae=H1(ae,T);const Ne=W.reduce((w,E)=>w+(E.poids||E.weight||.1)*(E.quantity||1),0),Ae=O1(m),U=W.reduce((w,E)=>w+(E.quantity||1),0),X=ae.reduce((w,E)=>w+(E.quantity||1),0);return{items:ae,totalWeight:Ne,maxWeight:Ae,totalItemCount:U,filteredItemCount:X,allItems:W}},[m?.inventory,m?.equipement,x,T]),q=J=>{try{const W=d(J.id||J.nom||J.name);W.success?(g(W.message,"item"),console.log(J.name,W.message),s&&s(J.id||J.nom||J.name)):g(W.message,"error")}catch(W){console.error("Erreur lors de l'utilisation de l'objet:",W),g(`Erreur: ${W.message}`,"error")}},k=J=>{try{const W=J.id||J.name||J.nom;f(W,"player"),g(`${J.nom||J.name} quip !`,"success")}catch(W){console.error("Erreur lors de l'quipement:",W),g(`Erreur lors de l'quipement: ${W.message}`,"error")}},ce=J=>{try{const W=J.id||J.name||J.nom;h(W,"player"),g(`${J.nom||J.name} retir !`,"info")}catch(W){console.error("Erreur lors du dsquipement:",W),g(`Erreur lors du dsquipement: ${W.message}`,"error")}},F=J=>{M({...x,...J})},ne=J=>{_(J)};if(!m)return i.jsx(xe,{className:`inventory-panel ${r}`,children:i.jsx(Ze,{children:i.jsx("p",{children:"Aucun personnage slectionn"})})});const I=A.totalWeight>A.maxWeight;return i.jsxs(xe,{className:`inventory-panel ${r}`,children:[i.jsx(wt,{children:i.jsxs("div",{className:"inventory-panel__header",children:[i.jsxs("h3",{children:[" Inventaire de ",m.name]}),i.jsxs("div",{className:"inventory-panel__stats",children:[i.jsxs("div",{className:`inventory-weight ${I?"inventory-weight--overloaded":""}`,children:[i.jsxs("span",{children:[" Poids: ",A.totalWeight.toFixed(1),"/",A.maxWeight," kg"]}),I&&i.jsx("span",{className:"overload-warning",children:" Surcharge"})]}),i.jsx("div",{className:"inventory-count",children:i.jsxs("span",{children:[" Objets: ",A.filteredItemCount,"/",A.totalItemCount]})})]}),i.jsxs("div",{className:"inventory-panel__controls",children:[i.jsx(ie,{variant:N==="grid"?"primary":"ghost",size:"small",onClick:()=>R("grid"),children:" Grille"}),i.jsx(ie,{variant:N==="list"?"primary":"ghost",size:"small",onClick:()=>R("list"),children:" Liste"})]})]})}),i.jsxs(Ze,{children:[i.jsx(D1,{filters:x,onFilterChange:F,sortBy:T,onSortChange:ne,availableItems:A.allItems}),i.jsx(M1,{items:A.items,viewMode:N,onItemClick:b,onItemUse:q,onItemEquip:k,onItemUnequip:ce,character:m}),A.items.length===0&&i.jsx("div",{className:"inventory-empty",children:A.allItemsCount===0?i.jsx("p",{children:" Votre inventaire est vide"}):i.jsx("p",{children:" Aucun objet ne correspond aux filtres appliqus"})})]}),v&&i.jsx(R1,{item:v,character:m,onClose:()=>b(null),onUse:q,onEquip:k,onUnequip:ce})]})};function Fr(r){return r.type==="weapon"||r.type==="arme"||r.degats?"weapons":r.type==="armor"||r.type==="armure"||r.ca?"armor":r.type==="consumable"||r.type==="potion"||r.effet?"consumables":r.type==="accessoire"?"accessories":"misc"}function H1(r,c){return[...r].sort((s,u)=>{switch(c){case"name":return(s.nom||s.name||"").localeCompare(u.nom||u.name||"");case"weight":return(s.poids||s.weight||0)-(u.poids||u.weight||0);case"rarity":const d={commun:0,"peu commun":1,rare:2,"trs rare":3,lgendaire:4};return(d[s.rarity]||0)-(d[u.rarity]||0);case"type":return Fr(s).localeCompare(Fr(u));default:return 0}})}function O1(r){return r?.stats?.force?r.stats.force*7.5:50}const q1=({spellSlots:r={},onSlotUse:c,onSlotRestore:s,showDetails:u=!0,className:d=""})=>{const f=Object.keys(r).map(v=>parseInt(v)).sort((v,b)=>v-b);if(f.length===0)return i.jsx(xe,{className:`spell-slot-tracker ${d}`,children:i.jsx("div",{className:"spell-slot-tracker__empty",children:i.jsx("p",{children:"Aucun emplacement de sort disponible"})})});const h=f.reduce((v,b)=>{const x=r[b];return v+(x?.max||0)},0),m=f.reduce((v,b)=>{const x=r[b];return v+(x?.used||0)},0),g=h-m;return i.jsx(xe,{className:`spell-slot-tracker ${d}`,children:i.jsxs("div",{className:"spell-slot-tracker__content",children:[i.jsxs("div",{className:"spell-slot-tracker__header",children:[i.jsx("h4",{className:"spell-slot-tracker__title",children:" Emplacements de sorts"}),i.jsx("div",{className:"spell-slot-tracker__summary",children:i.jsxs("span",{className:"slot-summary",children:[g,"/",h," disponibles"]})})]}),i.jsx("div",{className:"spell-slot-tracker__grid",children:f.map(v=>{const b=r[v];if(!b||b.max===0)return null;const x=b.max-(b.used||0),M=b.max>0?(b.used||0)/b.max*100:0;return i.jsxs("div",{className:"spell-slot-level",children:[i.jsxs("div",{className:"spell-slot-level__header",children:[i.jsxs("h5",{className:"spell-slot-level__title",children:["Niveau ",v]}),i.jsxs("span",{className:"spell-slot-level__count",children:[x,"/",b.max]})]}),i.jsx("div",{className:"spell-slot-level__progress",children:i.jsx("div",{className:"spell-slot-progress-bar",children:i.jsx("div",{className:"spell-slot-progress-fill",style:{width:`${100-M}%`,backgroundColor:x>0?"#4caf50":"#f44336"}})})}),u&&i.jsxs("div",{className:"spell-slot-level__details",children:[i.jsx("div",{className:"spell-slot-dots",children:Array.from({length:b.max},(T,_)=>i.jsx("span",{className:`spell-slot-dot ${_<(b.used||0)?"spell-slot-dot--used":"spell-slot-dot--available"}`,title:_<(b.used||0)?"Emplacement utilis":"Emplacement disponible",children:_<(b.used||0)?"":""},_))}),i.jsxs("div",{className:"spell-slot-level__actions",children:[x<b.max&&s&&i.jsx("button",{type:"button",className:"spell-slot-action spell-slot-action--restore",onClick:()=>s(v),title:"Restaurer un emplacement",children:""}),x>0&&c&&i.jsx("button",{type:"button",className:"spell-slot-action spell-slot-action--use",onClick:()=>c(v),title:"Utiliser un emplacement",children:""})]})]})]},v)})}),m===h&&i.jsxs("div",{className:"spell-slot-tracker__warning",children:[i.jsx("span",{className:"warning-icon",children:""}),i.jsx("span",{children:"Tous les emplacements de sorts ont t utiliss"})]})]})})},hm=({spell:r,character:c,spellSlots:s={},viewMode:u="list",actions:d={},isOutOfCombat:f=!1,onClick:h,onCast:m,onPrepare:g,onUnprepare:v,className:b=""})=>{const[x,M]=te.useState(!1),T=["spell-item",`spell-item--${u}`,`spell-item--level-${r.level}`,`spell-item--${r.school?.toLowerCase().replace(/\s+/g,"-")}`,b].filter(Boolean).join(" "),_=()=>{switch(r.school){case"vocation":return"";case"Abjuration":return"";case"Enchantement":return"";case"Illusion":return"";case"Divination":return"";case"Invocation":return"";case"Ncromancie":return"";case"Transmutation":return"";default:return""}},N=()=>{if(!d.canCast||f&&r.castableOutOfCombat!==!0||f&&r.castableOutOfCombat===!0&&new bi().isSpellActive(r.id,c))return!1;if(r.level===0)return!0;for(let I=r.level;I<=9;I++){const J=s[I];if(J&&J.available>0)return!0}return!1},R=()=>{if(r.level===0)return[];const I=[];for(let J=r.level;J<=9;J++){const W=s[J];W&&W.available>0&&I.push(J)}return I},A=(I=null)=>{m?.(r,I),M(!1)},q=()=>{const I=R();r.level===0||I.length<=1?A(I[0]||r.level):M(!0)},k=()=>i.jsx("div",{className:T,onClick:h,children:i.jsxs("div",{className:"spell-item__compact-content",children:[i.jsx("span",{className:"spell-item__icon",children:_()}),i.jsxs("div",{className:"spell-item__compact-info",children:[i.jsx("span",{className:"spell-item__name",children:r.name}),i.jsx("span",{className:"spell-item__level",children:r.level===0?"Cantrip":`Niv. ${r.level}`})]}),d.canCast&&N()&&i.jsx(ie,{size:"small",variant:"primary",onClick:I=>{I.stopPropagation(),q()},children:"Lancer"})]})}),ce=()=>i.jsx(xe,{className:T,onClick:h,children:i.jsxs("div",{className:"spell-item__grid-content",children:[i.jsxs("div",{className:"spell-item__header",children:[i.jsx("span",{className:"spell-item__icon",children:_()}),i.jsxs("div",{className:"spell-item__title",children:[i.jsx("h4",{className:"spell-item__name",children:r.name}),i.jsxs("div",{className:"spell-item__meta",children:[i.jsx("span",{className:"spell-item__level",children:r.level===0?"Cantrip":`Niveau ${r.level}`}),i.jsx("span",{className:"spell-item__school",children:r.school})]})]})]}),i.jsx("div",{className:"spell-item__description",children:i.jsx("p",{children:r.description?.length>80?`${r.description.substring(0,80)}...`:r.description})}),i.jsxs("div",{className:"spell-item__properties",children:[r.castingTime&&i.jsxs("span",{className:"spell-property",children:[" ",r.castingTime]}),r.range&&i.jsxs("span",{className:"spell-property",children:[" ",r.range]}),r.duration&&i.jsxs("span",{className:"spell-property",children:[" ",r.duration]})]}),i.jsx("div",{className:"spell-item__actions",children:ne()})]})}),F=()=>i.jsx("div",{className:T,onClick:h,children:i.jsxs("div",{className:"spell-item__list-content",children:[i.jsxs("div",{className:"spell-item__list-header",children:[i.jsx("span",{className:"spell-item__icon",children:_()}),i.jsxs("div",{className:"spell-item__list-info",children:[i.jsxs("div",{className:"spell-item__list-primary",children:[i.jsx("h4",{className:"spell-item__name",children:r.name}),i.jsx("span",{className:"spell-item__level",children:r.level===0?"Cantrip":`Niveau ${r.level}`}),i.jsx("span",{className:"spell-item__school",children:r.school})]}),i.jsxs("div",{className:"spell-item__list-properties",children:[r.castingTime&&i.jsxs("span",{children:[" ",r.castingTime]}),r.range&&i.jsxs("span",{children:[" ",r.range]}),r.duration&&i.jsxs("span",{children:[" ",r.duration]}),r.components&&i.jsxs("span",{children:[" ",r.components.join(", ")]})]}),r.description&&i.jsx("p",{className:"spell-item__list-description",children:r.description})]})]}),i.jsx("div",{className:"spell-item__list-actions",children:ne()})]})}),ne=()=>i.jsx("div",{className:"spell-item__action-buttons",children:x?i.jsxs("div",{className:"spell-casting-options",children:[i.jsx("span",{className:"casting-options-label",children:"Lancer au niveau:"}),i.jsx(pa,{children:R().map(I=>i.jsx(ie,{size:"small",variant:"primary",onClick:J=>{J.stopPropagation(),A(I)},children:I},I))}),i.jsx(ie,{size:"small",variant:"ghost",onClick:I=>{I.stopPropagation(),M(!1)},children:"Annuler"})]}):i.jsxs(i.Fragment,{children:[d.canCast&&N()&&i.jsx(ie,{size:"small",variant:"primary",onClick:I=>{I.stopPropagation(),q()},children:" Lancer"}),d.canPrepare&&i.jsx(ie,{size:"small",variant:"secondary",onClick:I=>{I.stopPropagation(),g?.(r)},children:" Prparer"}),d.canUnprepare&&i.jsx(ie,{size:"small",variant:"ghost",onClick:I=>{I.stopPropagation(),v?.(r)},children:" Retirer"})]})});switch(u){case"compact":return k();case"grid":return ce();case"list":default:return F()}},B1=({spells:r=[],character:c,activeTab:s="prepared",spellSlots:u={},isOutOfCombat:d=!1,viewMode:f="list",onSpellClick:h,onCastSpell:m,onPrepareSpell:g,onUnprepareSpell:v,className:b=""})=>{const x=["spell-list",`spell-list--${f}`,`spell-list--${s}`,b].filter(Boolean).join(" "),M=r.reduce((R,A)=>{const q=A.level===0?"Cantrips":`Niveau ${A.level}`;return R[q]||(R[q]=[]),R[q].push(A),R},{}),T=Object.keys(M).sort((R,A)=>{if(R==="Cantrips")return-1;if(A==="Cantrips")return 1;const q=parseInt(R.replace("Niveau ","")),k=parseInt(A.replace("Niveau ",""));return q-k});if(r.length===0)return i.jsx("div",{className:"spell-list-empty",children:i.jsxs("div",{className:"spell-empty-state",children:[i.jsx("span",{className:"spell-empty-icon",children:""}),i.jsx("p",{children:"Aucun sort  afficher"})]})});const N=(()=>{switch(s){case"prepared":return{canCast:!0,canUnprepare:!0,canPrepare:!1};case"grimoire":case"unprepared":return{canCast:!1,canUnprepare:!1,canPrepare:!0};case"cantrips":return{canCast:!0,canUnprepare:!1,canPrepare:!1};default:return{canCast:!1,canUnprepare:!1,canPrepare:!1}}})();return i.jsx("div",{className:x,children:f==="compact"?i.jsx("div",{className:"spell-list__compact",children:r.map((R,A)=>i.jsx(hm,{spell:R,character:c,spellSlots:u,viewMode:"compact",actions:N,isOutOfCombat:d,onClick:()=>h?.(R),onCast:m,onPrepare:g,onUnprepare:v},R.id||A))}):i.jsx("div",{className:"spell-list__grouped",children:T.map(R=>i.jsxs("div",{className:"spell-level-group",children:[i.jsxs("h4",{className:"spell-level-group__title",children:[R,i.jsxs("span",{className:"spell-level-group__count",children:["(",M[R].length,")"]})]}),i.jsx("div",{className:`spell-level-group__content spell-level-group__content--${f}`,children:M[R].map((A,q)=>i.jsx(hm,{spell:A,character:c,spellSlots:u,viewMode:f,actions:N,isOutOfCombat:d,onClick:()=>h?.(A),onCast:m,onPrepare:g,onUnprepare:v},A.id||q))})]},R))})})},U1=({filters:r={},onFilterChange:c,activeTab:s="prepared",availableSpells:u=[],className:d=""})=>{const f=_=>{c?.({searchTerm:_.target.value})},h=_=>{c?.({school:_})},m=_=>{c?.({level:_})},g=()=>{c?.({castableOnly:!r.castableOnly})},v=()=>{c?.({school:"all",level:"all",searchTerm:"",castableOnly:!1})},b=[{value:"all",label:"Toutes les coles",icon:""},{value:"Abjuration",label:"Abjuration",icon:""},{value:"Invocation",label:"Invocation",icon:""},{value:"Divination",label:"Divination",icon:""},{value:"Enchantement",label:"Enchantement",icon:""},{value:"vocation",label:"vocation",icon:""},{value:"Illusion",label:"Illusion",icon:""},{value:"Ncromancie",label:"Ncromancie",icon:""},{value:"Transmutation",label:"Transmutation",icon:""}],x=[{value:"all",label:"Tous niveaux"},{value:"0",label:"Tours de magie"},{value:"1",label:"Niveau 1"},{value:"2",label:"Niveau 2"},{value:"3",label:"Niveau 3"},{value:"4",label:"Niveau 4"},{value:"5",label:"Niveau 5"},{value:"6",label:"Niveau 6"},{value:"7",label:"Niveau 7"},{value:"8",label:"Niveau 8"},{value:"9",label:"Niveau 9"}],M=ze.useMemo(()=>{const _=new Set(["all"]);return u.forEach(N=>{N.school&&_.add(N.school)}),b.filter(N=>_.has(N.value))},[u]),T=ze.useMemo(()=>{const _=new Set(["all"]);return u.forEach(N=>{_.add(N.level.toString())}),x.filter(N=>_.has(N.value))},[u]);return i.jsxs("div",{className:`spell-filters ${d}`,children:[i.jsx("div",{className:"spell-filters__search",children:i.jsxs("div",{className:"search-input-group",children:[i.jsx("span",{className:"search-icon",children:""}),i.jsx("input",{type:"text",placeholder:"Rechercher un sort...",value:r.searchTerm||"",onChange:f,className:"search-input"}),r.searchTerm&&i.jsx("button",{type:"button",className:"search-clear",onClick:()=>c?.({searchTerm:""}),children:""})]})}),i.jsxs("div",{className:"spell-filters__controls",children:[i.jsxs("div",{className:"spell-filters__section",children:[i.jsx("h5",{className:"spell-filters__label",children:"cole de magie"}),i.jsx("div",{className:"spell-filters__school-grid",children:M.map(_=>i.jsxs(ie,{variant:r.school===_.value?"primary":"ghost",size:"small",onClick:()=>h(_.value),className:"school-filter-button",title:_.label,children:[i.jsx("span",{className:"button-icon",children:_.icon}),_.value==="all"?"Toutes":_.value]},_.value))})]}),i.jsxs("div",{className:"spell-filters__section",children:[i.jsx("h5",{className:"spell-filters__label",children:"Niveau de sort"}),i.jsx(pa,{className:"spell-filters__level-buttons",children:T.slice(0,6).map(_=>i.jsx(ie,{variant:r.level===_.value?"primary":"ghost",size:"small",onClick:()=>m(_.value),children:_.value==="all"?"Tous":_.value==="0"?"CT":_.value},_.value))}),T.length>6&&i.jsx(pa,{className:"spell-filters__level-buttons spell-filters__level-buttons--high",children:T.slice(6).map(_=>i.jsx(ie,{variant:r.level===_.value?"primary":"ghost",size:"small",onClick:()=>m(_.value),children:_.value},_.value))})]}),i.jsxs("div",{className:"spell-filters__section",children:[i.jsx("h5",{className:"spell-filters__label",children:"Options"}),i.jsx("div",{className:"spell-filters__options",children:s==="prepared"&&i.jsxs(ie,{variant:r.castableOnly?"primary":"ghost",size:"small",onClick:g,children:[r.castableOnly?"":""," Lanables uniquement"]})})]}),i.jsx("div",{className:"spell-filters__actions",children:i.jsx(ie,{variant:"ghost",size:"small",onClick:v,disabled:r.school==="all"&&r.level==="all"&&!r.searchTerm&&!r.castableOnly,children:" Effacer"})})]})]})},w1=({spell:r,character:c,spellSlots:s={},onClose:u,onCast:d,onPrepare:f,onUnprepare:h})=>{const[m,g]=te.useState(null);if(!r)return null;const v=()=>{switch(r.school){case"vocation":return"";case"Abjuration":return"";case"Enchantement":return"";case"Illusion":return"";case"Divination":return"";case"Invocation":return"";case"Ncromancie":return"";case"Transmutation":return"";default:return""}},b=()=>({0:"#9e9e9e",1:"#4caf50",2:"#2196f3",3:"#ff9800",4:"#9c27b0",5:"#f44336",6:"#795548",7:"#607d8b",8:"#e91e63",9:"#ffc107"})[r.level]||"#9e9e9e",x=()=>{if(r.level===0)return!0;for(let A=r.level;A<=9;A++){const q=s[A];if(q&&q.available>0)return!0}return!1},M=()=>{if(r.level===0)return[];const A=[];for(let q=r.level;q<=9;q++){const k=s[q];k&&k.available>0&&A.push(q)}return A},T=A=>{if(!r.upcast||A<=r.level)return null;const q=A-r.level;return r.upcast.replace(/\{level\}/g,q.toString())},_=()=>{const A=m||r.level;d?.(r,A>0?A:null),u()},N=M(),R=r.level===0;return i.jsx(au,{onClose:u,size:"large",children:i.jsxs(xe,{className:"spell-detail-modal",children:[i.jsx(wt,{children:i.jsxs("div",{className:"spell-detail-header",children:[i.jsx("div",{className:"spell-detail-icon-container",children:i.jsx("span",{className:"spell-detail-icon",style:{color:b()},children:v()})}),i.jsxs("div",{className:"spell-detail-title",children:[i.jsx("h2",{className:"spell-detail-name",children:r.name}),i.jsxs("div",{className:"spell-detail-meta",children:[i.jsx("span",{className:"spell-detail-level",style:{color:b()},children:R?"Tour de magie":`Sort de niveau ${r.level}`}),i.jsx("span",{className:"spell-detail-school",children:r.school})]})]})]})}),i.jsxs(Ze,{children:[i.jsxs("div",{className:"spell-detail-section",children:[i.jsx("h4",{children:"Description"}),i.jsx("p",{className:"spell-detail-description",children:r.description})]}),i.jsxs("div",{className:"spell-detail-section",children:[i.jsx("h4",{children:"Lancement"}),i.jsxs("div",{className:"spell-detail-casting-properties",children:[i.jsxs("div",{className:"spell-casting-property",children:[i.jsx("span",{className:"property-icon",children:""}),i.jsx("span",{className:"property-label",children:"Temps d'incantation:"}),i.jsx("span",{className:"property-value",children:r.castingTime||"Action"})]}),i.jsxs("div",{className:"spell-casting-property",children:[i.jsx("span",{className:"property-icon",children:""}),i.jsx("span",{className:"property-label",children:"Porte:"}),i.jsx("span",{className:"property-value",children:r.range||"Personnel"})]}),i.jsxs("div",{className:"spell-casting-property",children:[i.jsx("span",{className:"property-icon",children:""}),i.jsx("span",{className:"property-label",children:"Composants:"}),i.jsx("span",{className:"property-value",children:r.components?r.components.join(", "):"Aucun"})]}),i.jsxs("div",{className:"spell-casting-property",children:[i.jsx("span",{className:"property-icon",children:""}),i.jsx("span",{className:"property-label",children:"Dure:"}),i.jsx("span",{className:"property-value",children:r.duration||"Instantan"})]}),r.concentration&&i.jsxs("div",{className:"spell-casting-property",children:[i.jsx("span",{className:"property-icon",children:""}),i.jsx("span",{className:"property-label",children:"Concentration:"}),i.jsx("span",{className:"property-value",children:"Oui"})]}),r.ritual&&i.jsxs("div",{className:"spell-casting-property",children:[i.jsx("span",{className:"property-icon",children:""}),i.jsx("span",{className:"property-label",children:"Rituel:"}),i.jsx("span",{className:"property-value",children:"Oui"})]})]})]}),(r.damage||r.healing||r.effect)&&i.jsxs("div",{className:"spell-detail-section",children:[i.jsx("h4",{children:"Effets"}),i.jsxs("div",{className:"spell-detail-effects",children:[r.damage&&i.jsxs("div",{className:"spell-effect",children:[i.jsx("span",{className:"effect-icon",children:""}),i.jsx("span",{className:"effect-label",children:"Dgts:"}),i.jsx("span",{className:"effect-value",children:r.damage})]}),r.healing&&i.jsxs("div",{className:"spell-effect",children:[i.jsx("span",{className:"effect-icon",children:""}),i.jsx("span",{className:"effect-label",children:"Soins:"}),i.jsx("span",{className:"effect-value",children:r.healing})]}),r.effect&&i.jsxs("div",{className:"spell-effect",children:[i.jsx("span",{className:"effect-icon",children:""}),i.jsx("span",{className:"effect-label",children:"Effet:"}),i.jsx("span",{className:"effect-value",children:r.effect})]}),r.areaOfEffect&&i.jsxs("div",{className:"spell-effect",children:[i.jsx("span",{className:"effect-icon",children:""}),i.jsx("span",{className:"effect-label",children:"Zone d'effet:"}),i.jsxs("span",{className:"effect-value",children:[r.areaOfEffect.shape," de ",r.areaOfEffect.radius||r.areaOfEffect.size,r.areaOfEffect.shape==="sphere"?" pieds de rayon":" pieds"]})]})]})]}),r.upcast&&!R&&i.jsxs("div",{className:"spell-detail-section",children:[i.jsx("h4",{children:"Aux niveaux suprieurs"}),i.jsx("p",{className:"spell-detail-upcast",children:r.upcast})]}),x()&&!R&&N.length>1&&i.jsxs("div",{className:"spell-detail-section",children:[i.jsx("h4",{children:"Niveau de lancement"}),i.jsxs("div",{className:"spell-casting-levels",children:[i.jsx(pa,{children:N.map(A=>i.jsxs(ie,{variant:m===A?"primary":"secondary",size:"small",onClick:()=>g(A),children:["Niveau ",A,i.jsxs("span",{className:"level-slots",children:["(",s[A]?.available," empl.)"]})]},A))}),m&&m>r.level&&i.jsxs("div",{className:"upcast-preview",children:[i.jsxs("h5",{children:["Effet au niveau ",m,":"]}),i.jsx("p",{children:T(m)})]})]})]}),r.classes&&i.jsxs("div",{className:"spell-detail-section",children:[i.jsx("h4",{children:"Classes"}),i.jsx("div",{className:"spell-detail-classes",children:r.classes.map(A=>i.jsx("span",{className:"spell-class-tag",children:A},A))})]})]}),i.jsx(Ei,{children:i.jsxs("div",{className:"spell-detail-actions",children:[i.jsx(ie,{variant:"ghost",onClick:u,children:"Fermer"}),x()&&i.jsxs(ie,{variant:"primary",onClick:_,disabled:!R&&N.length===0,children:[" Lancer",m?` (Niv. ${m})`:""]}),f&&i.jsx(ie,{variant:"secondary",onClick:()=>{f(r),u()},children:" Prparer"}),h&&i.jsx(ie,{variant:"ghost",onClick:()=>{h(r),u()},children:" Retirer"})]})})]})})},L1=({className:r="",character:c,onCastSpell:s,isOutOfCombat:u=!1})=>{const{selectedCharacter:d,castSpell:f,prepareSpell:h,unprepareSpell:m}=Wt(),g=c||d,{addCombatMessage:v}=ha(),b=te.useMemo(()=>new bi,[]),[x,M]=te.useState(null),[T,_]=te.useState("prepared"),[N,R]=te.useState({school:"all",level:"all",searchTerm:"",castableOnly:!1});if(!g?.spellcasting)return i.jsx(xe,{className:`spell-panel ${r}`,children:i.jsx(Ze,{children:i.jsxs("div",{className:"spell-panel__no-spells",children:[i.jsx("span",{className:"no-spells-icon",children:""}),i.jsx("p",{children:"Ce personnage ne peut pas lancer de sorts"})]})})});const A=te.useMemo(()=>{const ae=g.spellcasting.ability||"intelligence",Ne=b.getSpellAttackBonus(g),Ae=b.getSpellSaveDC(g);let U=b.getPreparedSpells(g),X=b.getGrimoireSpells(g),w=b.getUnpreparedSpells(g),E=b.getCantrips(g);(u||s)&&(U=U.filter(K=>K.castableOutOfCombat===!0?!b.isSpellActive(K.id,g):!0),E=E.filter(K=>K.castableOutOfCombat===!0));const L=b.getMaxPreparedSpells(g),V=b.getSpellSlots(g);return{spellcastingAbility:ae,spellAttackBonus:Ne,spellSaveDC:Ae,grimoireSpells:X,preparedSpells:U,unpreparedSpells:w,cantrips:E,maxPrepared:L,spellSlots:V}},[g,b]),q=te.useMemo(()=>{let W=[];switch(T){case"prepared":W=A.preparedSpells;break;case"grimoire":W=A.unpreparedSpells;break;case"cantrips":W=A.cantrips;break;default:W=[]}return b.filterSpells(W,N)},[A,T,N,b]),k=async(W,ae=null)=>{try{if(s){s(W,ae);return}const Ne=await f(W.id,ae);Ne.success?v(`${W.name} lanc avec succs !`,"spell-cast"):v(Ne.message,"error")}catch(Ne){console.error("Erreur lors du lancement du sort:",Ne),v(`Impossible de lancer ${W.name}: ${Ne.message}`,"error")}},ce=async W=>{try{const ae=await h(W.id);ae.success?v(`${W.name} prpar`,"spell-prepare"):v(ae.message,"error")}catch(ae){console.error("Erreur lors de la prparation:",ae),v(`Impossible de prparer ${W.name}`,"error")}},F=async W=>{try{const ae=await m(W.id);ae.success?v(`${W.name} retir des sorts prpars`,"spell-unprepare"):v(ae.message,"error")}catch(ae){console.error("Erreur lors de la suppression:",ae)}},ne=W=>{_(W)},I=W=>{R({...N,...W})},J={prepared:A.preparedSpells.length,grimoire:A.unpreparedSpells.length,cantrips:A.cantrips.length};return i.jsxs(xe,{className:`spell-panel ${r}`,children:[i.jsx(wt,{children:i.jsxs("div",{className:"spell-panel__header",children:[i.jsxs("h3",{children:[" Sorts de ",g.name]}),i.jsxs("div",{className:"spell-panel__stats",children:[i.jsxs("div",{className:"spell-stat",children:[i.jsx("span",{className:"spell-stat__label",children:"Bonus d'attaque:"}),i.jsxs("span",{className:"spell-stat__value",children:["+",A.spellAttackBonus]})]}),i.jsxs("div",{className:"spell-stat",children:[i.jsx("span",{className:"spell-stat__label",children:"DD de sauvegarde:"}),i.jsx("span",{className:"spell-stat__value",children:A.spellSaveDC})]}),i.jsxs("div",{className:"spell-stat",children:[i.jsx("span",{className:"spell-stat__label",children:"Sorts prpars:"}),i.jsxs("span",{className:"spell-stat__value",children:[A.preparedSpells.length,"/",A.maxPrepared]})]})]})]})}),i.jsxs(Ze,{children:[i.jsx(q1,{spellSlots:A.spellSlots,onSlotUse:W=>{}}),i.jsxs("div",{className:"spell-panel__tabs",children:[i.jsxs(ie,{variant:T==="prepared"?"primary":"ghost",onClick:()=>ne("prepared"),children:[" Prpars (",J.prepared,")"]}),i.jsxs(ie,{variant:T==="grimoire"?"primary":"ghost",onClick:()=>ne("grimoire"),children:[" Grimoire (",J.grimoire,")"]}),i.jsxs(ie,{variant:T==="cantrips"?"primary":"ghost",onClick:()=>ne("cantrips"),children:[" Tours de magie (",J.cantrips,")"]})]}),i.jsx(U1,{filters:N,onFilterChange:I,activeTab:T,availableSpells:(()=>{switch(T){case"prepared":return A.preparedSpells;case"grimoire":return A.unpreparedSpells;case"cantrips":return A.cantrips;default:return[]}})()}),i.jsx(B1,{spells:q,character:g,activeTab:T,spellSlots:A.spellSlots,isOutOfCombat:u||!!s,onSpellClick:M,onCastSpell:k,onPrepareSpell:ce,onUnprepareSpell:F}),q.length===0&&i.jsx("div",{className:"spell-panel__empty",children:T==="prepared"&&A.preparedSpells.length===0?i.jsx("p",{children:" Aucun sort prpar. Prparez des sorts depuis votre grimoire."}):T==="grimoire"&&A.grimoireSpells.length===0?i.jsx("p",{children:" Aucun sort disponible dans le grimoire. Montez de niveau pour dbloquer plus de sorts."}):T==="cantrips"&&A.cantrips.length===0?i.jsx("p",{children:" Aucun tour de magie connu."}):i.jsx("p",{children:" Aucun sort ne correspond aux filtres appliqus."})})]}),x&&i.jsx(w1,{spell:x,character:g,spellSlots:A.spellSlots,onClose:()=>M(null),onCast:k,onPrepare:ce,onUnprepare:F})]})};class G1{canTakeShortRest(c){return!0}canTakeLongRest(c){return!0}getShortRestBenefits(c){const s={hitDiceRecovery:!1,spellSlotRecovery:[],classFeatureRecovery:[],description:[]};if(c.hitDice>0&&c.currentHP<c.maxHP&&(s.hitDiceRecovery=!0,s.description.push("Possibilit de dpenser des ds de vie pour rcuprer des PV")),c.class==="Magicien"&&c.level>=1){const u=c.level,d=Math.ceil(u/2);s.spellSlotRecovery.push({level:d,amount:1,source:"Rcupration arcanique"}),s.description.push(`Rcupration d'un emplacement de sort de niveau ${d} ou moins`)}return c.class==="Guerrier"&&c.level>=3&&(s.classFeatureRecovery.push("Action Surge"),s.description.push("Rcupration de l'Action Surge")),c.class==="Roublard"&&c.level>=3&&(s.classFeatureRecovery.push("Cunning Action uses"),s.description.push("Rcupration des utilisations d'actions spciales")),s}getLongRestBenefits(c){const s={fullHPRecovery:!0,hitDiceRecovery:Math.max(1,Math.floor(c.level/2)),allSpellSlotsRecovery:!0,allClassFeaturesRecovery:!0,description:[]};return s.description.push("Rcupration complte des points de vie"),s.description.push(`Rcupration de ${s.hitDiceRecovery} d${s.hitDiceRecovery>1?"s":""} de vie`),c.spellcasting&&s.description.push("Rcupration de tous les emplacements de sorts"),s.description.push("Rcupration de toutes les capacits de classe"),s}calculateHitDieHealing(c){const s=c.hitDiceType||8,u=Oe(c.stats.constitution),d=Math.floor(Math.random()*s)+1,f=d+u;return{roll:d,modifier:u,total:Math.max(1,f)}}applyShortRest(c){const s={...c},u={success:!0,message:"Repos court termin",changes:[]};if(c.class==="Magicien"&&c.level>=1){const d=c.level,f=Math.ceil(d/2);if(s.spellcasting?.spellSlots)for(let h=f;h>=1;h--){const m=s.spellcasting.spellSlots[h];if(m&&m.used>0){m.used=Math.max(0,m.used-1),m.available=m.max-m.used,u.changes.push(`Rcupration d'un emplacement de sort de niveau ${h}`);break}}}if(c.class==="Ensorceleur"&&c.sorceryPoints){const d=c.level;s.sorceryPoints.current=d,u.changes.push("Rcupration des points de sorcellerie")}return c.class==="Guerrier"&&c.level>=2&&s.classFeatures?.actionSurge&&(s.classFeatures.actionSurge.used=0,u.changes.push("Rcupration de l'Action Surge")),{character:s,results:u}}applyLongRest(c){const s={...c},u={success:!0,message:"Repos long termin",changes:[]},d=c.maxHP-c.currentHP;s.currentHP=c.maxHP,d>0&&u.changes.push(`${d} points de vie rcuprs`);const f=Math.max(1,Math.floor(c.level/2)),h=c.level,m=c.hitDice||0,g=Math.min(h,m+f);if(g>m&&(s.hitDice=g,u.changes.push(`${g-m} d${g-m>1?"s":""} de vie rcupr${g-m>1?"s":""}`)),s.spellcasting?.spellSlots){let v=0;Object.values(s.spellcasting.spellSlots).forEach(b=>{b.used>0&&(v+=b.used,b.used=0,b.available=b.max)}),v>0&&u.changes.push("Tous les emplacements de sorts rcuprs")}return s.classFeatures&&(Object.values(s.classFeatures).forEach(v=>{v.used!==void 0&&(v.used=0)}),u.changes.push("Toutes les capacits de classe rcupres")),c.class==="Moine"&&s.ki&&(s.ki.current=s.ki.max,u.changes.push("Points de ki rcuprs")),c.class==="Ensorceleur"&&s.sorceryPoints&&(s.sorceryPoints.current=s.sorceryPoints.max,u.changes.push("Points de sorcellerie rcuprs")),s.activeSpells&&(Object.keys(s.activeSpells).forEach(v=>{delete s.activeSpells[v]}),u.changes.push("Sorts temporaires dissips")),{character:s,results:u}}hasUsedSpellSlots(c){return c.spellcasting?.spellSlots?Object.values(c.spellcasting.spellSlots).some(s=>s.used>0):!1}getRestDuration(c){switch(c){case"short":return{duration:1,unit:"heure",description:"Au moins 1 heure de repos lger"};case"long":return{duration:8,unit:"heures",description:"Au moins 8 heures de sommeil ou de repos"};default:return null}}canInterruptRest(c,s){return c==="short"||c==="long"?s<60:!1}calculateInterruptionPenalties(c,s){const u={lostProgress:!1,reducedBenefits:!1,description:[]};return c==="short"&&(u.lostProgress=!0,u.description.push("Le repos court doit tre recommenc")),c==="long"&&s<480&&(u.reducedBenefits=!0,u.description.push("Bnfices du repos long perdus")),u}}const $1=({character:r,restData:c,onSpendHitDie:s,onCompleteRest:u,onCancelRest:d,className:f=""})=>{const h=()=>c.hitDiceAvailable>0&&c.currentHP<c.maxHP,m=async()=>{if(h())try{await s()}catch(v){console.error("Erreur lors de la dpense du d de vie:",v)}},g=c.currentHP>=c.maxHP;return i.jsx(xe,{className:`short-rest-manager ${f}`,children:i.jsx(Ze,{children:i.jsxs("div",{className:"short-rest-manager__content",children:[i.jsxs("div",{className:"short-rest-manager__header",children:[i.jsx("h4",{children:" Repos court en cours"}),i.jsx("p",{className:"rest-description",children:"Prenez une heure pour vous reposer et rcuprer des forces. Vous pouvez dpenser des ds de vie pour rcuprer des points de vie."})]}),i.jsx("div",{className:"short-rest-manager__status",children:i.jsxs("div",{className:"rest-status-grid",children:[i.jsxs("div",{className:"rest-status-item",children:[i.jsx("span",{className:"rest-status-label",children:"Points de vie"}),i.jsxs("span",{className:"rest-status-value",children:[c.currentHP,"/",c.maxHP]})]}),i.jsxs("div",{className:"rest-status-item",children:[i.jsx("span",{className:"rest-status-label",children:"Ds de vie restants"}),i.jsxs("span",{className:"rest-status-value",children:[c.hitDiceAvailable," (d",c.hitDiceType,")"]})]})]})}),i.jsxs("div",{className:"short-rest-manager__health-bar",children:[i.jsx("div",{className:"health-bar-container",children:i.jsx("div",{className:"health-bar-fill",style:{width:`${c.currentHP/c.maxHP*100}%`}})}),i.jsxs("span",{className:"health-bar-label",children:["PV : ",c.currentHP,"/",c.maxHP]})]}),i.jsxs("div",{className:"short-rest-manager__hit-dice",children:[i.jsx("h5",{children:"Ds de vie"}),i.jsxs("p",{className:"hit-dice-description",children:["Lancez un d de vie (d",c.hitDiceType,") et ajoutez votre modificateur de Constitution (+",Math.floor((r.stats.constitution-10)/2),") pour rcuprer des points de vie."]}),i.jsxs("div",{className:"hit-dice-controls",children:[i.jsxs(ie,{variant:"secondary",disabled:!h(),onClick:m,children:[" Dpenser un d de vie",!h()&&i.jsx("span",{className:"button-disabled-reason",children:c.hitDiceAvailable===0?" (aucun restant)":" (PV au maximum)"})]}),i.jsx("div",{className:"hit-dice-info",children:i.jsxs("span",{children:["Ds restants : ",c.hitDiceAvailable]})})]})]}),i.jsxs("div",{className:"short-rest-manager__benefits",children:[i.jsx("h5",{children:"Autres bnfices du repos court"}),i.jsxs("ul",{className:"rest-benefits-list",children:[r.class==="Magicien"&&r.level>=1&&i.jsx("li",{children:" Rcupration arcanique disponible"}),r.class==="Guerrier"&&r.level>=2&&i.jsx("li",{children:" Action Surge rcupre"}),r.class==="Ensorceleur"&&i.jsx("li",{children:" Points de sorcellerie rcuprs"}),i.jsx("li",{children:" Rcupration mentale et physique"})]})]}),g&&i.jsxs("div",{className:"rest-message rest-message--success",children:[i.jsx("span",{className:"rest-message-icon",children:""}),i.jsx("span",{children:"Vous tes  pleine sant ! Vous pouvez terminer le repos."})]}),!g&&c.hitDiceAvailable>0&&i.jsxs("div",{className:"rest-message rest-message--info",children:[i.jsx("span",{className:"rest-message-icon",children:""}),i.jsx("span",{children:"Vous pouvez dpenser d'autres ds de vie ou terminer le repos maintenant."})]}),i.jsx("div",{className:"short-rest-manager__actions",children:i.jsxs(pa,{children:[i.jsx(ie,{variant:"primary",onClick:u,children:" Terminer le repos"}),i.jsx(ie,{variant:"ghost",onClick:d,children:" Annuler le repos"})]})})]})})})},P1=({character:r,restData:c,onCompleteRest:s,onCancelRest:u,className:d=""})=>{const[f,h]=te.useState(0),[m,g]=te.useState(!1);te.useEffect(()=>{const _=setInterval(()=>{h(N=>{const R=N+30;return R>=480?(g(!0),clearInterval(_),480):R})},1e3);return()=>clearInterval(_)},[]);const b=(()=>{const _=[],N=c.maxHP-c.currentHP;N>0&&_.push({icon:"",text:`+${N} points de vie (rcupration complte)`});const R=Math.max(1,Math.floor(r.level/2)),A=r.level,q=c.hitDiceAvailable,k=Math.min(R,A-q);return k>0&&_.push({icon:"",text:`+${k} d${k>1?"s":""} de vie`}),r.spellcasting?.spellSlots&&Object.values(r.spellcasting.spellSlots).reduce((F,ne)=>F+(ne.used||0),0)>0&&_.push({icon:"",text:"Tous les emplacements de sorts rcuprs"}),_.push({icon:"",text:"Toutes les capacits de classe rcupres"}),r.class==="Magicien"&&_.push({icon:"",text:"Possibilit de changer les sorts prpars"}),r.class==="Ensorceleur"&&_.push({icon:"",text:"Points de sorcellerie rcuprs"}),r.class==="Moine"&&_.push({icon:"",text:"Points de ki rcuprs"}),_})(),x=f/480*100,M=Math.floor(f/60),T=f%60;return i.jsx(xe,{className:`long-rest-manager ${d}`,children:i.jsx(Ze,{children:i.jsxs("div",{className:"long-rest-manager__content",children:[i.jsxs("div",{className:"long-rest-manager__header",children:[i.jsx("h4",{children:" Repos long en cours"}),i.jsx("p",{className:"rest-description",children:"Prenez 8 heures pour dormir ou vous reposer paisiblement. Toutes vos capacits seront restaures."})]}),i.jsxs("div",{className:"long-rest-manager__progress",children:[i.jsxs("div",{className:"rest-progress-header",children:[i.jsx("h5",{children:"Progression du repos"}),i.jsxs("span",{className:"rest-time",children:[M,"h ",T,"min / 8h 00min"]})]}),i.jsx("div",{className:"rest-progress-bar",children:i.jsx("div",{className:"rest-progress-fill",style:{width:`${x}%`}})}),i.jsx("div",{className:"rest-progress-status",children:m?i.jsx("span",{className:"rest-status-complete",children:" Repos termin ! Vous vous sentez compltement repos."}):i.jsxs("span",{className:"rest-status-resting",children:[" Repos en cours... (",Math.floor(100-x),"% restant)"]})})]}),i.jsxs("div",{className:"long-rest-manager__benefits",children:[i.jsx("h5",{children:"Bnfices du repos long"}),i.jsx("div",{className:"rest-benefits-grid",children:b.map((_,N)=>i.jsxs("div",{className:`rest-benefit-item ${m?"rest-benefit-item--available":""}`,children:[i.jsx("span",{className:"rest-benefit-icon",children:_.icon}),i.jsx("span",{className:"rest-benefit-text",children:_.text}),m&&i.jsx("span",{className:"rest-benefit-check",children:""})]},N))})]}),i.jsx("div",{className:"long-rest-manager__health-comparison",children:i.jsxs("div",{className:"health-comparison-grid",children:[i.jsxs("div",{className:"health-comparison-item",children:[i.jsx("h6",{children:"tat actuel"}),i.jsxs("div",{className:"health-stats",children:[i.jsxs("span",{className:"health-stat",children:[" PV: ",c.currentHP,"/",c.maxHP]}),i.jsxs("span",{className:"health-stat",children:[" Ds: ",c.hitDiceAvailable]})]})]}),i.jsx("div",{className:"health-comparison-arrow",children:""}),i.jsxs("div",{className:"health-comparison-item",children:[i.jsx("h6",{children:"Aprs le repos"}),i.jsxs("div",{className:"health-stats",children:[i.jsxs("span",{className:"health-stat health-stat--improved",children:[" PV: ",c.maxHP,"/",c.maxHP]}),i.jsxs("span",{className:"health-stat health-stat--improved",children:[" Ds: ",Math.min(r.level,c.hitDiceAvailable+Math.max(1,Math.floor(r.level/2)))]})]})]})]})}),!m&&i.jsx("div",{className:"long-rest-manager__info",children:i.jsxs("div",{className:"rest-info-box",children:[i.jsx("h6",{children:" Pendant votre repos"}),i.jsxs("ul",{className:"rest-info-list",children:[i.jsx("li",{children:"Votre corps et votre esprit rcuprent naturellement"}),i.jsx("li",{children:"Les blessures gurissent compltement"}),i.jsx("li",{children:"Votre nergie magique se rgnre"}),i.jsx("li",{children:"Vos capacits spciales retrouvent leur pleine puissance"})]})]})}),i.jsxs("div",{className:"long-rest-manager__warnings",children:[i.jsxs("div",{className:"rest-warning",children:[i.jsx("span",{className:"rest-warning-icon",children:""}),i.jsx("span",{className:"rest-warning-text",children:"Vous ne pouvez bnficier que d'un repos long par priode de 24 heures."})]}),!m&&i.jsxs("div",{className:"rest-warning",children:[i.jsx("span",{className:"rest-warning-icon",children:""}),i.jsx("span",{className:"rest-warning-text",children:"Annuler maintenant vous fera perdre les bnfices du repos long."})]})]}),i.jsx("div",{className:"long-rest-manager__actions",children:i.jsxs(pa,{children:[i.jsx(ie,{variant:"primary",disabled:!m,onClick:s,children:m?" Terminer le repos":` Repos en cours... ${Math.floor(100-x)}%`}),i.jsx(ie,{variant:"ghost",onClick:u,children:" Annuler le repos"})]})})]})})})},Y1=({character:r,restData:c,onSelect:s,className:u=""})=>{const d=(m,g,v,b,x,M=!0)=>i.jsxs(xe,{className:`rest-option ${M?"":"rest-option--disabled"}`,children:[i.jsxs("div",{className:"rest-option__header",children:[i.jsx("span",{className:"rest-option__icon",children:v}),i.jsx("h4",{className:"rest-option__title",children:g}),i.jsx("span",{className:"rest-option__duration",children:b})]}),i.jsxs("div",{className:"rest-option__benefits",children:[i.jsx("h5",{children:"Bnfices :"}),i.jsx("ul",{className:"rest-benefits-list",children:x.map((T,_)=>i.jsx("li",{className:"rest-benefit",children:T},_))})]}),i.jsx("div",{className:"rest-option__actions",children:i.jsx(ie,{variant:"primary",disabled:!M,onClick:()=>s(m),children:M?`Commencer le ${g.toLowerCase()}`:"Indisponible"})})]},m),f=[];if(c.hitDiceAvailable>0&&c.currentHP<c.maxHP&&f.push(`Dpenser jusqu' ${c.hitDiceAvailable} d${c.hitDiceAvailable>1?"s":""} de vie pour rcuprer des PV`),r.class==="Magicien"&&r.level>=1){const m=Math.ceil(r.level/2);f.push(`Rcupration arcanique (1 emplacement  niv. ${m})`)}r.class==="Guerrier"&&r.level>=2&&f.push("Rcupration de l'Action Surge"),r.class==="Ensorceleur"&&f.push("Rcupration des points de sorcellerie"),f.length===0&&f.push("Moment de rcupration et de planification");const h=["Rcupration complte des points de vie",`Rcupration de ${Math.max(1,Math.floor(r.level/2))} d${Math.floor(r.level/2)>1?"s":""} de vie`];return r.spellcasting&&h.push("Rcupration de tous les emplacements de sorts"),h.push("Rcupration de toutes les capacits de classe"),r.class==="Magicien"&&h.push("Prparation de nouveaux sorts"),i.jsxs("div",{className:`rest-type-selector ${u}`,children:[i.jsx("div",{className:"rest-type-selector__intro",children:i.jsx("p",{children:"Choisissez le type de repos que vous souhaitez prendre. Un repos permet de rcuprer des forces et des capacits."})}),i.jsxs("div",{className:"rest-options",children:[d("short","Repos court","","1 heure",f,c.canTakeShortRest),d("long","Repos long","","8 heures",h,c.canTakeLongRest)]}),i.jsxs("div",{className:"rest-type-selector__info",children:[i.jsxs("div",{className:"rest-info-section",children:[i.jsx("h5",{children:"tat actuel :"}),i.jsxs("ul",{children:[i.jsxs("li",{children:["Points de vie : ",c.currentHP,"/",c.maxHP,c.currentHP<c.maxHP&&i.jsx("span",{className:"rest-info-highlight",children:" (rcupration ncessaire)"})]}),i.jsxs("li",{children:["Ds de vie : ",c.hitDiceAvailable," disponible",c.hitDiceAvailable>1?"s":"","(d",c.hitDiceType,")"]}),r.spellcasting&&i.jsxs("li",{children:["Emplacements de sorts :",Object.entries(r.spellcasting.spellSlots||{}).some(([,m])=>m.used>0)?" certains utiliss":" tous disponibles"]})]})]}),i.jsxs("div",{className:"rest-info-section",children:[i.jsx("h5",{children:"Conseils :"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Les repos courts sont idaux pour une rcupration rapide entre les combats"}),i.jsx("li",{children:"Les repos longs restaurent toutes vos capacits mais prennent plus de temps"}),i.jsx("li",{children:"Vous ne pouvez bnficier que d'un repos long par priode de 24 heures"})]})]})]})]})},vm=({type:r,character:c,onRestComplete:s,className:u=""})=>{const{playerCharacter:d,shortRestPlayer:f,longRestPlayer:h,spendHitDie:m}=Wt(),g=c||d,{addCombatMessage:v,gamePhase:b,setGamePhase:x}=ha(),M=te.useMemo(()=>new G1,[]),[T,_]=te.useState(r||null),[N,R]=te.useState(!1);if(!g)return i.jsx(xe,{className:`rest-panel ${u}`,children:i.jsx(Ze,{children:i.jsxs("div",{className:"rest-panel__no-character",children:[i.jsx("span",{className:"no-character-icon",children:""}),i.jsx("p",{children:"Aucun personnage slectionn pour se reposer"})]})})});const A=te.useMemo(()=>({canTakeShortRest:M.canTakeShortRest(g),canTakeLongRest:M.canTakeLongRest(g),shortRestBenefits:M.getShortRestBenefits(g),longRestBenefits:M.getLongRestBenefits(g),hitDiceAvailable:g.hitDice||0,hitDiceType:g.hitDiceType||8,currentHP:g.currentHP||0,maxHP:g.maxHP||0,needsRest:g.currentHP<g.maxHP||g.spellcasting&&M.hasUsedSpellSlots(g)}),[g,M]),q=I=>{_(I)},k=()=>{try{f(),v("Repos court termin !","rest-complete"),R(!1),_(null),s?.("short")}catch(I){console.error("Erreur lors du repos court:",I),v("Erreur lors du repos court","error")}},ce=()=>{try{h(),v("Repos long termin ! Tous vos points de vie et emplacements de sorts ont t restaurs.","rest-complete"),R(!1),_(null),s?.("long")}catch(I){console.error("Erreur lors du repos long:",I),v("Erreur lors du repos long","error")}},F=()=>{try{m("player"),v("D de vie dpens !","healing")}catch(I){console.error("Erreur lors de la dpense du d de vie:",I),v("Impossible de dpenser le d de vie","error")}},ne=()=>{R(!1),_(null),x("normal"),v("Repos annul","rest-cancel")};return!T&&!N?i.jsxs(xe,{className:`rest-panel ${u}`,children:[i.jsxs(wt,{children:[i.jsxs("h3",{children:[" Repos pour ",g.name]}),i.jsxs("div",{className:"rest-panel__status",children:[i.jsxs("div",{className:"rest-status-item",children:[i.jsx("span",{className:"rest-status-label",children:"Points de vie:"}),i.jsxs("span",{className:`rest-status-value ${A.currentHP<A.maxHP?"rest-status-value--low":""}`,children:[A.currentHP,"/",A.maxHP]})]}),i.jsxs("div",{className:"rest-status-item",children:[i.jsx("span",{className:"rest-status-label",children:"Ds de vie:"}),i.jsxs("span",{className:"rest-status-value",children:[A.hitDiceAvailable," disponible",A.hitDiceAvailable>1?"s":""]})]}),A.needsRest&&i.jsxs("div",{className:"rest-need-indicator",children:[i.jsx("span",{className:"rest-need-icon",children:""}),i.jsx("span",{children:"Repos recommand"})]})]})]}),i.jsx(Ze,{children:i.jsx(Y1,{character:g,restData:A,onSelect:q})})]}):i.jsxs(xe,{className:`rest-panel ${u}`,children:[i.jsx(wt,{children:i.jsxs("h3",{children:[" ",T==="short"?"Repos court":"Repos long"," en cours"]})}),i.jsx(Ze,{children:T==="short"?i.jsx($1,{character:g,restData:A,onSpendHitDie:F,onCompleteRest:k,onCancelRest:ne}):i.jsx(P1,{character:g,restData:A,onCompleteRest:ce,onCancelRest:ne})})]})},X1=(r,c=20)=>{const[s,u]=te.useState(""),[d,f]=te.useState(!0),h=te.useRef(0),m=te.useRef(null),g=te.useCallback(()=>{m.current&&(clearInterval(m.current),m.current=null),u(r),f(!1)},[r]);return te.useEffect(()=>(u(""),h.current=0,f(!0),m.current&&clearInterval(m.current),m.current=setInterval(()=>{u(v=>{if(h.current>=r.length)return clearInterval(m.current),m.current=null,f(!1),v;const b=r.charAt(h.current);return h.current+=1,v+b})},c),()=>{m.current&&(clearInterval(m.current),m.current=null)}),[r,c]),{displayedText:s,isTyping:d,skipTyping:g}},V1=ze.memo(({choice:r,onChoice:c})=>{const s=te.useCallback(()=>{const u=r.next||r.action;c(u)},[r,c]);return i.jsx("button",{onClick:s,children:r.text})}),k1=({text:r,choices:c=[],onChoice:s})=>{const{displayedText:u,isTyping:d,skipTyping:f}=X1(r),h=te.useCallback(()=>{d&&f()},[d,f]),m=c.map((g,v)=>i.jsx(V1,{choice:g,onChoice:s},`${v}-${g.text}`));return i.jsxs("div",{className:"scene scene-container",children:[i.jsx("div",{className:"scene-text",onClick:h,role:"button",tabIndex:0,onKeyDown:g=>g.key==="Enter"&&h(),children:u}),i.jsx("div",{className:"scene-choices",children:m})]})},Q1=ze.memo(k1),gm=(r,c)=>{if(typeof r=="string")return r;if(typeof r=="object")switch(r.type){case"combat":return{...r,enemies:r.enemies,enemyPositions:r.enemyPositions,next:r.next};case"longRest":return c.startLongRest(r.nextScene),null;case"shortRest":return c.startShortRest(r.nextScene),null;case"item":return c.handleItemGain(r.item),r.nextScene;case"ally":const s=xm[r.ally];return s?(c.setPlayerCompanion(s),c.addCombatMessage(`${s.name} te rejoint dans ton aventure !`,"upgrade"),r.nextScene):(console.error(`Compagnon '${r.ally}' introuvable.`),null);case"skillCheck":const u=Wt.getState().playerCharacter;return u?(c.handleSkillCheck(r.skill,r.dc,r.onSuccess,r.onPartialSuccess,r.onFailure,u),null):(console.error("Aucun personnage joueur trouv pour le test de comptence"),null);default:return console.warn("Type d'action inconnu :",r.type),null}return null};function ym({error:r,resetErrorBoundary:c}){return i.jsxs("div",{className:"error-boundary",children:[i.jsx("h2",{children:"Quelque chose s'est mal pass :"}),i.jsx("pre",{children:r.message}),i.jsx("button",{onClick:c,children:"Ressayer"})]})}function Z1(){const{gamePhase:r,currentScene:c,combatLog:s,isShortResting:u,isLongResting:d,nextSceneAfterRest:f,combatKey:h,setGamePhase:m,setCurrentScene:g,addCombatMessage:v,handleSkillCheck:b,startShortRest:x,startLongRest:M,endShortRest:T,endLongRest:_}=ha(),{playerCharacter:N,playerCompanion:R,setPlayerCharacter:A,setPlayerCompanion:q,takeDamagePlayer:k,takeDamageCompanion:ce,addItemToInventory:F,useItem:ne,castSpellPlayer:I,shortRestPlayer:J,longRestPlayer:W,longRestAll:ae,addExperience:Ne}=Wt(),{isActive:Ae,initializeCombat:U,resetCombat:X,incrementCombatKey:w}=Jt(),{showError:E}=Xe(),L=Ve=>{A(Ve),m("game")},V=()=>{const{totalXpGained:Ve,combatEnemies:ct}=Jt.getState(),Be=Ve||ct.reduce((va,Ti)=>va+(Ti.xp||0),0);Be>0&&(Ne(Be,"player"),v(`Vous gagnez ${Be} points d'exprience !`,"victory"),R&&(Ne(Be,"companion"),v(`${R.name} gagne aussi ${Be} points d'exprience !`,"victory")));const rt=c.next;if(X(),v("Combat termin ! Victoire !","victory"),rt){const va=gm(rt,{startLongRest:M,startShortRest:x,handleItemGain:K,setPlayerCompanion:q,addCombatMessage:v,handleSkillCheck:b});va&&g(va)}else console.warn("Aucune scne suivante n'est dfinie aprs le combat."),g("fin_du_jeu")},K=Ve=>{(Array.isArray(Ve)?Ve:[Ve]).forEach(Be=>{let rt=Jn[Be];if(rt||(rt=cl[Be]),rt){const va={...rt,id:Be};F(va),v(`Objet obtenu : ${rt.name}`,"item")}else console.error(` Item non trouv dans items.js ou weapons.js : ${Be}`)})},S=()=>{J(),T()},$=()=>{ae(),_(),v("Repos long termin - PV et sorts restaurs","rest")},Z=(Ve,ct=null)=>{try{I(Ve,ct?{spellLevel:ct}:{}),v(`Sort lanc : ${Ve.name}`,"spell")}catch(Be){console.error("Erreur lors du lancement du sort:",Be),E(`Impossible de lancer le sort : ${Be.message}`)}};if(r==="character-selection")return i.jsx(cm,{FallbackComponent:ym,children:i.jsx(S1,{onCharacterSelect:L})});if(!N)return i.jsx("div",{className:"game-container",children:i.jsx("div",{className:"main-content",children:i.jsx("p",{children:"Chargement de ton personnage..."})})});const Q=typeof c=="object"&&c.type==="combat",le=`game-container ${Q?"combat-mode":""}`,me=`main-content ${Q?"combat-mode":""}`,oe=`sidebar ${Q?"combat-mode":""}`,et=()=>{if(d)return i.jsxs("div",{className:"long-rest-panel",children:[i.jsx(vm,{type:"long",character:N,onRestComplete:$}),i.jsx(Fn,{title:"Journal",compact:!0})]});if(u)return i.jsxs("div",{className:"short-rest-panel",children:[i.jsx(vm,{type:"short",character:N,onRestComplete:S}),i.jsx(Fn,{title:"Journal",compact:!0})]});if(typeof c=="object"&&c.type==="combat")return i.jsx(T1,{playerCharacter:N,playerCompanion:R,encounterData:c,onCombatEnd:V,onReplayCombat:()=>{N&&A({...N,currentHP:N.maxHP}),R&&q({...R,currentHP:R.maxHP}),X(),w(),v(" Combat rinitialis !","info"),setTimeout(()=>{const ct={...N,currentHP:N.maxHP},Be=R?{...R,currentHP:R.maxHP}:null;U(c,ct,Be)},100)}},h);const Ve=rv[c];return Ve?i.jsxs("div",{className:"scene-textuel",children:[i.jsx(Q1,{text:Ve.text,choices:Ve.choices,onChoice:ct=>{const Be=typeof ct=="function"?ct():ct,rt=gm(Be,{startLongRest:M,startShortRest:x,handleItemGain:K,setPlayerCompanion:q,addCombatMessage:v,handleSkillCheck:b});rt&&g(rt)}}),i.jsx(Fn,{title:"Journal",compact:!0})]}):i.jsx("p",{children:"Fin du jeu"})},De=N?.spellcasting,Pt=N?.weapons&&N.weapons.length>0,Kl=N?.specialAbilities;return i.jsx(cm,{FallbackComponent:ym,children:i.jsxs("div",{className:le,children:[i.jsx("div",{className:me,children:et()}),i.jsxs("div",{className:`${oe} right-sidebar`,children:[i.jsx(Mm,{character:N,variant:"interactive"}),R&&i.jsx(_1,{companion:R}),i.jsx(z1,{}),De&&i.jsx(L1,{character:N,onCastSpell:Z,isOutOfCombat:!0}),Pt&&i.jsxs("div",{className:"weapons-section",children:[i.jsx("h3",{children:"Armes"}),i.jsx("p",{children:"Panel d'armes  moderniser"})]}),Kl&&i.jsx(j1,{character:N})]})]})})}sv.createRoot(document.getElementById("root")).render(i.jsx(Z1,{}));
